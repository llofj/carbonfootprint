{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/ASUS/Desktop/carbonfootprint/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/ASUS/Desktop/carbonfootprint/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n// src/store/index.js\nimport { createStore } from 'vuex';\nimport { getAPI } from '@/config/api';\nimport message from './modules/message';\nexport default createStore({\n  state: {\n    user: null,\n    pet: {\n      name: '小绿',\n      level: 1,\n      health: '健康'\n    },\n    achievements: [],\n    leaderboard: [],\n    userCarbonReduction: 0\n  },\n  mutations: {\n    setUser: function setUser(state, user) {\n      state.user = user;\n    },\n    updatePet: function updatePet(state, pet) {\n      state.pet = pet;\n    },\n    setAchievements: function setAchievements(state, achievements) {\n      state.achievements = achievements;\n    },\n    setLeaderboard: function setLeaderboard(state, leaderboard) {\n      state.leaderboard = leaderboard;\n    },\n    setUserCarbonReduction: function setUserCarbonReduction(state, amount) {\n      state.userCarbonReduction = amount;\n    }\n  },\n  actions: {\n    login: function login(_ref, user) {\n      var commit = _ref.commit;\n      // 模拟登录\n      commit('setUser', user);\n    },\n    fetchAchievements: function fetchAchievements(_ref2) {\n      var commit = _ref2.commit;\n      // 模拟获取成就\n      var achievements = ['绿色饮食达人', '低碳通勤者'];\n      commit('setAchievements', achievements);\n    },\n    fetchLeaderboard: function fetchLeaderboard(_ref3) {\n      var commit = _ref3.commit;\n      // 模拟获取排行榜\n      var leaderboard = [{\n        name: '用户A',\n        reduction: 5.2\n      }, {\n        name: '用户B',\n        reduction: 4.8\n      }];\n      commit('setLeaderboard', leaderboard);\n    },\n    fetchUserCarbonReduction: function fetchUserCarbonReduction(_ref4) {\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var commit, response;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              commit = _ref4.commit;\n              _context.prev = 1;\n              _context.next = 4;\n              return getAPI().get('/achievement/carbon-reduction');\n            case 4:\n              response = _context.sent;\n              if (response.data && response.data.carbon_reduction !== undefined) {\n                commit('setUserCarbonReduction', response.data.carbon_reduction);\n              }\n              _context.next = 11;\n              break;\n            case 8:\n              _context.prev = 8;\n              _context.t0 = _context[\"catch\"](1);\n              console.error('获取用户减碳总量失败:', _context.t0);\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[1, 8]]);\n      }))();\n    }\n  },\n  getters: {\n    isLoggedIn: function isLoggedIn(state) {\n      return !!state.user;\n    },\n    currentUserCarbonReduction: function currentUserCarbonReduction(state) {\n      return state.userCarbonReduction;\n    }\n  },\n  modules: {\n    message: message\n  }\n});","map":{"version":3,"names":["createStore","getAPI","message","state","user","pet","name","level","health","achievements","leaderboard","userCarbonReduction","mutations","setUser","updatePet","setAchievements","setLeaderboard","setUserCarbonReduction","amount","actions","login","_ref","commit","fetchAchievements","_ref2","fetchLeaderboard","_ref3","reduction","fetchUserCarbonReduction","_ref4","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","get","sent","data","carbon_reduction","undefined","t0","console","error","stop","getters","isLoggedIn","currentUserCarbonReduction","modules"],"sources":["C:/Users/ASUS/Desktop/carbonfootprint/src/store/index.js"],"sourcesContent":["// src/store/index.js\r\nimport { createStore } from 'vuex';\r\nimport { getAPI } from '@/config/api';\r\nimport message from './modules/message';\r\n\r\nexport default createStore({\r\n  state: {\r\n    user: null,\r\n    pet: {\r\n      name: '小绿',\r\n      level: 1,\r\n      health: '健康'\r\n    },\r\n    achievements: [],\r\n    leaderboard: [],\r\n    userCarbonReduction: 0\r\n  },\r\n  mutations: {\r\n    setUser(state, user) {\r\n      state.user = user;\r\n    },\r\n    updatePet(state, pet) {\r\n      state.pet = pet;\r\n    },\r\n    setAchievements(state, achievements) {\r\n      state.achievements = achievements;\r\n    },\r\n    setLeaderboard(state, leaderboard) {\r\n      state.leaderboard = leaderboard;\r\n    },\r\n    setUserCarbonReduction(state, amount) {\r\n      state.userCarbonReduction = amount;\r\n    }\r\n  },\r\n  actions: {\r\n    login({ commit }, user) {\r\n      // 模拟登录\r\n      commit('setUser', user);\r\n    },\r\n    fetchAchievements({ commit }) {\r\n      // 模拟获取成就\r\n      const achievements = ['绿色饮食达人', '低碳通勤者'];\r\n      commit('setAchievements', achievements);\r\n    },\r\n    fetchLeaderboard({ commit }) {\r\n      // 模拟获取排行榜\r\n      const leaderboard = [\r\n        { name: '用户A', reduction: 5.2 },\r\n        { name: '用户B', reduction: 4.8 }\r\n      ];\r\n      commit('setLeaderboard', leaderboard);\r\n    },\r\n    async fetchUserCarbonReduction({ commit }) {\r\n      try {\r\n        const response = await getAPI().get('/achievement/carbon-reduction');\r\n        if (response.data && response.data.carbon_reduction !== undefined) {\r\n          commit('setUserCarbonReduction', response.data.carbon_reduction);\r\n        }\r\n      } catch (error) {\r\n        console.error('获取用户减碳总量失败:', error);\r\n      }\r\n    }\r\n  },\r\n  getters: {\r\n    isLoggedIn(state) {\r\n      return !!state.user;\r\n    },\r\n    currentUserCarbonReduction(state) {\r\n      return state.userCarbonReduction;\r\n    }\r\n  },\r\n  modules: {\r\n    message\r\n  }\r\n});"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}