{"ast":null,"code":"import _regeneratorRuntime from \"D:/EcoPaw/carbonfootprint_\\u672C\\u5730\\u7248/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _objectSpread from \"D:/EcoPaw/carbonfootprint_\\u672C\\u5730\\u7248/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _asyncToGenerator from \"D:/EcoPaw/carbonfootprint_\\u672C\\u5730\\u7248/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.date.to-iso-string.js\";\nimport \"core-js/modules/es.date.to-string.js\";\nimport \"core-js/modules/es.number.to-fixed.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.timers.js\";\nimport axios from 'axios';\nexport default {\n  data: function data() {\n    return {\n      pet: {\n        name: '碳宝',\n        level: 1,\n        health: '健康',\n        coins: 0,\n        experience: 0\n      },\n      steps: 0,\n      simulatedSteps: 8000,\n      carbonReduction: 0,\n      coinsEarned: 0,\n      animationClass: '',\n      animationTimeout: null,\n      experienceToNextLevel: 100,\n      feedingCost: 10,\n      trainingCost: 20,\n      levelUpCost: 100,\n      lastAction: null,\n      healthCheckInterval: null,\n      lastHealth: '健康',\n      isLevelingUp: false,\n      tempExperiencePercentage: 0,\n      hasSubmittedStepsToday: false,\n      todaySteps: 0\n    };\n  },\n  computed: {\n    nextLevelExperience: function nextLevelExperience() {\n      return this.pet.level * 100;\n    },\n    experiencePercentage: function experiencePercentage() {\n      if (this.isLevelingUp) {\n        return this.tempExperiencePercentage;\n      }\n      return this.currentLevelExcessExperience / 100 * 100;\n    },\n    currentLevelExcessExperience: function currentLevelExcessExperience() {\n      var baseExperience = (this.pet.level - 1) * 100;\n      return this.pet.experience - baseExperience;\n    }\n  },\n  created: function created() {\n    var _this = this;\n    return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      var token, response;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            token = localStorage.getItem('token');\n            if (token) {\n              _context.next = 5;\n              break;\n            }\n            _this.$router.push('/');\n            return _context.abrupt(\"return\");\n          case 5:\n            _context.next = 7;\n            return axios.get('http://localhost:5000/api/pet', {\n              headers: {\n                Authorization: \"Bearer \".concat(token)\n              }\n            });\n          case 7:\n            response = _context.sent;\n            // 保存后端数据但确保宠物名称为\"碳宝\"\n            _this.pet = _objectSpread(_objectSpread({}, response.data), {}, {\n              name: '碳宝'\n            });\n            _this.lastHealth = _this.pet.health;\n            _this.experienceToNextLevel = response.data.experienceToNextLevel;\n\n            // 检查今日是否已提交步数\n            _context.next = 13;\n            return _this.checkTodayStepsStatus();\n          case 13:\n            // 启动健康状态检查\n            _this.startHealthCheck();\n            _context.next = 19;\n            break;\n          case 16:\n            _context.prev = 16;\n            _context.t0 = _context[\"catch\"](0);\n            console.error('Error fetching pet data:', _context.t0);\n          case 19:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee, null, [[0, 16]]);\n    }))();\n  },\n  beforeUnmount: function beforeUnmount() {\n    // 组件销毁前清除定时器\n    if (this.healthCheckInterval) {\n      clearInterval(this.healthCheckInterval);\n    }\n  },\n  methods: {\n    getHealthStatusClass: function getHealthStatusClass(health) {\n      return {\n        'health-healthy': health === '健康',\n        'health-good': health === '良好',\n        'health-poor': health === '较差',\n        'health-malnourished': health === '营养不良'\n      };\n    },\n    submitSteps: function submitSteps() {\n      var _this2 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var token, response;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              if (!(_this2.simulatedSteps < 1000)) {\n                _context2.next = 4;\n                break;\n              }\n              _this2.$store.dispatch('message/showMessage', {\n                content: '步数太少，请至少输入1000步',\n                type: 'warning'\n              });\n              return _context2.abrupt(\"return\");\n            case 4:\n              if (!_this2.hasSubmittedStepsToday) {\n                _context2.next = 7;\n                break;\n              }\n              _this2.$store.dispatch('message/showMessage', {\n                content: \"\\u4ECA\\u5929\\u60A8\\u5DF2\\u7ECF\\u63D0\\u4EA4\\u8FC7\".concat(_this2.todaySteps, \"\\u6B65\\uFF0C\\u8BF7\\u660E\\u5929\\u518D\\u6765\\uFF01\"),\n                type: 'warning'\n              });\n              return _context2.abrupt(\"return\");\n            case 7:\n              token = localStorage.getItem('token');\n              _context2.next = 10;\n              return axios.post('http://localhost:5000/api/pet/steps', {\n                steps: _this2.simulatedSteps\n              }, {\n                headers: {\n                  Authorization: \"Bearer \".concat(token)\n                }\n              });\n            case 10:\n              response = _context2.sent;\n              // 确保宠物名称保持为\"碳宝\"\n              _this2.pet = _objectSpread(_objectSpread({}, response.data.pet), {}, {\n                name: '碳宝'\n              });\n              _this2.steps = response.data.stepsProcessed;\n              _this2.carbonReduction = response.data.carbonReduction;\n              _this2.coinsEarned = response.data.coinsEarned;\n\n              // 更新步数提交状态\n              _this2.hasSubmittedStepsToday = true;\n              _this2.todaySteps = _this2.steps;\n\n              // 触发获得碳币的动画\n              _this2.playAnimation('bounce');\n\n              // 显示成功消息\n              _this2.$store.dispatch('message/showMessage', {\n                content: \"\\u6B65\\u6570\\u63D0\\u4EA4\\u6210\\u529F\\uFF01\\u51CF\\u5C11\\u4E86\".concat(response.data.carbonReduction.toFixed(2), \"kg\\u78B3\\u6392\\u653E\\uFF0C\\u83B7\\u5F97\\u4E86\").concat(response.data.coinsEarned, \"\\u78B3\\u5E01\\uFF01\"),\n                type: 'success'\n              });\n              _this2.lastAction = response.data;\n              _context2.next = 26;\n              break;\n            case 22:\n              _context2.prev = 22;\n              _context2.t0 = _context2[\"catch\"](0);\n              console.error('Error submitting steps:', _context2.t0);\n              // 如果错误是因为今天已经提交过步数\n              if (_context2.t0.response && _context2.t0.response.data && _context2.t0.response.data.alreadySubmitted) {\n                _this2.hasSubmittedStepsToday = true;\n                _this2.todaySteps = _context2.t0.response.data.todaySteps || 0;\n                _this2.$store.dispatch('message/showMessage', {\n                  content: _context2.t0.response.data.message,\n                  type: 'warning'\n                });\n              } else {\n                _this2.$store.dispatch('message/showMessage', {\n                  content: '提交步数失败，请重试',\n                  type: 'error'\n                });\n              }\n            case 26:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, null, [[0, 22]]);\n      }))();\n    },\n    feedPet: function feedPet() {\n      var _this3 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        var token, response;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.prev = 0;\n              if (!(_this3.pet.coins < _this3.feedingCost)) {\n                _context3.next = 4;\n                break;\n              }\n              _this3.$store.dispatch('message/showMessage', {\n                content: '碳币不足，无法喂食',\n                type: 'error'\n              });\n              return _context3.abrupt(\"return\");\n            case 4:\n              token = localStorage.getItem('token');\n              _context3.next = 7;\n              return axios.post('http://localhost:5000/api/pet/feed', {}, {\n                headers: {\n                  Authorization: \"Bearer \".concat(token)\n                }\n              });\n            case 7:\n              response = _context3.sent;\n              // 更新宠物数据和健康状态，确保名称保持为\"碳宝\"\n              _this3.pet = _objectSpread(_objectSpread({}, response.data.pet), {}, {\n                name: '碳宝'\n              });\n              _this3.lastHealth = _this3.pet.health;\n\n              // 触发喂食动画\n              _this3.playAnimation('wiggle');\n              _this3.$store.dispatch('message/showMessage', {\n                content: response.data.message,\n                type: 'success'\n              });\n              _this3.lastAction = response.data;\n              _context3.next = 19;\n              break;\n            case 15:\n              _context3.prev = 15;\n              _context3.t0 = _context3[\"catch\"](0);\n              console.error('Error feeding pet:', _context3.t0);\n              _this3.$store.dispatch('message/showMessage', {\n                content: '喂食失败，请重试',\n                type: 'error'\n              });\n            case 19:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3, null, [[0, 15]]);\n      }))();\n    },\n    trainPet: function trainPet() {\n      var _this4 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n        var token, response;\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.prev = 0;\n              if (!(_this4.pet.coins < _this4.trainingCost || _this4.pet.health === '营养不良')) {\n                _context4.next = 4;\n                break;\n              }\n              _this4.$store.dispatch('message/showMessage', {\n                content: '碳币不足或健康状态不佳，无法训练',\n                type: 'error'\n              });\n              return _context4.abrupt(\"return\");\n            case 4:\n              token = localStorage.getItem('token');\n              _context4.next = 7;\n              return axios.post('http://localhost:5000/api/pet/train', {}, {\n                headers: {\n                  Authorization: \"Bearer \".concat(token)\n                }\n              });\n            case 7:\n              response = _context4.sent;\n              // 更新宠物数据，确保名称保持为\"碳宝\"\n              _this4.pet = _objectSpread(_objectSpread({}, response.data.pet), {}, {\n                name: '碳宝'\n              });\n              _this4.experienceToNextLevel = response.data.experienceToNextLevel;\n              _this4.playAnimation('shake');\n              _this4.$store.dispatch('message/showMessage', {\n                content: \"\\u8BAD\\u7EC3\\u6210\\u529F\\uFF01\\u83B7\\u5F97\".concat(response.data.experienceGained, \"\\u7ECF\\u9A8C\\u503C\\uFF0C\\u8DDD\\u79BB\\u4E0B\\u4E00\\u7EA7\\u8FD8\\u9700\").concat(_this4.experienceToNextLevel, \"\\u7ECF\\u9A8C\\u503C\"),\n                type: 'success'\n              });\n              _this4.lastAction = response.data;\n              _context4.next = 19;\n              break;\n            case 15:\n              _context4.prev = 15;\n              _context4.t0 = _context4[\"catch\"](0);\n              console.error('Error training pet:', _context4.t0);\n              _this4.$store.dispatch('message/showMessage', {\n                content: '训练失败，请重试',\n                type: 'error'\n              });\n            case 19:\n            case \"end\":\n              return _context4.stop();\n          }\n        }, _callee4, null, [[0, 15]]);\n      }))();\n    },\n    levelUp: function levelUp() {\n      var _this5 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5() {\n        var token, response;\n        return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n          while (1) switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.prev = 0;\n              if (!(_this5.pet.coins < _this5.levelUpCost || _this5.pet.health === '营养不良')) {\n                _context5.next = 4;\n                break;\n              }\n              _this5.$store.dispatch('message/showMessage', {\n                content: '碳币不足或健康状态不佳，无法升级',\n                type: 'error'\n              });\n              return _context5.abrupt(\"return\");\n            case 4:\n              token = localStorage.getItem('token');\n              _context5.next = 7;\n              return axios.post('http://localhost:5000/api/pet/level-up', {}, {\n                headers: {\n                  Authorization: \"Bearer \".concat(token)\n                }\n              });\n            case 7:\n              response = _context5.sent;\n              // 开始升级动画\n              _this5.isLevelingUp = true;\n              _this5.tempExperiencePercentage = _this5.experiencePercentage;\n\n              // 动画：先填满到100%\n              _context5.next = 12;\n              return _this5.animateExperience(100, 500);\n            case 12:\n              _context5.next = 14;\n              return new Promise(function (resolve) {\n                return setTimeout(resolve, 200);\n              });\n            case 14:\n              // 重置到新等级的起始位置\n              _this5.tempExperiencePercentage = 0;\n              _context5.next = 17;\n              return new Promise(function (resolve) {\n                return setTimeout(resolve, 100);\n              });\n            case 17:\n              // 更新宠物数据，确保名称保持为\"碳宝\"\n              _this5.pet = _objectSpread(_objectSpread({}, response.data.pet), {}, {\n                name: '碳宝'\n              });\n              _this5.experienceToNextLevel = response.data.experienceToNextLevel;\n\n              // 结束升级动画\n              _this5.isLevelingUp = false;\n              _this5.playAnimation('grow');\n              _this5.$store.dispatch('message/showMessage', {\n                content: \"\\u5347\\u7EA7\\u6210\\u529F\\uFF01\\u5F53\\u524D\\u7B49\\u7EA7\\uFF1A\".concat(_this5.pet.level, \"\\uFF0C\\u83B7\\u5F97\").concat(response.data.experienceGained, \"\\u7ECF\\u9A8C\\u503C\\uFF0C\\u8DDD\\u79BB\\u4E0B\\u4E00\\u7EA7\\u8FD8\\u9700\").concat(_this5.experienceToNextLevel, \"\\u7ECF\\u9A8C\\u503C\"),\n                type: 'success'\n              });\n              _this5.lastAction = response.data;\n              _context5.next = 30;\n              break;\n            case 25:\n              _context5.prev = 25;\n              _context5.t0 = _context5[\"catch\"](0);\n              console.error('Error leveling up pet:', _context5.t0);\n              _this5.$store.dispatch('message/showMessage', {\n                content: '升级失败，请重试',\n                type: 'error'\n              });\n              _this5.isLevelingUp = false;\n            case 30:\n            case \"end\":\n              return _context5.stop();\n          }\n        }, _callee5, null, [[0, 25]]);\n      }))();\n    },\n    animateExperience: function animateExperience(targetPercentage, duration) {\n      var _this6 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6() {\n        var startPercentage, startTime;\n        return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n          while (1) switch (_context6.prev = _context6.next) {\n            case 0:\n              startPercentage = _this6.tempExperiencePercentage;\n              startTime = performance.now();\n              return _context6.abrupt(\"return\", new Promise(function (resolve) {\n                var _animate = function animate(currentTime) {\n                  var elapsed = currentTime - startTime;\n                  var progress = Math.min(elapsed / duration, 1);\n\n                  // 使用缓动函数使动画更自然\n                  var easeProgress = _this6.easeOutQuad(progress);\n                  _this6.tempExperiencePercentage = startPercentage + (targetPercentage - startPercentage) * easeProgress;\n                  if (progress < 1) {\n                    requestAnimationFrame(_animate);\n                  } else {\n                    resolve();\n                  }\n                };\n                requestAnimationFrame(_animate);\n              }));\n            case 3:\n            case \"end\":\n              return _context6.stop();\n          }\n        }, _callee6);\n      }))();\n    },\n    easeOutQuad: function easeOutQuad(t) {\n      return t * (2 - t);\n    },\n    playAnimation: function playAnimation(animationType) {\n      var _this7 = this;\n      // 清除之前的动画\n      if (this.animationTimeout) {\n        clearTimeout(this.animationTimeout);\n      }\n\n      // 设置新动画\n      this.animationClass = animationType;\n\n      // 设置定时器移除动画类\n      this.animationTimeout = setTimeout(function () {\n        _this7.animationClass = '';\n      }, 1500);\n    },\n    startHealthCheck: function startHealthCheck() {\n      var _this8 = this;\n      // 每30秒检查一次健康状态\n      this.healthCheckInterval = setInterval(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7() {\n        var token, response, newHealth, message, type;\n        return _regeneratorRuntime().wrap(function _callee7$(_context7) {\n          while (1) switch (_context7.prev = _context7.next) {\n            case 0:\n              _context7.prev = 0;\n              token = localStorage.getItem('token');\n              _context7.next = 4;\n              return axios.get('http://localhost:5000/api/pet', {\n                headers: {\n                  Authorization: \"Bearer \".concat(token)\n                }\n              });\n            case 4:\n              response = _context7.sent;\n              newHealth = response.data.health; // 更新宠物数据，确保名称保持为\"碳宝\"\n              _this8.pet = _objectSpread(_objectSpread({}, response.data), {}, {\n                name: '碳宝'\n              });\n\n              // 检查健康状态是否发生变化\n              if (newHealth !== _this8.lastHealth) {\n                // 健康状态发生变化，显示提示\n                message = '';\n                type = 'warning';\n                if (newHealth === '营养不良') {\n                  message = '警告：宠物处于营养不良状态！请及时喂食。';\n                  type = 'error';\n                } else if (newHealth === '较差') {\n                  message = '提示：宠物健康状态下降，建议喂食。';\n                  type = 'warning';\n                } else if (newHealth === '良好') {\n                  message = '提示：宠物健康状态良好，继续保持。';\n                  type = 'info';\n                } else if (newHealth === '健康') {\n                  message = '提示：宠物健康状态极佳！';\n                  type = 'success';\n                }\n                _this8.$store.dispatch('message/showMessage', {\n                  content: message,\n                  type: type\n                });\n\n                // 更新上一次的健康状态\n                _this8.lastHealth = newHealth;\n\n                // 如果状态变为营养不良，立即禁用相关按钮\n                if (newHealth === '营养不良') {\n                  _this8.pet.health = '营养不良';\n                }\n              }\n              _context7.next = 13;\n              break;\n            case 10:\n              _context7.prev = 10;\n              _context7.t0 = _context7[\"catch\"](0);\n              console.error('Error checking pet health:', _context7.t0);\n            case 13:\n            case \"end\":\n              return _context7.stop();\n          }\n        }, _callee7, null, [[0, 10]]);\n      })), 30000); // 30秒检查一次\n    },\n    checkTodayStepsStatus: function checkTodayStepsStatus() {\n      var _this9 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee8() {\n        var token, today, response;\n        return _regeneratorRuntime().wrap(function _callee8$(_context8) {\n          while (1) switch (_context8.prev = _context8.next) {\n            case 0:\n              _context8.prev = 0;\n              token = localStorage.getItem('token');\n              today = new Date().toISOString().split('T')[0]; // 获取当前日期 YYYY-MM-DD\n              _context8.next = 5;\n              return axios.get(\"http://localhost:5000/api/pet/steps/today\", {\n                headers: {\n                  Authorization: \"Bearer \".concat(token)\n                }\n              });\n            case 5:\n              response = _context8.sent;\n              if (response.data && response.data.hasSubmittedToday) {\n                _this9.hasSubmittedStepsToday = true;\n                _this9.todaySteps = response.data.steps || 0;\n                _this9.steps = response.data.steps || 0;\n                _this9.carbonReduction = response.data.carbonReduction || 0;\n              }\n              _context8.next = 12;\n              break;\n            case 9:\n              _context8.prev = 9;\n              _context8.t0 = _context8[\"catch\"](0);\n              console.error('Error checking today steps status:', _context8.t0);\n            case 12:\n            case \"end\":\n              return _context8.stop();\n          }\n        }, _callee8, null, [[0, 9]]);\n      }))();\n    }\n  }\n};","map":{"version":3,"names":["axios","data","pet","name","level","health","coins","experience","steps","simulatedSteps","carbonReduction","coinsEarned","animationClass","animationTimeout","experienceToNextLevel","feedingCost","trainingCost","levelUpCost","lastAction","healthCheckInterval","lastHealth","isLevelingUp","tempExperiencePercentage","hasSubmittedStepsToday","todaySteps","computed","nextLevelExperience","experiencePercentage","currentLevelExcessExperience","baseExperience","created","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","token","response","wrap","_callee$","_context","prev","next","localStorage","getItem","$router","push","abrupt","get","headers","Authorization","concat","sent","_objectSpread","checkTodayStepsStatus","startHealthCheck","t0","console","error","stop","beforeUnmount","clearInterval","methods","getHealthStatusClass","submitSteps","_this2","_callee2","_callee2$","_context2","$store","dispatch","content","type","post","stepsProcessed","playAnimation","toFixed","alreadySubmitted","message","feedPet","_this3","_callee3","_callee3$","_context3","trainPet","_this4","_callee4","_callee4$","_context4","experienceGained","levelUp","_this5","_callee5","_callee5$","_context5","animateExperience","Promise","resolve","setTimeout","targetPercentage","duration","_this6","_callee6","startPercentage","startTime","_callee6$","_context6","performance","now","animate","currentTime","elapsed","progress","Math","min","easeProgress","easeOutQuad","requestAnimationFrame","t","animationType","_this7","clearTimeout","_this8","setInterval","_callee7","newHealth","_callee7$","_context7","_this9","_callee8","today","_callee8$","_context8","Date","toISOString","split","hasSubmittedToday"],"sources":["D:\\EcoPaw\\carbonfootprint_本地版\\src\\components\\VirtualPet.vue"],"sourcesContent":["<template>\n  <div class=\"virtual-pet-page\">\n    <h2 class=\"page-title\">我的虚拟宠物</h2>\n    \n    <div class=\"pet-container\">\n      <div class=\"pet-info-card\">\n        <div class=\"pet-name\">{{ pet.name }}</div>\n        <div class=\"pet-stats\">\n          <div class=\"stat\">\n            <i class=\"fa fa-star\"></i>\n            <span>等级: {{ pet.level }}</span>\n          </div>\n          <div class=\"stat\">\n            <i class=\"fa fa-heart\"></i>\n            <span>健康状态: \n              <span :class=\"['health-status', getHealthStatusClass(pet.health)]\">\n                {{ pet.health }}\n              </span>\n            </span>\n          </div>\n          <div class=\"stat\">\n            <i class=\"fa fa-coins\"></i>\n            <span>碳币: {{ pet.coins }}</span>\n          </div>\n          <div class=\"stat\">\n            <i class=\"fa fa-chart-line\"></i>\n            <span>已获得经验值: {{ pet.experience }} </span>\n          </div>\n        </div>\n        <div class=\"experience-bar\">\n          <div class=\"experience-progress\" :style=\"{ width: experiencePercentage + '%' }\"></div>\n          <div class=\"experience-text\">\n            <span class=\"current-exp\">{{ currentLevelExcessExperience }}</span>\n            <span class=\"exp-separator\">/</span>\n            <span class=\"next-level-exp\">100</span>\n            <span class=\"exp-percentage\">({{ experiencePercentage.toFixed(1) }}%)</span>\n          </div>\n        </div>\n      </div>\n      \n      <div class=\"pet-animation-container\">\n        <div class=\"pet-animation\" :class=\"animationClass\">\n          <img src=\"@/assets/pet_dog.png\" alt=\"碳宝\" class=\"pet-image\">\n        </div>\n      </div>\n      \n      <div class=\"pet-actions\">\n        <button @click=\"feedPet\" :disabled=\"pet.coins < feedingCost\" class=\"action-btn feed-btn\">\n          <i class=\"fa fa-utensils\"></i> 喂食 ({{ feedingCost }}碳币)\n        </button>\n        <button @click=\"trainPet\" :disabled=\"pet.coins < trainingCost || pet.health === '营养不良'\" class=\"action-btn train-btn\">\n          <i class=\"fa fa-dumbbell\"></i> 训练 ({{ trainingCost }}碳币)\n        </button>\n        <button @click=\"levelUp\" :disabled=\"pet.coins < levelUpCost || pet.health === '营养不良'\" class=\"action-btn level-up-btn\">\n          <i class=\"fa fa-arrow-up\"></i> 升级 ({{ levelUpCost }}碳币)\n        </button>\n      </div>\n    </div>\n    \n    <div v-if=\"pet.health === '营养不良'\" class=\"warning-message\">\n      <p>⚠️ 警告：宠物处于营养不良状态！</p>\n      <p>请先喂食提升健康状态，才能进行训练和升级。</p>\n    </div>\n    \n    <div class=\"steps-container\">\n      <h3>今日步数</h3>\n      <p class=\"steps-info\">今日步数: {{ steps }} 步</p>\n      <p class=\"carbon-info\" v-if=\"carbonReduction\">减少碳排放: {{ carbonReduction.toFixed(2) }} kg CO2</p>\n      <p class=\"coins-info\" v-if=\"coinsEarned\">获得碳币: {{ coinsEarned }}</p>\n      \n      <div class=\"steps-input\">\n        <input type=\"number\" v-model=\"simulatedSteps\" placeholder=\"输入步数\" min=\"1000\" max=\"30000\" />\n        <button @click=\"submitSteps\" class=\"submit-steps-btn\">\n          <i class=\"fa fa-walking\"></i> 提交步数\n        </button>\n      </div>\n      \n    </div>\n    \n    <div v-if=\"lastAction\" class=\"action-result\">\n      <p>{{ lastAction.message }}</p>\n      <p v-if=\"lastAction.carbonReduction\">\n        减少碳排放: {{ lastAction.carbonReduction }}kg CO2\n      </p>\n      <p v-if=\"lastAction.coinsEarned\">\n        获得碳币: {{ lastAction.coinsEarned }}\n      </p>\n      <p v-if=\"lastAction.experienceGained\">\n        获得经验值: {{ lastAction.experienceGained }}\n      </p>\n    </div>\n    \n    <div class=\"info-section\">\n      <h3>步行减排说明</h3>\n      <ul>\n        <li>每走1000步可减少约0.1kg碳排放</li>\n        <li>每走1000步可直接获得10个碳币</li>\n        <li>碳币可用于喂食、训练和直接升级</li>\n        <li>喂食可提升宠物健康状态</li>\n        <li>花费二十碳币训练宠物，根据健康状态获得不同经验值：</li>\n        <li class=\"training-info\">\n          <div class=\"health-status\">\n            <strong>健康状态：</strong>\n            <ul>\n              <li>健康：20%概率获得1-10经验值，40%概率获得11-30经验值，40%概率获得31-40经验值</li>\n              <li>良好：40%概率获得1-10经验值，40%概率获得11-30经验值，20%概率获得31-40经验值</li>\n              <li>较差：60%概率获得1-10经验值，20%概率获得11-30经验值，20%概率获得31-40经验值</li>\n              <li>营养不良：无法训练以及升级</li>\n            </ul>\n          </div>\n        </li>\n        <li>每100经验值可提升1级</li>\n        <li>宠物等级越高，减排效果越好</li>\n      </ul>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\n\nexport default {\n  data() {\n    return {\n      pet: {\n        name: '碳宝',\n        level: 1,\n        health: '健康',\n        coins: 0,\n        experience: 0\n      },\n      steps: 0,\n      simulatedSteps: 8000,\n      carbonReduction: 0,\n      coinsEarned: 0,\n      animationClass: '',\n      animationTimeout: null,\n      experienceToNextLevel: 100,\n      feedingCost: 10,\n      trainingCost: 20,\n      levelUpCost: 100,\n      lastAction: null,\n      healthCheckInterval: null,\n      lastHealth: '健康',\n      isLevelingUp: false,\n      tempExperiencePercentage: 0,\n      hasSubmittedStepsToday: false,\n      todaySteps: 0\n    };\n  },\n  computed: {\n    nextLevelExperience() {\n      return this.pet.level * 100;\n    },\n    experiencePercentage() {\n      if (this.isLevelingUp) {\n        return this.tempExperiencePercentage;\n      }\n      return (this.currentLevelExcessExperience / 100) * 100;\n    },\n    currentLevelExcessExperience() {\n      const baseExperience = (this.pet.level - 1) * 100;\n      return this.pet.experience - baseExperience;\n    }\n  },\n  async created() {\n    try {\n      const token = localStorage.getItem('token');\n      if (!token) {\n        this.$router.push('/');\n        return;\n      }\n      \n      // 获取宠物信息\n      const response = await axios.get('http://localhost:5000/api/pet', {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      \n      // 保存后端数据但确保宠物名称为\"碳宝\"\n      this.pet = {\n        ...response.data,\n        name: '碳宝'\n      };\n      this.lastHealth = this.pet.health;\n      this.experienceToNextLevel = response.data.experienceToNextLevel;\n      \n      // 检查今日是否已提交步数\n      await this.checkTodayStepsStatus();\n      \n      // 启动健康状态检查\n      this.startHealthCheck();\n    } catch (error) {\n      console.error('Error fetching pet data:', error);\n    }\n  },\n  beforeUnmount() {\n    // 组件销毁前清除定时器\n    if (this.healthCheckInterval) {\n      clearInterval(this.healthCheckInterval);\n    }\n  },\n  methods: {\n    getHealthStatusClass(health) {\n      return {\n        'health-healthy': health === '健康',\n        'health-good': health === '良好',\n        'health-poor': health === '较差',\n        'health-malnourished': health === '营养不良'\n      }\n    },\n    async submitSteps() {\n      try {\n        if (this.simulatedSteps < 1000) {\n          this.$store.dispatch('message/showMessage', {\n            content: '步数太少，请至少输入1000步',\n            type: 'warning'\n          });\n          return;\n        }\n        \n        // 如果已经提交过步数，显示提示\n        if (this.hasSubmittedStepsToday) {\n          this.$store.dispatch('message/showMessage', {\n            content: `今天您已经提交过${this.todaySteps}步，请明天再来！`,\n            type: 'warning'\n          });\n          return;\n        }\n        \n        const token = localStorage.getItem('token');\n        const response = await axios.post('http://localhost:5000/api/pet/steps', {\n          steps: this.simulatedSteps\n        }, {\n          headers: { Authorization: `Bearer ${token}` }\n        });\n        \n        // 确保宠物名称保持为\"碳宝\"\n        this.pet = {\n          ...response.data.pet,\n          name: '碳宝'\n        };\n        this.steps = response.data.stepsProcessed;\n        this.carbonReduction = response.data.carbonReduction;\n        this.coinsEarned = response.data.coinsEarned;\n        \n        // 更新步数提交状态\n        this.hasSubmittedStepsToday = true;\n        this.todaySteps = this.steps;\n        \n        // 触发获得碳币的动画\n        this.playAnimation('bounce');\n        \n        // 显示成功消息\n        this.$store.dispatch('message/showMessage', {\n          content: `步数提交成功！减少了${response.data.carbonReduction.toFixed(2)}kg碳排放，获得了${response.data.coinsEarned}碳币！`,\n          type: 'success'\n        });\n        \n        this.lastAction = response.data;\n      } catch (error) {\n        console.error('Error submitting steps:', error);\n        // 如果错误是因为今天已经提交过步数\n        if (error.response && error.response.data && error.response.data.alreadySubmitted) {\n          this.hasSubmittedStepsToday = true;\n          this.todaySteps = error.response.data.todaySteps || 0;\n          this.$store.dispatch('message/showMessage', {\n            content: error.response.data.message,\n            type: 'warning'\n          });\n        } else {\n          this.$store.dispatch('message/showMessage', {\n            content: '提交步数失败，请重试',\n            type: 'error'\n          });\n        }\n      }\n    },\n    async feedPet() {\n      try {\n        if (this.pet.coins < this.feedingCost) {\n          this.$store.dispatch('message/showMessage', {\n            content: '碳币不足，无法喂食',\n            type: 'error'\n          });\n          return;\n        }\n        \n        const token = localStorage.getItem('token');\n        const response = await axios.post('http://localhost:5000/api/pet/feed', {}, {\n          headers: { Authorization: `Bearer ${token}` }\n        });\n        \n        // 更新宠物数据和健康状态，确保名称保持为\"碳宝\"\n        this.pet = {\n          ...response.data.pet,\n          name: '碳宝'\n        };\n        this.lastHealth = this.pet.health;\n        \n        // 触发喂食动画\n        this.playAnimation('wiggle');\n        \n        this.$store.dispatch('message/showMessage', {\n          content: response.data.message,\n          type: 'success'\n        });\n        \n        this.lastAction = response.data;\n      } catch (error) {\n        console.error('Error feeding pet:', error);\n        this.$store.dispatch('message/showMessage', {\n          content: '喂食失败，请重试',\n          type: 'error'\n        });\n      }\n    },\n    async trainPet() {\n      try {\n        if (this.pet.coins < this.trainingCost || this.pet.health === '营养不良') {\n          this.$store.dispatch('message/showMessage', {\n            content: '碳币不足或健康状态不佳，无法训练',\n            type: 'error'\n          });\n          return;\n        }\n        \n        const token = localStorage.getItem('token');\n        const response = await axios.post('http://localhost:5000/api/pet/train', {}, {\n          headers: { Authorization: `Bearer ${token}` }\n        });\n        \n        // 更新宠物数据，确保名称保持为\"碳宝\"\n        this.pet = {\n          ...response.data.pet,\n          name: '碳宝'\n        };\n        this.experienceToNextLevel = response.data.experienceToNextLevel;\n        \n        this.playAnimation('shake');\n        \n        this.$store.dispatch('message/showMessage', {\n          content: `训练成功！获得${response.data.experienceGained}经验值，距离下一级还需${this.experienceToNextLevel}经验值`,\n          type: 'success'\n        });\n        \n        this.lastAction = response.data;\n      } catch (error) {\n        console.error('Error training pet:', error);\n        this.$store.dispatch('message/showMessage', {\n          content: '训练失败，请重试',\n          type: 'error'\n        });\n      }\n    },\n    async levelUp() {\n      try {\n        if (this.pet.coins < this.levelUpCost || this.pet.health === '营养不良') {\n          this.$store.dispatch('message/showMessage', {\n            content: '碳币不足或健康状态不佳，无法升级',\n            type: 'error'\n          });\n          return;\n        }\n        \n        const token = localStorage.getItem('token');\n        const response = await axios.post('http://localhost:5000/api/pet/level-up', {}, {\n          headers: { Authorization: `Bearer ${token}` }\n        });\n        \n        // 开始升级动画\n        this.isLevelingUp = true;\n        this.tempExperiencePercentage = this.experiencePercentage;\n        \n        // 动画：先填满到100%\n        await this.animateExperience(100, 500);\n        \n        // 短暂停顿\n        await new Promise(resolve => setTimeout(resolve, 200));\n        \n        // 重置到新等级的起始位置\n        this.tempExperiencePercentage = 0;\n        await new Promise(resolve => setTimeout(resolve, 100));\n        \n        // 更新宠物数据，确保名称保持为\"碳宝\"\n        this.pet = {\n          ...response.data.pet,\n          name: '碳宝'\n        };\n        this.experienceToNextLevel = response.data.experienceToNextLevel;\n        \n        // 结束升级动画\n        this.isLevelingUp = false;\n        \n        this.playAnimation('grow');\n        \n        this.$store.dispatch('message/showMessage', {\n          content: `升级成功！当前等级：${this.pet.level}，获得${response.data.experienceGained}经验值，距离下一级还需${this.experienceToNextLevel}经验值`,\n          type: 'success'\n        });\n        \n        this.lastAction = response.data;\n      } catch (error) {\n        console.error('Error leveling up pet:', error);\n        this.$store.dispatch('message/showMessage', {\n          content: '升级失败，请重试',\n          type: 'error'\n        });\n        this.isLevelingUp = false;\n      }\n    },\n    \n    async animateExperience(targetPercentage, duration) {\n      const startPercentage = this.tempExperiencePercentage;\n      const startTime = performance.now();\n      \n      return new Promise(resolve => {\n        const animate = (currentTime) => {\n          const elapsed = currentTime - startTime;\n          const progress = Math.min(elapsed / duration, 1);\n          \n          // 使用缓动函数使动画更自然\n          const easeProgress = this.easeOutQuad(progress);\n          \n          this.tempExperiencePercentage = startPercentage + (targetPercentage - startPercentage) * easeProgress;\n          \n          if (progress < 1) {\n            requestAnimationFrame(animate);\n          } else {\n            resolve();\n          }\n        };\n        \n        requestAnimationFrame(animate);\n      });\n    },\n    \n    easeOutQuad(t) {\n      return t * (2 - t);\n    },\n    playAnimation(animationType) {\n      // 清除之前的动画\n      if (this.animationTimeout) {\n        clearTimeout(this.animationTimeout);\n      }\n      \n      // 设置新动画\n      this.animationClass = animationType;\n      \n      // 设置定时器移除动画类\n      this.animationTimeout = setTimeout(() => {\n        this.animationClass = '';\n      }, 1500);\n    },\n    startHealthCheck() {\n      // 每30秒检查一次健康状态\n      this.healthCheckInterval = setInterval(async () => {\n        try {\n          const token = localStorage.getItem('token');\n          const response = await axios.get('http://localhost:5000/api/pet', {\n            headers: { Authorization: `Bearer ${token}` }\n          });\n          \n          const newHealth = response.data.health;\n          \n          // 更新宠物数据，确保名称保持为\"碳宝\"\n          this.pet = {\n            ...response.data,\n            name: '碳宝'\n          };\n          \n          // 检查健康状态是否发生变化\n          if (newHealth !== this.lastHealth) {\n            // 健康状态发生变化，显示提示\n            let message = '';\n            let type = 'warning';\n            \n            if (newHealth === '营养不良') {\n              message = '警告：宠物处于营养不良状态！请及时喂食。';\n              type = 'error';\n            } else if (newHealth === '较差') {\n              message = '提示：宠物健康状态下降，建议喂食。';\n              type = 'warning';\n            } else if (newHealth === '良好') {\n              message = '提示：宠物健康状态良好，继续保持。';\n              type = 'info';\n            } else if (newHealth === '健康') {\n              message = '提示：宠物健康状态极佳！';\n              type = 'success';\n            }\n            \n            this.$store.dispatch('message/showMessage', {\n              content: message,\n              type: type\n            });\n            \n            // 更新上一次的健康状态\n            this.lastHealth = newHealth;\n            \n            // 如果状态变为营养不良，立即禁用相关按钮\n            if (newHealth === '营养不良') {\n              this.pet.health = '营养不良';\n            }\n          }\n        } catch (error) {\n          console.error('Error checking pet health:', error);\n        }\n      }, 30000); // 30秒检查一次\n    },\n    async checkTodayStepsStatus() {\n      try {\n        const token = localStorage.getItem('token');\n        const today = new Date().toISOString().split('T')[0]; // 获取当前日期 YYYY-MM-DD\n        \n        const response = await axios.get(`http://localhost:5000/api/pet/steps/today`, {\n          headers: { Authorization: `Bearer ${token}` }\n        });\n        \n        if (response.data && response.data.hasSubmittedToday) {\n          this.hasSubmittedStepsToday = true;\n          this.todaySteps = response.data.steps || 0;\n          this.steps = response.data.steps || 0;\n          this.carbonReduction = response.data.carbonReduction || 0;\n        }\n      } catch (error) {\n        console.error('Error checking today steps status:', error);\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\n.virtual-pet-page {\n  max-width: 900px;\n  margin: 0 auto;\n  padding: 20px;\n  font-family: 'Arial', sans-serif;\n}\n\n.page-title {\n  color: #1e3d59;\n  text-align: center;\n  margin-bottom: 0.5rem;\n  font-size: 32px;\n  font-weight: 600;\n  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);\n}\n\n@media (max-width: 768px) {\n  .page-title {\n    font-size: 28px;\n  }\n  .pet-stats {\n    gap: 15px;\n  }\n  \n  .stat {\n    padding: 8px 12px;\n    font-size: 14px;\n  }\n  \n  .pet-actions {\n    flex-direction: column;\n    align-items: stretch;\n  }\n  \n  .steps-input {\n    flex-direction: column;\n  }\n  \n  .submit-steps-btn {\n    align-self: flex-end;\n  }\n}\n\n.pet-container {\n  background: rgba(255, 255, 255, 0.9);\n  border-radius: 20px;\n  padding: 30px;\n  margin-bottom: 30px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);\n  backdrop-filter: blur(10px);\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  position: relative;\n  overflow: hidden;\n}\n\n.pet-container::before {\n  display: none;\n}\n\n.pet-info-card {\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-bottom: 20px;\n}\n\n.pet-name {\n  font-size: 30px;\n  font-weight: bold;\n  margin-bottom: 15px;\n  color: #2c3e50;\n  position: relative;\n  display: inline-block;\n}\n\n.pet-name::after {\n  content: '';\n  position: absolute;\n  bottom: -5px;\n  left: 0;\n  width: 100%;\n  height: 2px;\n  background: linear-gradient(to right, #4CAF50, #2196F3);\n  border-radius: 2px;\n}\n\n.pet-stats {\n  display: flex;\n  gap: 25px;\n  flex-wrap: wrap;\n  justify-content: center;\n  margin: 20px 0;\n}\n\n.stat {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 10px 15px;\n  background: rgba(255, 255, 255, 0.8);\n  border-radius: 50px;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.07);\n  transition: all 0.3s ease;\n  border: 1px solid rgba(0, 0, 0, 0.05);\n}\n\n.stat:hover {\n  transform: translateY(-3px);\n  box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);\n}\n\n.stat i {\n  font-size: 18px;\n  width: 24px;\n  height: 24px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 50%;\n  color: white;\n}\n\n.stat:nth-child(1) i {\n  background: linear-gradient(135deg, #FF9800, #FF5722);\n}\n\n.stat:nth-child(2) i {\n  background: linear-gradient(135deg, #F44336, #E91E63);\n}\n\n.stat:nth-child(3) i {\n  background: linear-gradient(135deg, #FFEB3B, #FFC107);\n}\n\n.stat:nth-child(4) i {\n  background: linear-gradient(135deg, #4CAF50, #8BC34A);\n}\n\n.experience-bar {\n  width: 100%;\n  height: 28px;\n  background-color: rgba(240, 240, 240, 0.5);\n  border-radius: 14px;\n  margin: 15px 0;\n  position: relative;\n  overflow: hidden;\n  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.07);\n  border: 1px solid rgba(255, 255, 255, 0.7);\n}\n\n.experience-progress {\n  height: 100%;\n  background: linear-gradient(90deg, #4CAF50, #8BC34A);\n  transition: width 0.5s cubic-bezier(0.22, 1, 0.36, 1);\n  position: relative;\n  overflow: hidden;\n}\n\n.experience-progress::after {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: linear-gradient(\n    90deg,\n    rgba(255, 255, 255, 0.1) 0%,\n    rgba(255, 255, 255, 0.2) 50%,\n    rgba(255, 255, 255, 0.1) 100%\n  );\n  animation: shimmer 2s infinite;\n}\n\n.experience-text {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  color: #333;\n  font-size: 14px;\n  font-weight: bold;\n  text-shadow: 0 0 2px white;\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  white-space: nowrap;\n}\n\n.pet-animation-container {\n  width: 150px;\n  height: 180px;\n  position: relative;\n  margin: 40px 0 60px 0;\n  perspective: 1000px;\n  z-index: 2;\n}\n\n.pet-image {\n  width: 150px;\n  height: auto;\n  transition: transform 0.3s ease;\n  filter: drop-shadow(0 5px 15px rgba(0, 0, 0, 0.2));\n}\n\n.pet-animation {\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.pet-animation::before {\n  content: '';\n  position: absolute;\n  width: 150%;\n  height: 20px;\n  background: radial-gradient(ellipse at center, rgba(0, 0, 0, 0.2) 0%, rgba(0, 0, 0, 0) 70%);\n  bottom: -20px;\n  border-radius: 50%;\n  z-index: -1;\n}\n\n.action-btn {\n  padding: 12px 20px;\n  border: none;\n  border-radius: 50px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  transition: all 0.3s ease;\n  font-weight: bold;\n  font-size: 15px;\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);\n  position: relative;\n  overflow: hidden;\n  z-index: 1;\n}\n\n.action-btn::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: linear-gradient(rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0));\n  z-index: -1;\n}\n\n.action-btn:hover {\n  transform: translateY(-3px);\n  box-shadow: 0 7px 20px rgba(0, 0, 0, 0.15);\n}\n\n.action-btn:active {\n  transform: translateY(1px);\n}\n\n.feed-btn {\n  background: linear-gradient(135deg, #4caf50, #388e3c);\n  color: white;\n}\n\n.train-btn {\n  background: linear-gradient(135deg, #2196f3, #1976d2);\n  color: white;\n}\n\n.level-up-btn {\n  background: linear-gradient(135deg, #f44336, #d32f2f);\n  color: white;\n}\n\n.steps-container {\n  background: rgba(255, 255, 255, 0.9);\n  border-radius: 20px;\n  padding: 30px;\n  margin-bottom: 30px;\n  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);\n  backdrop-filter: blur(10px);\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  position: relative;\n}\n\n.steps-container::before {\n  display: none;\n}\n\n.steps-container h3 {\n  font-size: 22px;\n  color: #2c3e50;\n  margin-bottom: 15px;\n  position: relative;\n  display: inline-block;\n}\n\n.steps-container h3::after {\n  content: '';\n  position: absolute;\n  bottom: -5px;\n  left: 0;\n  width: 100%;\n  height: 2px;\n  background: linear-gradient(to right, #2196F3, #03A9F4);\n  border-radius: 2px;\n}\n\n.steps-info, .carbon-info, .coins-info {\n  margin: 12px 0;\n  font-size: 16px;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.steps-info::before {\n  content: '\\f54b'; /* fa-walking */\n  font-family: 'Font Awesome 5 Free';\n  font-weight: 900;\n  color: #2196f3;\n}\n\n.carbon-info {\n  color: #4caf50;\n}\n\n.carbon-info::before {\n  content: '\\f06c'; /* fa-leaf */\n  font-family: 'Font Awesome 5 Free';\n  font-weight: 900;\n  color: #4caf50;\n}\n\n.coins-info {\n  color: #ff9800;\n}\n\n.coins-info::before {\n  content: '\\f51e'; /* fa-coins */\n  font-family: 'Font Awesome 5 Free';\n  font-weight: 900;\n  color: #ff9800;\n}\n\n.steps-input {\n  display: flex;\n  gap: 10px;\n  margin: 20px 0;\n}\n\n.steps-input input {\n  flex-grow: 1;\n  padding: 12px 15px;\n  border: 1px solid rgba(0, 0, 0, 0.1);\n  border-radius: 50px;\n  background: rgba(255, 255, 255, 0.9);\n  font-size: 15px;\n  transition: all 0.3s ease;\n  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.05);\n}\n\n.steps-input input:focus {\n  outline: none;\n  border-color: #2196f3;\n  box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.2);\n}\n\n.submit-steps-btn {\n  background: linear-gradient(135deg, #00bcd4, #0097a7);\n  color: white;\n  border: none;\n  border-radius: 50px;\n  padding: 12px 20px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-weight: bold;\n  transition: all 0.3s ease;\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);\n}\n\n.submit-steps-btn:hover {\n  transform: translateY(-3px);\n  box-shadow: 0 7px 20px rgba(0, 0, 0, 0.15);\n}\n\n.info-section {\n  background: rgba(255, 255, 255, 0.9);\n  border-radius: 20px;\n  padding: 30px;\n  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);\n  backdrop-filter: blur(10px);\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  position: relative;\n}\n\n.info-section::before {\n  display: none;\n}\n\n.info-section h3 {\n  font-size: 22px;\n  color: #2c3e50;\n  margin-bottom: 15px;\n  position: relative;\n  display: inline-block;\n}\n\n.info-section h3::after {\n  content: '';\n  position: absolute;\n  bottom: -5px;\n  left: 0;\n  width: 100%;\n  height: 2px;\n  background: linear-gradient(to right, #FF9800, #F57C00);\n  border-radius: 2px;\n}\n\n.info-section ul {\n  padding-left: 20px;\n  margin-top: 15px;\n}\n\n.info-section li {\n  margin-bottom: 10px;\n  position: relative;\n  padding-left: 5px;\n}\n\n.info-section li::marker {\n  color: #FF9800;\n}\n\n.warning-message {\n  margin: 20px 0;\n  padding: 15px 20px;\n  background: linear-gradient(to right, rgba(255, 243, 224, 0.9), rgba(255, 236, 179, 0.9));\n  border-left: 4px solid #FFB74D;\n  border-radius: 10px;\n  color: #E65100;\n  display: flex;\n  flex-direction: column;\n  gap: 5px;\n  box-shadow: 0 5px 15px rgba(255, 183, 77, 0.2);\n}\n\n.warning-message p:first-child {\n  font-weight: bold;\n  font-size: 16px;\n}\n\n.action-result {\n  margin: 20px 0;\n  padding: 15px 20px;\n  background: linear-gradient(to right, rgba(232, 245, 233, 0.9), rgba(200, 230, 201, 0.9));\n  border-left: 4px solid #81C784;\n  border-radius: 10px;\n  color: #2E7D32;\n  box-shadow: 0 5px 15px rgba(129, 199, 132, 0.2);\n}\n\n.action-result p {\n  margin: 5px 0;\n}\n\n/* 动画效果 */\n@keyframes shimmer {\n  0% { transform: translateX(-100%); }\n  100% { transform: translateX(100%); }\n}\n\n.current-exp {\n  color: #2E7D32;\n}\n\n.exp-separator {\n  color: #666;\n}\n\n.next-level-exp {\n  color: #1B5E20;\n}\n\n.exp-percentage {\n  color: #666;\n  font-size: 12px;\n  margin-left: 4px;\n}\n\n/* 动画类 */\n.pet-actions {\n  display: flex;\n  gap: 15px;\n  margin-top: 30px;\n  flex-wrap: wrap;\n  justify-content: center;\n  width: 100%;\n}\n\n.action-btn:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n  transform: none;\n  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);\n}\n\n.bounce {\n  animation: bounce 1.5s ease;\n}\n\n.wiggle {\n  animation: wiggle 1.5s ease;\n}\n\n.shake {\n  animation: shake 1.5s ease;\n}\n\n.grow {\n  animation: grow 1.5s ease;\n}\n\n@keyframes bounce {\n  0%, 20%, 50%, 80%, 100% {transform: translateY(0);}\n  40% {transform: translateY(-30px);}\n  60% {transform: translateY(-15px);}\n}\n\n@keyframes wiggle {\n  0%, 100% {transform: rotate(0deg);}\n  25% {transform: rotate(5deg);}\n  50% {transform: rotate(0deg);}\n  75% {transform: rotate(-5deg);}\n}\n\n@keyframes shake {\n  0%, 100% {transform: translateX(0);}\n  10%, 30%, 50%, 70%, 90% {transform: translateX(-10px);}\n  20%, 40%, 60%, 80% {transform: translateX(10px);}\n}\n\n@keyframes grow {\n  0% {transform: scale(1);}\n  50% {transform: scale(1.2);}\n  100% {transform: scale(1);}\n}\n\n/* 健康状态样式 */\n.health-healthy {\n  color: #4CAF50;\n  font-weight: bold;\n}\n\n.health-good {\n  color: #2196F3;\n  font-weight: bold;\n}\n\n.health-poor {\n  color: #FFC107;\n  font-weight: bold;\n}\n\n.health-malnourished {\n  color: #F44336;\n  font-weight: bold;\n}\n\n.training-info {\n  margin-top: 10px;\n}\n\n.health-status {\n  margin-left: 20px;\n}\n\n.health-status ul {\n  margin-top: 5px;\n  margin-bottom: 5px;\n}\n\n.health-status li {\n  margin-bottom: 5px;\n  font-size: 0.9em;\n  color: #666;\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}