{"ast":null,"code":"import _regeneratorRuntime from \"D:/EcoPaw/carbonfootprint/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"D:/EcoPaw/carbonfootprint/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _objectSpread from \"D:/EcoPaw/carbonfootprint/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"core-js/modules/es.array.every.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.array.find-index.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.array.reduce.js\";\nimport \"core-js/modules/es.array.some.js\";\nimport \"core-js/modules/es.array.splice.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.every.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/es.iterator.reduce.js\";\nimport \"core-js/modules/es.iterator.some.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.timers.js\";\nimport { ref, computed } from 'vue';\nimport { useStore } from 'vuex';\nimport { useRouter } from 'vue-router';\nimport { getAPI } from '@/config/api';\nexport default {\n  name: 'CarbonReductionCalculator',\n  setup: function setup() {\n    var store = useStore();\n    var router = useRouter();\n    var showSuccess = ref(false);\n    var showError = ref(false);\n    var errorMessage = ref('');\n    var isSaving = ref(false);\n\n    // 减碳活动分类\n    var categories = [{\n      id: 'transport',\n      name: '交通出行',\n      icon: 'fas fa-car'\n    }, {\n      id: 'energy',\n      name: '能源使用',\n      icon: 'fas fa-bolt'\n    }, {\n      id: 'food',\n      name: '饮食选择',\n      icon: 'fas fa-utensils'\n    }, {\n      id: 'waste',\n      name: '垃圾处理',\n      icon: 'fas fa-trash'\n    }, {\n      id: 'lifestyle',\n      name: '生活方式',\n      icon: 'fas fa-heart'\n    }];\n\n    // 减碳活动列表\n    var activities = [{\n      id: 'bike',\n      category: 'transport',\n      name: '骑自行车出行',\n      description: '使用自行车代替机动车出行',\n      icon: 'fas fa-bicycle',\n      factor: 0.2,\n      unit: '公里'\n    }, {\n      id: 'public_transport',\n      category: 'transport',\n      name: '乘坐公共交通',\n      description: '使用公交、地铁等公共交通工具',\n      icon: 'fas fa-bus',\n      factor: 0.1,\n      unit: '公里'\n    }, {\n      id: 'walk',\n      category: 'transport',\n      name: '步行出行',\n      description: '选择步行代替其他交通方式',\n      icon: 'fas fa-walking',\n      factor: 0.05,\n      unit: '公里'\n    }, {\n      id: 'led_light',\n      category: 'energy',\n      name: '使用LED灯',\n      description: '使用LED节能灯泡',\n      icon: 'fas fa-lightbulb',\n      factor: 0.02,\n      unit: '小时'\n    }, {\n      id: 'solar_panel',\n      category: 'energy',\n      name: '使用太阳能',\n      description: '使用太阳能热水器或发电',\n      icon: 'fas fa-solar-panel',\n      factor: 0.5,\n      unit: '千瓦时'\n    }, {\n      id: 'vegetarian',\n      category: 'food',\n      name: '素食饮食',\n      description: '选择素食代替肉类',\n      icon: 'fas fa-leaf',\n      factor: 0.3,\n      unit: '餐'\n    }, {\n      id: 'local_food',\n      category: 'food',\n      name: '本地食材',\n      description: '选择本地生产的食材',\n      icon: 'fas fa-store',\n      factor: 0.1,\n      unit: '公斤'\n    }, {\n      id: 'recycle',\n      category: 'waste',\n      name: '垃圾分类回收',\n      description: '正确分类和回收垃圾',\n      icon: 'fas fa-recycle',\n      factor: 0.15,\n      unit: '公斤'\n    }, {\n      id: 'compost',\n      category: 'waste',\n      name: '厨余堆肥',\n      description: '将厨余垃圾进行堆肥处理',\n      icon: 'fas fa-seedling',\n      factor: 0.2,\n      unit: '公斤'\n    }, {\n      id: 'reusable_bag',\n      category: 'lifestyle',\n      name: '使用环保袋',\n      description: '使用可重复使用的购物袋',\n      icon: 'fas fa-shopping-bag',\n      factor: 0.01,\n      unit: '次'\n    }, {\n      id: 'reusable_bottle',\n      category: 'lifestyle',\n      name: '使用环保水杯',\n      description: '使用可重复使用的水杯',\n      icon: 'fas fa-glass-whiskey',\n      factor: 0.02,\n      unit: '次'\n    }];\n    var activeCategory = ref('transport');\n    var selectedActivities = ref([]);\n    var totalReduction = ref(0);\n\n    // 根据当前分类筛选活动\n    var filteredActivities = computed(function () {\n      return activities.filter(function (activity) {\n        return activity.category === activeCategory.value;\n      });\n    });\n\n    // 设置当前活动分类\n    var setActiveCategory = function setActiveCategory(categoryId) {\n      activeCategory.value = categoryId;\n    };\n\n    // 检查活动是否已选择\n    var isActivitySelected = function isActivitySelected(activityId) {\n      return selectedActivities.value.some(function (activity) {\n        return activity.id === activityId;\n      });\n    };\n\n    // 切换活动选择状态\n    var toggleActivity = function toggleActivity(activity) {\n      var index = selectedActivities.value.findIndex(function (item) {\n        return item.id === activity.id;\n      });\n      if (index === -1) {\n        selectedActivities.value.push(_objectSpread(_objectSpread({}, activity), {}, {\n          amount: 0\n        }));\n      } else {\n        selectedActivities.value.splice(index, 1);\n      }\n      calculateTotalReduction();\n    };\n\n    // 移除已选活动\n    var removeActivity = function removeActivity(activityId) {\n      selectedActivities.value = selectedActivities.value.filter(function (activity) {\n        return activity.id !== activityId;\n      });\n      calculateTotalReduction();\n    };\n\n    // 计算总减碳量\n    var calculateTotalReduction = function calculateTotalReduction() {\n      totalReduction.value = selectedActivities.value.reduce(function (total, activity) {\n        return total + activity.amount * activity.factor;\n      }, 0);\n    };\n\n    // 检查是否可以保存\n    var canSave = computed(function () {\n      return selectedActivities.value.length > 0 && selectedActivities.value.every(function (activity) {\n        return activity.amount > 0;\n      });\n    });\n\n    // 保存减碳记录\n    var saveReduction = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              if (!(!canSave.value || isSaving.value)) {\n                _context.next = 2;\n                break;\n              }\n              return _context.abrupt(\"return\");\n            case 2:\n              isSaving.value = true;\n              showSuccess.value = false;\n              showError.value = false;\n              _context.prev = 5;\n              _context.next = 8;\n              return getAPI().post('/carbon/reduction', {\n                activities: selectedActivities.value.map(function (activity) {\n                  return {\n                    id: activity.id,\n                    amount: activity.amount,\n                    reduction: activity.amount * activity.factor\n                  };\n                })\n              });\n            case 8:\n              response = _context.sent;\n              if (!response.data.success) {\n                _context.next = 18;\n                break;\n              }\n              _context.next = 12;\n              return store.dispatch('fetchUserCarbonReduction');\n            case 12:\n              // 清空已选活动\n              selectedActivities.value = [];\n              totalReduction.value = 0;\n\n              // 显示成功提示\n              showSuccess.value = true;\n              // 5秒后隐藏成功提示\n              setTimeout(function () {\n                showSuccess.value = false;\n              }, 5000);\n              _context.next = 21;\n              break;\n            case 18:\n              errorMessage.value = response.data.message || '保存失败，请稍后重试';\n              showError.value = true;\n              setTimeout(function () {\n                showError.value = false;\n              }, 5000);\n            case 21:\n              _context.next = 29;\n              break;\n            case 23:\n              _context.prev = 23;\n              _context.t0 = _context[\"catch\"](5);\n              console.error('保存减碳记录失败:', _context.t0);\n              errorMessage.value = '网络错误，请检查网络连接后重试';\n              showError.value = true;\n              setTimeout(function () {\n                showError.value = false;\n              }, 5000);\n            case 29:\n              _context.prev = 29;\n              isSaving.value = false;\n              return _context.finish(29);\n            case 32:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[5, 23, 29, 32]]);\n      }));\n      return function saveReduction() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    return {\n      categories: categories,\n      activeCategory: activeCategory,\n      filteredActivities: filteredActivities,\n      selectedActivities: selectedActivities,\n      totalReduction: totalReduction,\n      showSuccess: showSuccess,\n      showError: showError,\n      errorMessage: errorMessage,\n      isSaving: isSaving,\n      canSave: canSave,\n      setActiveCategory: setActiveCategory,\n      isActivitySelected: isActivitySelected,\n      toggleActivity: toggleActivity,\n      removeActivity: removeActivity,\n      calculateTotalReduction: calculateTotalReduction,\n      saveReduction: saveReduction\n    };\n  }\n};","map":{"version":3,"names":["ref","computed","useStore","useRouter","getAPI","name","setup","store","router","showSuccess","showError","errorMessage","isSaving","categories","id","icon","activities","category","description","factor","unit","activeCategory","selectedActivities","totalReduction","filteredActivities","filter","activity","value","setActiveCategory","categoryId","isActivitySelected","activityId","some","toggleActivity","index","findIndex","item","push","_objectSpread","amount","splice","calculateTotalReduction","removeActivity","reduce","total","canSave","length","every","saveReduction","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","abrupt","post","map","reduction","sent","data","success","dispatch","setTimeout","message","t0","console","error","finish","stop","apply","arguments"],"sources":["D:\\EcoPaw\\carbonfootprint\\src\\components\\CarbonReductionCalculator.vue"],"sourcesContent":["<template>\r\n  <div class=\"carbon-reduction-calculator\">\r\n    <div class=\"calculator-container\">\r\n      <!-- 左侧分类列表 -->\r\n      <div class=\"category-list\">\r\n        <div\r\n          v-for=\"category in categories\"\r\n          :key=\"category.id\"\r\n          class=\"category-item\"\r\n          :class=\"{ active: activeCategory === category.id }\"\r\n          @click=\"setActiveCategory(category.id)\"\r\n        >\r\n          <i :class=\"category.icon\"></i>\r\n          <span>{{ category.name }}</span>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 中间活动列表 -->\r\n      <div class=\"activity-list\">\r\n        <div\r\n          v-for=\"activity in filteredActivities\"\r\n          :key=\"activity.id\"\r\n          class=\"activity-item\"\r\n          :class=\"{ selected: isActivitySelected(activity.id) }\"\r\n          @click=\"toggleActivity(activity)\"\r\n        >\r\n          <div class=\"activity-icon\">\r\n            <i :class=\"activity.icon\"></i>\r\n          </div>\r\n          <div class=\"activity-info\">\r\n            <h3>{{ activity.name }}</h3>\r\n            <p>{{ activity.description }}</p>\r\n            <div class=\"activity-factor\">\r\n              <span>减碳系数：</span>\r\n              <span class=\"factor-value\">{{ activity.factor }} kgCO₂e/{{ activity.unit }}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 右侧计算面板 -->\r\n      <div class=\"calculation-panel\">\r\n        <div class=\"selected-activities\">\r\n          <h3>已选减碳活动</h3>\r\n          <div v-if=\"selectedActivities.length === 0\" class=\"no-activities\">\r\n            <i class=\"fas fa-info-circle\"></i>\r\n            <p>请从左侧选择减碳活动</p>\r\n          </div>\r\n          <div v-else class=\"activity-inputs\">\r\n            <div v-for=\"activity in selectedActivities\" :key=\"activity.id\" class=\"activity-input\">\r\n              <div class=\"activity-header\">\r\n                <span>{{ activity.name }}</span>\r\n                <button class=\"remove-btn\" @click=\"removeActivity(activity.id)\">\r\n                  <i class=\"fas fa-times\"></i>\r\n                </button>\r\n              </div>\r\n              <div class=\"input-group\">\r\n                <input\r\n                  type=\"number\"\r\n                  v-model=\"activity.amount\"\r\n                  :placeholder=\"'输入' + activity.unit\"\r\n                  min=\"0\"\r\n                  @input=\"calculateTotalReduction\"\r\n                />\r\n                <span class=\"unit\">{{ activity.unit }}</span>\r\n              </div>\r\n              <div class=\"reduction-amount\">\r\n                减碳量：{{ (activity.amount * activity.factor).toFixed(2) }} kgCO₂e\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"total-reduction\">\r\n          <div class=\"total-header\">\r\n            <h3>总减碳量</h3>\r\n            <span class=\"total-value\">{{ totalReduction.toFixed(2) }} kgCO₂e</span>\r\n          </div>\r\n          <div class=\"tree-equivalent\">\r\n            <i class=\"fas fa-tree\"></i>\r\n            <span>相当于种植了 {{ (totalReduction / 18).toFixed(1) }} 棵树</span>\r\n          </div>\r\n        </div>\r\n\r\n        <button\r\n          class=\"save-btn\"\r\n          :disabled=\"!canSave || isSaving\"\r\n          @click=\"saveReduction\"\r\n        >\r\n          <i class=\"fas fa-save\" v-if=\"!isSaving\"></i>\r\n          <i class=\"fas fa-spinner fa-spin\" v-else></i>\r\n          {{ isSaving ? '保存中...' : '保存减碳记录' }}\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 保存成功提示 -->\r\n    <div v-if=\"showSuccess\" class=\"success-message success\">\r\n      <i class=\"fas fa-check-circle\"></i>\r\n      <div class=\"message-content\">\r\n        <div class=\"message-title\">减碳记录保存成功！</div>\r\n        <div class=\"message-detail\">已将{{ totalReduction.toFixed(2) }}kgCO₂e加入您的减碳总量</div>\r\n      </div>\r\n    </div>\r\n    \r\n    <!-- 保存失败提示 -->\r\n    <div v-if=\"showError\" class=\"success-message error\">\r\n      <i class=\"fas fa-exclamation-circle\"></i>\r\n      <div class=\"message-content\">\r\n        <div class=\"message-title\">保存失败</div>\r\n        <div class=\"message-detail\">{{ errorMessage }}</div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, computed } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport { useRouter } from 'vue-router'\r\nimport { getAPI } from '@/config/api'\r\n\r\nexport default {\r\n  name: 'CarbonReductionCalculator',\r\n  setup() {\r\n    const store = useStore()\r\n    const router = useRouter()\r\n    const showSuccess = ref(false)\r\n    const showError = ref(false)\r\n    const errorMessage = ref('')\r\n    const isSaving = ref(false)\r\n\r\n    // 减碳活动分类\r\n    const categories = [\r\n      { id: 'transport', name: '交通出行', icon: 'fas fa-car' },\r\n      { id: 'energy', name: '能源使用', icon: 'fas fa-bolt' },\r\n      { id: 'food', name: '饮食选择', icon: 'fas fa-utensils' },\r\n      { id: 'waste', name: '垃圾处理', icon: 'fas fa-trash' },\r\n      { id: 'lifestyle', name: '生活方式', icon: 'fas fa-heart' }\r\n    ]\r\n\r\n    // 减碳活动列表\r\n    const activities = [\r\n      {\r\n        id: 'bike',\r\n        category: 'transport',\r\n        name: '骑自行车出行',\r\n        description: '使用自行车代替机动车出行',\r\n        icon: 'fas fa-bicycle',\r\n        factor: 0.2,\r\n        unit: '公里'\r\n      },\r\n      {\r\n        id: 'public_transport',\r\n        category: 'transport',\r\n        name: '乘坐公共交通',\r\n        description: '使用公交、地铁等公共交通工具',\r\n        icon: 'fas fa-bus',\r\n        factor: 0.1,\r\n        unit: '公里'\r\n      },\r\n      {\r\n        id: 'walk',\r\n        category: 'transport',\r\n        name: '步行出行',\r\n        description: '选择步行代替其他交通方式',\r\n        icon: 'fas fa-walking',\r\n        factor: 0.05,\r\n        unit: '公里'\r\n      },\r\n      {\r\n        id: 'led_light',\r\n        category: 'energy',\r\n        name: '使用LED灯',\r\n        description: '使用LED节能灯泡',\r\n        icon: 'fas fa-lightbulb',\r\n        factor: 0.02,\r\n        unit: '小时'\r\n      },\r\n      {\r\n        id: 'solar_panel',\r\n        category: 'energy',\r\n        name: '使用太阳能',\r\n        description: '使用太阳能热水器或发电',\r\n        icon: 'fas fa-solar-panel',\r\n        factor: 0.5,\r\n        unit: '千瓦时'\r\n      },\r\n      {\r\n        id: 'vegetarian',\r\n        category: 'food',\r\n        name: '素食饮食',\r\n        description: '选择素食代替肉类',\r\n        icon: 'fas fa-leaf',\r\n        factor: 0.3,\r\n        unit: '餐'\r\n      },\r\n      {\r\n        id: 'local_food',\r\n        category: 'food',\r\n        name: '本地食材',\r\n        description: '选择本地生产的食材',\r\n        icon: 'fas fa-store',\r\n        factor: 0.1,\r\n        unit: '公斤'\r\n      },\r\n      {\r\n        id: 'recycle',\r\n        category: 'waste',\r\n        name: '垃圾分类回收',\r\n        description: '正确分类和回收垃圾',\r\n        icon: 'fas fa-recycle',\r\n        factor: 0.15,\r\n        unit: '公斤'\r\n      },\r\n      {\r\n        id: 'compost',\r\n        category: 'waste',\r\n        name: '厨余堆肥',\r\n        description: '将厨余垃圾进行堆肥处理',\r\n        icon: 'fas fa-seedling',\r\n        factor: 0.2,\r\n        unit: '公斤'\r\n      },\r\n      {\r\n        id: 'reusable_bag',\r\n        category: 'lifestyle',\r\n        name: '使用环保袋',\r\n        description: '使用可重复使用的购物袋',\r\n        icon: 'fas fa-shopping-bag',\r\n        factor: 0.01,\r\n        unit: '次'\r\n      },\r\n      {\r\n        id: 'reusable_bottle',\r\n        category: 'lifestyle',\r\n        name: '使用环保水杯',\r\n        description: '使用可重复使用的水杯',\r\n        icon: 'fas fa-glass-whiskey',\r\n        factor: 0.02,\r\n        unit: '次'\r\n      }\r\n    ]\r\n\r\n    const activeCategory = ref('transport')\r\n    const selectedActivities = ref([])\r\n    const totalReduction = ref(0)\r\n\r\n    // 根据当前分类筛选活动\r\n    const filteredActivities = computed(() => {\r\n      return activities.filter(activity => activity.category === activeCategory.value)\r\n    })\r\n\r\n    // 设置当前活动分类\r\n    const setActiveCategory = (categoryId) => {\r\n      activeCategory.value = categoryId\r\n    }\r\n\r\n    // 检查活动是否已选择\r\n    const isActivitySelected = (activityId) => {\r\n      return selectedActivities.value.some(activity => activity.id === activityId)\r\n    }\r\n\r\n    // 切换活动选择状态\r\n    const toggleActivity = (activity) => {\r\n      const index = selectedActivities.value.findIndex(item => item.id === activity.id)\r\n      if (index === -1) {\r\n        selectedActivities.value.push({\r\n          ...activity,\r\n          amount: 0\r\n        })\r\n      } else {\r\n        selectedActivities.value.splice(index, 1)\r\n      }\r\n      calculateTotalReduction()\r\n    }\r\n\r\n    // 移除已选活动\r\n    const removeActivity = (activityId) => {\r\n      selectedActivities.value = selectedActivities.value.filter(\r\n        activity => activity.id !== activityId\r\n      )\r\n      calculateTotalReduction()\r\n    }\r\n\r\n    // 计算总减碳量\r\n    const calculateTotalReduction = () => {\r\n      totalReduction.value = selectedActivities.value.reduce((total, activity) => {\r\n        return total + (activity.amount * activity.factor)\r\n      }, 0)\r\n    }\r\n\r\n    // 检查是否可以保存\r\n    const canSave = computed(() => {\r\n      return selectedActivities.value.length > 0 &&\r\n        selectedActivities.value.every(activity => activity.amount > 0)\r\n    })\r\n\r\n    // 保存减碳记录\r\n    const saveReduction = async () => {\r\n      if (!canSave.value || isSaving.value) return\r\n      \r\n      isSaving.value = true\r\n      showSuccess.value = false\r\n      showError.value = false\r\n\r\n      try {\r\n        const response = await getAPI().post('/carbon/reduction', {\r\n          activities: selectedActivities.value.map(activity => ({\r\n            id: activity.id,\r\n            amount: activity.amount,\r\n            reduction: activity.amount * activity.factor\r\n          }))\r\n        })\r\n\r\n        if (response.data.success) {\r\n          // 更新用户的减碳总量\r\n          await store.dispatch('fetchUserCarbonReduction')\r\n          \r\n          // 清空已选活动\r\n          selectedActivities.value = []\r\n          totalReduction.value = 0\r\n          \r\n          // 显示成功提示\r\n          showSuccess.value = true\r\n          // 5秒后隐藏成功提示\r\n          setTimeout(() => {\r\n            showSuccess.value = false\r\n          }, 5000)\r\n        } else {\r\n          errorMessage.value = response.data.message || '保存失败，请稍后重试'\r\n          showError.value = true\r\n          setTimeout(() => {\r\n            showError.value = false\r\n          }, 5000)\r\n        }\r\n      } catch (error) {\r\n        console.error('保存减碳记录失败:', error)\r\n        errorMessage.value = '网络错误，请检查网络连接后重试'\r\n        showError.value = true\r\n        setTimeout(() => {\r\n          showError.value = false\r\n        }, 5000)\r\n      } finally {\r\n        isSaving.value = false\r\n      }\r\n    }\r\n\r\n    return {\r\n      categories,\r\n      activeCategory,\r\n      filteredActivities,\r\n      selectedActivities,\r\n      totalReduction,\r\n      showSuccess,\r\n      showError,\r\n      errorMessage,\r\n      isSaving,\r\n      canSave,\r\n      setActiveCategory,\r\n      isActivitySelected,\r\n      toggleActivity,\r\n      removeActivity,\r\n      calculateTotalReduction,\r\n      saveReduction\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.carbon-reduction-calculator {\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n  padding: 0 20px;\r\n}\r\n\r\n.calculator-header {\r\n  text-align: center;\r\n  margin-bottom: 30px;\r\n  display: none; /* 隐藏重复的标题 */\r\n}\r\n\r\n.calculator-container {\r\n  display: flex;\r\n  gap: 20px;\r\n  background: #fff;\r\n  border-radius: 10px;\r\n  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);\r\n  padding: 20px;\r\n}\r\n\r\n.category-list {\r\n  width: 200px;\r\n  border-right: 1px solid #eee;\r\n  padding-right: 20px;\r\n}\r\n\r\n.category-item {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 12px 15px;\r\n  margin-bottom: 10px;\r\n  border-radius: 8px;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.category-item:hover {\r\n  background: #f5f5f5;\r\n}\r\n\r\n.category-item.active {\r\n  background: #e3f2fd;\r\n  color: #1976d2;\r\n}\r\n\r\n.category-item i {\r\n  margin-right: 10px;\r\n  font-size: 18px;\r\n}\r\n\r\n.activity-list {\r\n  flex: 1;\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));\r\n  gap: 15px;\r\n  padding: 0 20px;\r\n  max-height: 600px;\r\n  overflow-y: auto;\r\n}\r\n\r\n.activity-item {\r\n  background: #fff;\r\n  border: 1px solid #eee;\r\n  border-radius: 8px;\r\n  padding: 15px;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.activity-item:hover {\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.activity-item.selected {\r\n  border-color: #4caf50;\r\n  background: #f1f8e9;\r\n}\r\n\r\n.activity-icon {\r\n  width: 40px;\r\n  height: 40px;\r\n  background: #f5f5f5;\r\n  border-radius: 50%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.activity-icon i {\r\n  font-size: 20px;\r\n  color: #666;\r\n}\r\n\r\n.activity-info h3 {\r\n  font-size: 16px;\r\n  margin-bottom: 5px;\r\n  color: #2c3e50;\r\n}\r\n\r\n.activity-info p {\r\n  font-size: 14px;\r\n  color: #666;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.activity-factor {\r\n  font-size: 14px;\r\n  color: #666;\r\n}\r\n\r\n.factor-value {\r\n  color: #4caf50;\r\n  font-weight: bold;\r\n}\r\n\r\n.calculation-panel {\r\n  width: 300px;\r\n  border-left: 1px solid #eee;\r\n  padding-left: 20px;\r\n}\r\n\r\n.selected-activities {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.selected-activities h3 {\r\n  font-size: 18px;\r\n  margin-bottom: 15px;\r\n  color: #2c3e50;\r\n}\r\n\r\n.no-activities {\r\n  text-align: center;\r\n  padding: 20px;\r\n  color: #999;\r\n}\r\n\r\n.no-activities i {\r\n  font-size: 24px;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.activity-inputs {\r\n  max-height: 300px;\r\n  overflow-y: auto;\r\n}\r\n\r\n.activity-input {\r\n  background: #f5f5f5;\r\n  border-radius: 8px;\r\n  padding: 15px;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.activity-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.remove-btn {\r\n  background: none;\r\n  border: none;\r\n  color: #999;\r\n  cursor: pointer;\r\n  padding: 5px;\r\n}\r\n\r\n.remove-btn:hover {\r\n  color: #f44336;\r\n}\r\n\r\n.input-group {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.input-group input {\r\n  flex: 1;\r\n  padding: 8px 12px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  margin-right: 10px;\r\n}\r\n\r\n.unit {\r\n  color: #666;\r\n  font-size: 14px;\r\n}\r\n\r\n.reduction-amount {\r\n  font-size: 14px;\r\n  color: #4caf50;\r\n}\r\n\r\n.total-reduction {\r\n  background: #e8f5e9;\r\n  border-radius: 8px;\r\n  padding: 20px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.total-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.total-value {\r\n  font-size: 24px;\r\n  font-weight: bold;\r\n  color: #4caf50;\r\n}\r\n\r\n.tree-equivalent {\r\n  display: flex;\r\n  align-items: center;\r\n  color: #666;\r\n}\r\n\r\n.tree-equivalent i {\r\n  margin-right: 10px;\r\n  color: #4caf50;\r\n}\r\n\r\n.save-btn {\r\n  width: 100%;\r\n  padding: 12px;\r\n  background: #4caf50;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 4px;\r\n  font-size: 16px;\r\n  cursor: pointer;\r\n  transition: background 0.3s ease;\r\n}\r\n\r\n.save-btn:hover {\r\n  background: #43a047;\r\n}\r\n\r\n.save-btn:disabled {\r\n  background: #cccccc;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.save-btn i {\r\n  margin-right: 8px;\r\n}\r\n\r\n.success-message {\r\n  position: fixed;\r\n  top: 20px;\r\n  right: 20px;\r\n  color: white;\r\n  padding: 15px 25px;\r\n  border-radius: 4px;\r\n  display: flex;\r\n  align-items: flex-start;\r\n  animation: slideIn 0.3s ease;\r\n  z-index: 1000;\r\n  min-width: 300px;\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\r\n}\r\n\r\n.success-message.success {\r\n  background: #4caf50;\r\n}\r\n\r\n.success-message.error {\r\n  background: #f44336;\r\n}\r\n\r\n.success-message i {\r\n  margin-right: 15px;\r\n  font-size: 24px;\r\n}\r\n\r\n.message-content {\r\n  flex: 1;\r\n}\r\n\r\n.message-title {\r\n  font-weight: bold;\r\n  margin-bottom: 5px;\r\n}\r\n\r\n.message-detail {\r\n  font-size: 14px;\r\n  opacity: 0.9;\r\n}\r\n\r\n@keyframes slideIn {\r\n  from {\r\n    transform: translateX(100%);\r\n    opacity: 0;\r\n  }\r\n  to {\r\n    transform: translateX(0);\r\n    opacity: 1;\r\n  }\r\n}\r\n\r\n/* 按钮加载中状态 */\r\n.fa-spinner {\r\n  animation: spin 1s infinite linear;\r\n}\r\n\r\n@keyframes spin {\r\n  from {\r\n    transform: rotate(0deg);\r\n  }\r\n  to {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}