{"ast":null,"code":"import \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.number.to-fixed.js\";\nimport { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, normalizeClass as _normalizeClass, vModelSelect as _vModelSelect, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, normalizeStyle as _normalizeStyle, createStaticVNode as _createStaticVNode } from \"vue\";\nvar _hoisted_1 = {\n  \"class\": \"leaderboard-page\"\n};\nvar _hoisted_2 = {\n  key: 0,\n  \"class\": \"error-message\"\n};\nvar _hoisted_3 = {\n  \"class\": \"user-rank-card\"\n};\nvar _hoisted_4 = {\n  \"class\": \"user-rank-header\"\n};\nvar _hoisted_5 = {\n  \"class\": \"user-avatar-and-info\"\n};\nvar _hoisted_6 = {\n  \"class\": \"user-avatar\"\n};\nvar _hoisted_7 = {\n  key: 0\n};\nvar _hoisted_8 = {\n  key: 1\n};\nvar _hoisted_9 = {\n  \"class\": \"user-info\"\n};\nvar _hoisted_10 = {\n  key: 0,\n  \"class\": \"user-badges\"\n};\nvar _hoisted_11 = {\n  key: 0,\n  \"class\": \"badge top-badge\",\n  title: \"排名前三\"\n};\nvar _hoisted_12 = {\n  key: 1,\n  \"class\": \"badge century-badge\",\n  title: \"减排量超过100kg\"\n};\nvar _hoisted_13 = {\n  key: 2,\n  \"class\": \"badge progress-badge\",\n  title: \"减排量超过50kg\"\n};\nvar _hoisted_14 = {\n  key: 3,\n  \"class\": \"badge newcomer-badge\",\n  title: \"新用户\"\n};\nvar _hoisted_15 = {\n  key: 1,\n  \"class\": \"rank-badge loading-rank\"\n};\nvar _hoisted_16 = {\n  \"class\": \"user-stats\"\n};\nvar _hoisted_17 = {\n  \"class\": \"stat-item\"\n};\nvar _hoisted_18 = {\n  \"class\": \"stat-value carbon-value\"\n};\nvar _hoisted_19 = {\n  \"class\": \"stat-item\"\n};\nvar _hoisted_20 = {\n  \"class\": \"stat-value\"\n};\nvar _hoisted_21 = {\n  key: 1,\n  \"class\": \"fas fa-trophy text-normal\"\n};\nvar _hoisted_22 = {\n  \"class\": \"stat-label\"\n};\nvar _hoisted_23 = {\n  \"class\": \"stat-item\"\n};\nvar _hoisted_24 = {\n  \"class\": \"stat-value achievement\"\n};\nvar _hoisted_25 = {\n  \"class\": \"percentage\"\n};\nvar _hoisted_26 = {\n  \"class\": \"leaderboard-controls\"\n};\nvar _hoisted_27 = {\n  \"class\": \"update-section\"\n};\nvar _hoisted_28 = [\"disabled\"];\nvar _hoisted_29 = {\n  \"class\": \"filter-section\"\n};\nvar _hoisted_30 = {\n  \"class\": \"leaderboard-container\"\n};\nvar _hoisted_31 = {\n  \"class\": \"leaderboard-table\"\n};\nvar _hoisted_32 = {\n  \"class\": \"rank-cell\"\n};\nvar _hoisted_33 = {\n  key: 0\n};\nvar _hoisted_34 = {\n  \"class\": \"user-info-row\"\n};\nvar _hoisted_35 = {\n  key: 0,\n  \"class\": \"current-user-tag\"\n};\nvar _hoisted_36 = {\n  key: 0,\n  \"class\": \"no-data\"\n};\nvar _hoisted_37 = {\n  key: 1,\n  \"class\": \"pagination\"\n};\nvar _hoisted_38 = [\"disabled\"];\nvar _hoisted_39 = {\n  \"class\": \"page-info\"\n};\nvar _hoisted_40 = [\"disabled\"];\nvar _hoisted_41 = {\n  key: 2,\n  \"class\": \"total-entries\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[19] || (_cache[19] = _createElementVNode(\"h2\", {\n    \"class\": \"page-title\"\n  }, \"碳减排排行榜\", -1 /* HOISTED */)), $data.errorMessage ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_cache[5] || (_cache[5] = _createElementVNode(\"i\", {\n    \"class\": \"fas fa-exclamation-circle\"\n  }, null, -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString($data.errorMessage), 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" 用户自己的排名信息卡片，更美观的展示 \"), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"div\", _hoisted_6, [$data.username ? (_openBlock(), _createElementBlock(\"span\", _hoisted_7, _toDisplayString($options.getInitials($data.username)), 1 /* TEXT */)) : (_openBlock(), _createElementBlock(\"span\", _hoisted_8, _cache[6] || (_cache[6] = [_createElementVNode(\"i\", {\n    \"class\": \"fas fa-user\"\n  }, null, -1 /* HOISTED */)])))]), _createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"h3\", null, _toDisplayString($data.username || '未能获取用户名'), 1 /* TEXT */), _cache[11] || (_cache[11] = _createElementVNode(\"div\", {\n    \"class\": \"user-status\"\n  }, \"您当前的碳减排状态\", -1 /* HOISTED */)), $data.userRank ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [$data.userRank.rank <= 3 ? (_openBlock(), _createElementBlock(\"span\", _hoisted_11, _cache[7] || (_cache[7] = [_createElementVNode(\"i\", {\n    \"class\": \"fas fa-crown\"\n  }, null, -1 /* HOISTED */)]))) : _createCommentVNode(\"v-if\", true), $data.userRank.carbon_reduction >= 100 ? (_openBlock(), _createElementBlock(\"span\", _hoisted_12, _cache[8] || (_cache[8] = [_createElementVNode(\"i\", {\n    \"class\": \"fas fa-medal\"\n  }, null, -1 /* HOISTED */)]))) : _createCommentVNode(\"v-if\", true), $data.userRank.carbon_reduction >= 50 ? (_openBlock(), _createElementBlock(\"span\", _hoisted_13, _cache[9] || (_cache[9] = [_createElementVNode(\"i\", {\n    \"class\": \"fas fa-award\"\n  }, null, -1 /* HOISTED */)]))) : _createCommentVNode(\"v-if\", true), $data.isNewUser ? (_openBlock(), _createElementBlock(\"span\", _hoisted_14, _cache[10] || (_cache[10] = [_createElementVNode(\"i\", {\n    \"class\": \"fas fa-seedling\"\n  }, null, -1 /* HOISTED */)]))) : _createCommentVNode(\"v-if\", true)])) : _createCommentVNode(\"v-if\", true)])]), $data.userRank ? (_openBlock(), _createElementBlock(\"div\", {\n    key: 0,\n    \"class\": _normalizeClass([\"rank-badge\", $options.getRankColorClass($data.userRank.rank)])\n  }, \" #\" + _toDisplayString($data.userRank.rank), 3 /* TEXT, CLASS */)) : (_openBlock(), _createElementBlock(\"div\", _hoisted_15, [_createElementVNode(\"span\", null, \"#\" + _toDisplayString($data.currentUserRank || '?'), 1 /* TEXT */)]))]), _createElementVNode(\"div\", _hoisted_16, [_createElementVNode(\"div\", _hoisted_17, [_createElementVNode(\"div\", _hoisted_18, _toDisplayString($data.userRank ? Number($data.userRank.carbon_reduction).toFixed(1) : $data.currentUserCarbonReduction || '加载中...'), 1 /* TEXT */), _cache[12] || (_cache[12] = _createElementVNode(\"div\", {\n    \"class\": \"stat-label\"\n  }, \"减排量 (kg CO₂)\", -1 /* HOISTED */))]), _createElementVNode(\"div\", _hoisted_19, [_createElementVNode(\"div\", _hoisted_20, [$data.userRank ? (_openBlock(), _createElementBlock(\"i\", {\n    key: 0,\n    \"class\": _normalizeClass([\"fas fa-trophy\", $options.getRankIconClass($data.userRank.rank)])\n  }, null, 2 /* CLASS */)) : (_openBlock(), _createElementBlock(\"i\", _hoisted_21))]), _createElementVNode(\"div\", _hoisted_22, _toDisplayString($data.userRank ? $options.getRankDescription($data.userRank.rank) : '活跃减排者'), 1 /* TEXT */)]), _cache[14] || (_cache[14] = _createElementVNode(\"div\", {\n    \"class\": \"stat-divider\"\n  }, null, -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_23, [_createElementVNode(\"div\", _hoisted_24, [_createElementVNode(\"span\", _hoisted_25, _toDisplayString($data.userRank ? $options.getPercentile($data.userRank.rank) : '81') + \"%\", 1 /* TEXT */)]), _cache[13] || (_cache[13] = _createElementVNode(\"div\", {\n    \"class\": \"stat-label\"\n  }, \"击败了其他用户\", -1 /* HOISTED */))])])]), _createElementVNode(\"div\", _hoisted_26, [_createElementVNode(\"div\", _hoisted_27, [_createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = function () {\n      return $options.updateLeaderboard && $options.updateLeaderboard.apply($options, arguments);\n    }),\n    \"class\": \"update-btn\",\n    disabled: $data.loading\n  }, [_createElementVNode(\"i\", {\n    \"class\": _normalizeClass([\"fas fa-sync-alt\", {\n      'fa-spin': $data.loading\n    }])\n  }, null, 2 /* CLASS */), _createTextVNode(\" \" + _toDisplayString($data.loading ? '更新中...' : '更新排名'), 1 /* TEXT */)], 8 /* PROPS */, _hoisted_28)]), _createElementVNode(\"div\", _hoisted_29, [_withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = function ($event) {\n      return $data.limit = $event;\n    }),\n    onChange: _cache[2] || (_cache[2] = function () {\n      return $options.loadLeaderboard && $options.loadLeaderboard.apply($options, arguments);\n    }),\n    \"class\": \"filter-select\"\n  }, _cache[15] || (_cache[15] = [_createElementVNode(\"option\", {\n    value: 10\n  }, \"显示10名\", -1 /* HOISTED */), _createElementVNode(\"option\", {\n    value: 20\n  }, \"显示20名\", -1 /* HOISTED */), _createElementVNode(\"option\", {\n    value: 50\n  }, \"显示50名\", -1 /* HOISTED */), _createElementVNode(\"option\", {\n    value: 100\n  }, \"显示100名\", -1 /* HOISTED */)]), 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelSelect, $data.limit]])])]), _createElementVNode(\"div\", _hoisted_30, [_createElementVNode(\"div\", _hoisted_31, [_createElementVNode(\"table\", null, [_cache[16] || (_cache[16] = _createElementVNode(\"thead\", null, [_createElementVNode(\"tr\", null, [_createElementVNode(\"th\", {\n    \"class\": \"rank-cell\"\n  }, \"排名\"), _createElementVNode(\"th\", null, \"用户\"), _createElementVNode(\"th\", null, \"减排量 (kg CO₂)\")])], -1 /* HOISTED */)), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.displayedLeaderboard, function (entry, index) {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: index,\n      \"class\": _normalizeClass({\n        'current-user': $options.isCurrentUser(entry.user_id)\n      }),\n      style: _normalizeStyle({\n        '--row-index': index\n      })\n    }, [_createElementVNode(\"td\", _hoisted_32, [_createElementVNode(\"div\", {\n      \"class\": _normalizeClass([\"rank-number\", $options.getRankClass(entry.rank)])\n    }, [entry.rank <= 3 ? (_openBlock(), _createElementBlock(\"span\", _hoisted_33, _toDisplayString(entry.rank), 1 /* TEXT */)) : (_openBlock(), _createElementBlock(_Fragment, {\n      key: 1\n    }, [_createTextVNode(_toDisplayString(entry.rank), 1 /* TEXT */)], 64 /* STABLE_FRAGMENT */))], 2 /* CLASS */)]), _createElementVNode(\"td\", null, [_createElementVNode(\"div\", _hoisted_34, [_createElementVNode(\"div\", {\n      \"class\": _normalizeClass([\"user-avatar-small\", {\n        'current-user': $options.isCurrentUser(entry.user_id)\n      }])\n    }, _toDisplayString($options.getInitials(entry.username)), 3 /* TEXT, CLASS */), _createElementVNode(\"span\", null, _toDisplayString(entry.username), 1 /* TEXT */), $options.isCurrentUser(entry.user_id) ? (_openBlock(), _createElementBlock(\"span\", _hoisted_35, \"当前用户\")) : _createCommentVNode(\"v-if\", true)])]), _createElementVNode(\"td\", null, _toDisplayString(Number(entry.carbon_reduction).toFixed(1)), 1 /* TEXT */)], 6 /* CLASS, STYLE */);\n  }), 128 /* KEYED_FRAGMENT */))])])]), $data.leaderboard.length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_36, \" 暂无排行数据 \")) : _createCommentVNode(\"v-if\", true)]), _createCommentVNode(\" 分页控件 \"), $data.leaderboard.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_37, [_createElementVNode(\"button\", {\n    onClick: _cache[3] || (_cache[3] = function ($event) {\n      return $options.changePage($data.currentPage - 1);\n    }),\n    disabled: $data.currentPage === 1,\n    \"class\": \"pagination-btn\"\n  }, _cache[17] || (_cache[17] = [_createElementVNode(\"i\", {\n    \"class\": \"fas fa-chevron-left\"\n  }, null, -1 /* HOISTED */)]), 8 /* PROPS */, _hoisted_38), _createElementVNode(\"div\", _hoisted_39, \" 第 \" + _toDisplayString($data.currentPage) + \" 页 / 共 \" + _toDisplayString($options.totalPages) + \" 页 \", 1 /* TEXT */), _createElementVNode(\"button\", {\n    onClick: _cache[4] || (_cache[4] = function ($event) {\n      return $options.changePage($data.currentPage + 1);\n    }),\n    disabled: $data.currentPage === $options.totalPages,\n    \"class\": \"pagination-btn\"\n  }, _cache[18] || (_cache[18] = [_createElementVNode(\"i\", {\n    \"class\": \"fas fa-chevron-right\"\n  }, null, -1 /* HOISTED */)]), 8 /* PROPS */, _hoisted_40)])) : _createCommentVNode(\"v-if\", true), $data.leaderboard.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_41, \" 展示第 \" + _toDisplayString(($data.currentPage - 1) * $data.pageSize + 1) + \" - \" + _toDisplayString(Math.min($data.currentPage * $data.pageSize, $data.leaderboard.length)) + \" 条， 共 \" + _toDisplayString($data.leaderboard.length) + \" 条记录 \", 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), _cache[20] || (_cache[20] = _createStaticVNode(\"<div class=\\\"leaderboard-tips\\\" data-v-7f8c9efd><h3 data-v-7f8c9efd>如何提高排名?</h3><ul data-v-7f8c9efd><li data-v-7f8c9efd><i class=\\\"fas fa-walking\\\" data-v-7f8c9efd></i> 多步行减少碳排放</li><li data-v-7f8c9efd><i class=\\\"fas fa-calculator\\\" data-v-7f8c9efd></i> 通过碳排放计算器记录您的低碳行为</li><li data-v-7f8c9efd><i class=\\\"fas fa-paw\\\" data-v-7f8c9efd></i> 喂养并升级您的虚拟宠物</li><li data-v-7f8c9efd><i class=\\\"fas fa-award\\\" data-v-7f8c9efd></i> 完成成就任务获得额外奖励</li></ul></div>\", 1))]);\n}","map":{"version":3,"names":["key","title","_createElementBlock","_hoisted_1","_createElementVNode","$data","errorMessage","_hoisted_2","_createTextVNode","_toDisplayString","_createCommentVNode","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","username","_hoisted_7","$options","getInitials","_hoisted_8","_cache","_hoisted_9","userRank","_hoisted_10","rank","_hoisted_11","carbon_reduction","_hoisted_12","_hoisted_13","isNewUser","_hoisted_14","_normalizeClass","getRankColorClass","_hoisted_15","currentUserRank","_hoisted_16","_hoisted_17","_hoisted_18","Number","toFixed","currentUserCarbonReduction","_hoisted_19","_hoisted_20","getRankIconClass","_hoisted_21","_hoisted_22","getRankDescription","_hoisted_23","_hoisted_24","_hoisted_25","getPercentile","_hoisted_26","_hoisted_27","onClick","updateLeaderboard","apply","arguments","disabled","loading","_hoisted_28","_hoisted_29","$event","limit","onChange","loadLeaderboard","value","_hoisted_30","_hoisted_31","_Fragment","_renderList","displayedLeaderboard","entry","index","isCurrentUser","user_id","style","_normalizeStyle","_hoisted_32","getRankClass","_hoisted_33","_hoisted_34","_hoisted_35","leaderboard","length","_hoisted_36","_hoisted_37","changePage","currentPage","_hoisted_38","_hoisted_39","totalPages","_hoisted_40","_hoisted_41","pageSize","Math","min","_createStaticVNode"],"sources":["D:\\EcoPaw\\carbonfootprint_本地版\\src\\components\\Leaderboard.vue"],"sourcesContent":["<template>\n  <div class=\"leaderboard-page\">\n    <h2 class=\"page-title\">碳减排排行榜</h2>\n    \n    <div v-if=\"errorMessage\" class=\"error-message\">\n      <i class=\"fas fa-exclamation-circle\"></i>\n      {{ errorMessage }}\n    </div>\n    \n    <!-- 用户自己的排名信息卡片，更美观的展示 -->\n    <div class=\"user-rank-card\">\n      <div class=\"user-rank-header\">\n        <div class=\"user-avatar-and-info\">\n          <div class=\"user-avatar\">\n            <span v-if=\"username\">{{ getInitials(username) }}</span>\n            <span v-else><i class=\"fas fa-user\"></i></span>\n          </div>\n          <div class=\"user-info\">\n            <h3>{{ username || '未能获取用户名' }}</h3>\n            <div class=\"user-status\">您当前的碳减排状态</div>\n            <div class=\"user-badges\" v-if=\"userRank\">\n              <span v-if=\"userRank.rank <= 3\" class=\"badge top-badge\" title=\"排名前三\">\n                <i class=\"fas fa-crown\"></i>\n              </span>\n              <span v-if=\"userRank.carbon_reduction >= 100\" class=\"badge century-badge\" title=\"减排量超过100kg\">\n                <i class=\"fas fa-medal\"></i>\n              </span>\n              <span v-if=\"userRank.carbon_reduction >= 50\" class=\"badge progress-badge\" title=\"减排量超过50kg\">\n                <i class=\"fas fa-award\"></i>\n              </span>\n              <span v-if=\"isNewUser\" class=\"badge newcomer-badge\" title=\"新用户\">\n                <i class=\"fas fa-seedling\"></i>\n              </span>\n            </div>\n          </div>\n        </div>\n        <div v-if=\"userRank\" class=\"rank-badge\" :class=\"getRankColorClass(userRank.rank)\">\n          #{{ userRank.rank }}\n        </div>\n        <div v-else class=\"rank-badge loading-rank\">\n          <span>#{{ currentUserRank || '?' }}</span>\n        </div>\n      </div>\n      \n      <div class=\"user-stats\">\n        <div class=\"stat-item\">\n          <div class=\"stat-value carbon-value\">\n            {{ userRank ? Number(userRank.carbon_reduction).toFixed(1) : (currentUserCarbonReduction || '加载中...') }}\n          </div>\n          <div class=\"stat-label\">减排量 (kg CO₂)</div>\n        </div>\n        \n        <div class=\"stat-item\">\n          <div class=\"stat-value\">\n            <i v-if=\"userRank\" class=\"fas fa-trophy\" :class=\"getRankIconClass(userRank.rank)\"></i>\n            <i v-else class=\"fas fa-trophy text-normal\"></i>\n          </div>\n          <div class=\"stat-label\">{{ userRank ? getRankDescription(userRank.rank) : '活跃减排者' }}</div>\n        </div>\n        \n        <div class=\"stat-divider\"></div>\n        \n        <div class=\"stat-item\">\n          <div class=\"stat-value achievement\">\n            <span class=\"percentage\">{{ userRank ? getPercentile(userRank.rank) : '81' }}%</span>\n          </div>\n          <div class=\"stat-label\">击败了其他用户</div>\n        </div>\n      </div>\n    </div>\n    \n    <div class=\"leaderboard-controls\">\n      <div class=\"update-section\">\n        <button @click=\"updateLeaderboard\" class=\"update-btn\" :disabled=\"loading\">\n          <i class=\"fas fa-sync-alt\" :class=\"{ 'fa-spin': loading }\"></i>\n          {{ loading ? '更新中...' : '更新排名' }}\n        </button>\n      </div>\n      \n      <div class=\"filter-section\">\n        <select v-model=\"limit\" @change=\"loadLeaderboard\" class=\"filter-select\">\n          <option :value=\"10\">显示10名</option>\n          <option :value=\"20\">显示20名</option>\n          <option :value=\"50\">显示50名</option>\n          <option :value=\"100\">显示100名</option>\n        </select>\n      </div>\n    </div>\n    \n    <div class=\"leaderboard-container\">\n      <div class=\"leaderboard-table\">\n        <table>\n          <thead>\n            <tr>\n              <th class=\"rank-cell\">排名</th>\n              <th>用户</th>\n              <th>减排量 (kg CO₂)</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-for=\"(entry, index) in displayedLeaderboard\" :key=\"index\" \n                :class=\"{ 'current-user': isCurrentUser(entry.user_id) }\"\n                :style=\"{ '--row-index': index }\">\n              <td class=\"rank-cell\">\n                <div class=\"rank-number\" :class=\"getRankClass(entry.rank)\">\n                  <template v-if=\"entry.rank <= 3\">\n                    <span>{{ entry.rank }}</span>\n                  </template>\n                  <template v-else>\n                    {{ entry.rank }}\n                  </template>\n                </div>\n              </td>\n              <td>\n                <div class=\"user-info-row\">\n                  <div class=\"user-avatar-small\" :class=\"{ 'current-user': isCurrentUser(entry.user_id) }\">\n                    {{ getInitials(entry.username) }}\n                  </div>\n                  <span>{{ entry.username }}</span>\n                  <span v-if=\"isCurrentUser(entry.user_id)\" class=\"current-user-tag\">当前用户</span>\n                </div>\n              </td>\n              <td>{{ Number(entry.carbon_reduction).toFixed(1) }}</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      \n      <div v-if=\"leaderboard.length === 0\" class=\"no-data\">\n        暂无排行数据\n      </div>\n    </div>\n    \n    <!-- 分页控件 -->\n    <div class=\"pagination\" v-if=\"leaderboard.length > 0\">\n      <button \n        @click=\"changePage(currentPage - 1)\" \n        :disabled=\"currentPage === 1\"\n        class=\"pagination-btn\"\n      >\n        <i class=\"fas fa-chevron-left\"></i>\n      </button>\n      \n      <div class=\"page-info\">\n        第 {{ currentPage }} 页 / 共 {{ totalPages }} 页\n      </div>\n      \n      <button \n        @click=\"changePage(currentPage + 1)\" \n        :disabled=\"currentPage === totalPages\"\n        class=\"pagination-btn\"\n      >\n        <i class=\"fas fa-chevron-right\"></i>\n      </button>\n    </div>\n    \n    <div class=\"total-entries\" v-if=\"leaderboard.length > 0\">\n      展示第 {{ (currentPage - 1) * pageSize + 1 }} - {{ Math.min(currentPage * pageSize, leaderboard.length) }} 条，\n      共 {{ leaderboard.length }} 条记录\n    </div>\n    \n    <div class=\"leaderboard-tips\">\n      <h3>如何提高排名?</h3>\n      <ul>\n        <li><i class=\"fas fa-walking\"></i> 多步行减少碳排放</li>\n        <li><i class=\"fas fa-calculator\"></i> 通过碳排放计算器记录您的低碳行为</li>\n        <li><i class=\"fas fa-paw\"></i> 喂养并升级您的虚拟宠物</li>\n        <li><i class=\"fas fa-award\"></i> 完成成就任务获得额外奖励</li>\n      </ul>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\nimport { API_URLS, axiosConfig, requestInterceptor, responseInterceptor } from '../config/api';\n\n// 创建API实例\nconst api = axios.create(axiosConfig);\n\n// 添加请求拦截器\napi.interceptors.request.use(requestInterceptor, error => Promise.reject(error));\n\n// 添加响应拦截器\napi.interceptors.response.use(\n  responseInterceptor.success, \n  responseInterceptor.error\n);\n\n// 获取API基础URL\nconst getBaseUrl = () => {\n  const host = window.location.hostname;\n  const port = '5000';\n  const protocol = window.location.protocol;\n  \n  if (host === 'localhost' || host === '127.0.0.1') {\n    return `http://localhost:${port}/api`;\n  } else {\n    return `${protocol}//${host}:${port}/api`;\n  }\n};\n\nexport default {\n  data() {\n    return {\n      leaderboard: [],\n      userRank: null,\n      username: '',\n      limit: 100,\n      currentPage: 1,\n      pageSize: 10,\n      loading: false,\n      errorMessage: '',\n      apiBaseUrl: getBaseUrl(),\n      totalUserCount: 200, // 估计的用户总数，可以从后端获取\n      isNewUser: false,\n      registrationDate: null,\n      currentUserRank: null,\n      currentUserCarbonReduction: null\n    };\n  },\n  computed: {\n    totalPages() {\n      return Math.ceil(this.leaderboard.length / this.pageSize);\n    },\n    displayedLeaderboard() {\n      const start = (this.currentPage - 1) * this.pageSize;\n      const end = start + this.pageSize;\n      return this.leaderboard.slice(start, end);\n    }\n  },\n  async created() {\n    try {\n      console.log('API基础URL:', this.apiBaseUrl);\n      \n      const token = localStorage.getItem('token');\n      if (!token) {\n        this.$router.push('/login');\n        return;\n      }\n      \n      // 获取用户信息\n      const userResponse = await axios.get(`${this.apiBaseUrl}/auth/user`, {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      \n      if (userResponse.data && userResponse.data.username) {\n        this.username = userResponse.data.username;\n        console.log('成功获取用户信息:', this.username);\n      } else {\n        console.error('未能获取到用户名:', userResponse.data);\n        this.username = localStorage.getItem('username') || '';\n      }\n\n      if (userResponse.data.created_at) {\n        this.registrationDate = new Date(userResponse.data.created_at);\n        const thirtyDaysAgo = new Date();\n        thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);\n        this.isNewUser = this.registrationDate > thirtyDaysAgo;\n      }\n      \n      // 尝试从URL参数获取排名信息\n      const urlParams = new URLSearchParams(window.location.search);\n      const rankParam = urlParams.get('rank');\n      const reductionParam = urlParams.get('reduction');\n      \n      if (rankParam) {\n        this.currentUserRank = rankParam;\n      }\n      \n      if (reductionParam) {\n        this.currentUserCarbonReduction = reductionParam;\n      }\n      \n      // 加载排行榜数据\n      await this.loadLeaderboard();\n\n      // 如果排行榜加载成功但还没有用户名，尝试从排行榜数据中获取\n      if (!this.username && this.userRank) {\n        this.username = this.userRank.username;\n      }\n    } catch (error) {\n      console.error('Error loading user data:', error);\n      // 如果API调用失败，尝试从localStorage获取用户名\n      this.username = localStorage.getItem('username') || '';\n      this.handleError(error, '加载用户数据失败');\n    }\n  },\n  methods: {\n    // 获取用户名的首字母作为头像\n    getInitials(name) {\n      if (!name) return '?';\n      \n      // 对于双字节字符（如中文），只取第一个字符\n      if (name.charCodeAt(0) > 127) {\n        return name.charAt(0);\n      }\n      \n      // 对于英文等单字节字符，取首字母\n      return name.charAt(0).toUpperCase();\n    },\n    \n    // 获取排名描述\n    getRankDescription(rank) {\n      if (rank <= 10) return '优秀减排者';\n      if (rank <= 50) return '活跃减排者';\n      if (rank <= 100) return '进步减排者';\n      return '环保新手';\n    },\n    \n    // 获取百分比\n    getPercentile(rank) {\n      // 计算击败了多少百分比的用户\n      // 例如：如果总用户数是200，当前排名是20，则击败了(200-20)/200 * 100 = 90%的用户\n      const percentile = Math.floor(((this.totalUserCount - rank) / this.totalUserCount) * 100);\n      return Math.max(0, Math.min(99, percentile));\n    },\n    \n    // 获取排名图标类\n    getRankIconClass(rank) {\n      if (rank <= 3) return 'text-gold';\n      if (rank <= 10) return 'text-silver';\n      if (rank <= 50) return 'text-bronze';\n      return 'text-normal';\n    },\n    \n    // 获取排名颜色类\n    getRankColorClass(rank) {\n      if (rank <= 3) return 'rank-top';\n      if (rank <= 10) return 'rank-excellent';\n      if (rank <= 50) return 'rank-good';\n      return 'rank-normal';\n    },\n    \n    // 处理错误的通用方法\n    handleError(error, defaultMessage) {\n      let errorMsg = defaultMessage;\n      \n      if (error.response && error.response.data && error.response.data.message) {\n        errorMsg = error.response.data.message;\n      } else if (error.message) {\n        errorMsg = `${defaultMessage}: ${error.message}`;\n      }\n      \n      this.errorMessage = errorMsg;\n      console.error(errorMsg, error);\n    },\n    \n    async loadLeaderboard() {\n      try {\n        this.loading = true;\n        this.errorMessage = '';\n        \n        const token = localStorage.getItem('token');\n        if (!token) {\n          this.$router.push('/login');\n          return;\n        }\n        \n        // 添加时间戳防止缓存\n        const timestamp = new Date().getTime();\n        console.log('正在加载排行榜数据，限制:', this.limit, '时间戳:', timestamp);\n        \n        try {\n          // 直接使用axios\n          const response = await axios.get(`${this.apiBaseUrl}/leaderboard?limit=${this.limit}&_t=${timestamp}`, {\n            headers: { \n              Authorization: `Bearer ${token}`,\n              'Content-Type': 'application/json'\n            }\n          });\n          \n          console.log('排行榜数据:', response.data);\n          \n          if (response.data && response.data.leaderboard) {\n            this.leaderboard = response.data.leaderboard;\n            this.userRank = response.data.userRank;\n            \n            // 如果用户排名信息为null或carbon_reduction为0，尝试强制更新，但不修改原始值\n            if (!this.userRank || this.userRank.carbon_reduction === 0) {\n              console.log('用户排名数据为空或减排量为0，尝试获取最新排名...');\n              await this.getUserRankOnly();\n            }\n            \n            // 确保数据排序正确\n            this.leaderboard.sort((a, b) => a.rank - b.rank);\n            \n            // 获取总用户数量\n            if (response.data.totalUserCount) {\n              this.totalUserCount = response.data.totalUserCount;\n              console.log('获取到总用户数:', this.totalUserCount);\n            }\n            \n            // 重置为第一页\n            this.currentPage = 1;\n          } else {\n            console.error('返回的数据格式不正确:', response.data);\n            this.errorMessage = '返回数据格式不正确，请稍后再试';\n            this.leaderboard = [];\n            // 数据格式不正确时尝试更新排行榜\n            console.log('自动尝试更新排行榜...');\n            await this.updateLeaderboard();\n          }\n        } catch (error) {\n          console.error('加载排行榜失败，尝试刷新排行榜:', error);\n          // 获取数据失败时，自动尝试更新排行榜\n          console.log('自动尝试更新排行榜...');\n          await this.updateLeaderboard();\n          return; // 由于updateLeaderboard会重新调用loadLeaderboard，这里直接返回\n        }\n      } catch (error) {\n        this.handleError(error, '加载排行榜失败');\n        this.leaderboard = [];\n      } finally {\n        this.loading = false;\n      }\n    },\n    \n    // 仅获取用户排名，不修改减碳总量\n    async getUserRankOnly() {\n      try {\n        const token = localStorage.getItem('token');\n        if (!token) return;\n        \n        console.log('仅获取用户排名数据...');\n        \n        // 获取最新的用户排名\n        const userRankResponse = await axios.get(`${this.apiBaseUrl}/leaderboard/user`, {\n          headers: { \n            Authorization: `Bearer ${token}`,\n            'Content-Type': 'application/json'\n          }\n        });\n        \n        if (userRankResponse.data) {\n          console.log('获取到的用户排名:', userRankResponse.data);\n          this.userRank = userRankResponse.data;\n        }\n      } catch (error) {\n        console.error('获取用户排名失败:', error);\n      }\n    },\n    \n    changePage(pageNumber) {\n      if (pageNumber >= 1 && pageNumber <= this.totalPages) {\n        this.currentPage = pageNumber;\n      }\n    },\n    \n    async updateLeaderboard() {\n      try {\n        this.loading = true;\n        this.errorMessage = '';\n        \n        const token = localStorage.getItem('token');\n        if (!token) {\n          this.$router.push('/login');\n          return;\n        }\n        \n        console.log('开始更新排行榜，将刷新用户排名信息...');\n        \n        // 直接使用axios更新排名（不会修改减碳总量）\n        const updateResponse = await axios.post(`${this.apiBaseUrl}/leaderboard/update`, {}, {\n          headers: { \n            Authorization: `Bearer ${token}`,\n            'Content-Type': 'application/json' \n          }\n        });\n        \n        console.log('排名更新响应:', updateResponse.data);\n        \n        if (updateResponse.data && updateResponse.data.rank) {\n          console.log(`用户排名已更新为第 ${updateResponse.data.rank} 名`);\n          \n          if (this.userRank) {\n            // 只更新排名，保持减碳量不变\n            this.userRank.rank = updateResponse.data.rank;\n          }\n          \n          // 重新加载排行榜数据\n        await this.loadLeaderboard();\n        } else {\n          // 如果更新失败，也重新加载最新数据\n          await this.loadLeaderboard();\n        }\n        \n        this.errorMessage = '';\n        this.showSuccessNotification('排行榜更新成功');\n      } catch (error) {\n        this.handleError(error, '更新排行榜失败');\n      } finally {\n        this.loading = false;\n      }\n    },\n    \n    // 显示成功通知\n    showSuccessNotification(message) {\n      // 如果组件有相关的通知系统，可以在这里实现\n      console.log('成功:', message);\n    },\n    \n    isCurrentUser(userId) {\n      return this.userRank && this.userRank.user_id === userId;\n    },\n    \n    getRankClass(rank) {\n      if (rank === 1) return 'rank-1';\n      if (rank === 2) return 'rank-2';\n      if (rank === 3) return 'rank-3';\n      return '';\n    }\n  }\n};\n</script>\n\n<style scoped>\n.leaderboard-page {\n  max-width: 800px;\n  margin: 0 auto;\n  padding: 20px;\n  font-family: 'Arial', sans-serif;\n  position: relative;\n}\n\n/* 添加新的背景样式 */\n.leaderboard-page::before {\n  content: '';\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-image: url('../assets/carbon_7.jpg');\n  background-size: cover;\n  background-position: center;\n  background-attachment: fixed;\n  filter: brightness(0.9) saturate(1.1);\n  z-index: -1;\n  opacity: 0.9;\n}\n\n.page-title {\n  color: #1e3d59;\n  text-align: center;\n  margin-bottom: 0.5rem;\n  font-size: 32px;\n  font-weight: 600;\n  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);\n}\n\n.main-title {\n  display: none;\n}\n\n.user-rank-card {\n  background: linear-gradient(135deg, rgba(187, 222, 251, 0.85) 0%, rgba(227, 242, 253, 0.85) 100%);\n  border-radius: 10px;\n  overflow: hidden;\n  margin-bottom: 20px;\n  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);\n  border: 1px solid rgba(255, 255, 255, 0.3);\n  animation: slideInFromTop 0.8s ease-out;\n  width: 100%;\n  margin: 0 auto 20px auto;\n  backdrop-filter: blur(5px);\n}\n\n@keyframes slideInFromTop {\n  0% {\n    opacity: 0;\n    transform: translateY(-30px);\n  }\n  100% {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n.user-rank-header {\n  padding: 15px 20px;\n  display: flex;\n  align-items: center;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.05);\n  background-color: rgba(255, 255, 255, 0.2);\n  position: relative;\n  justify-content: space-between;\n}\n\n.user-avatar-and-info {\n  display: flex;\n  align-items: center;\n}\n\n.user-info {\n  margin-left: 15px;\n}\n\n.user-avatar {\n  width: 50px;\n  height: 50px;\n  border-radius: 50%;\n  background: linear-gradient(135deg, #2196F3, #03A9F4);\n  color: white;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 1.5rem;\n  font-weight: bold;\n  box-shadow: 0 3px 10px rgba(33, 150, 243, 0.5);\n  text-transform: uppercase;\n  position: relative;\n  overflow: hidden;\n  transition: transform 0.3s ease, box-shadow 0.3s ease;\n  animation: pulse 2s infinite;\n}\n\n.user-avatar:hover {\n  transform: scale(1.05);\n  box-shadow: 0 5px 15px rgba(33, 150, 243, 0.7);\n}\n\n.user-info h3 {\n  margin: 0 0 4px 0; /* 减小下边距 */\n  font-size: 1.2rem; /* 减小字体大小 */\n  color: #333;\n  font-weight: 600;\n}\n\n.user-status {\n  color: #555;\n  font-size: 0.8rem; /* 减小字体大小 */\n  margin-bottom: 3px; /* 减小下边距 */\n}\n\n.user-badges {\n  display: flex;\n  gap: 5px;\n}\n\n.badge {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  width: 22px;\n  height: 22px;\n  border-radius: 50%;\n  font-size: 0.7rem;\n  box-shadow: 0 2px 5px rgba(0,0,0,0.1);\n  position: relative;\n  overflow: hidden;\n  margin-right: 4px;\n  transition: transform 0.3s ease, box-shadow 0.3s ease;\n}\n\n.badge:hover {\n  transform: scale(1.2);\n  box-shadow: 0 3px 8px rgba(0,0,0,0.15);\n}\n\n.top-badge {\n  background: linear-gradient(135deg, #FFD700, #FFA500);\n  color: white;\n}\n\n.century-badge {\n  background: linear-gradient(135deg, #2196F3, #03A9F4);\n  color: white;\n}\n\n.progress-badge {\n  background: linear-gradient(135deg, #4CAF50, #8BC34A);\n  color: white;\n}\n\n.newcomer-badge {\n  background: linear-gradient(135deg, #9C27B0, #E040FB);\n  color: white;\n}\n\n/* 增加排名徽章的动画效果 */\n.rank-badge {\n  transition: transform 0.3s ease, box-shadow 0.3s ease;\n}\n\n.rank-badge:hover {\n  transform: translateY(-3px);\n  box-shadow: 0 5px 15px rgba(0,0,0,0.2);\n}\n\n.loading-rank {\n  background: linear-gradient(135deg, #9E9E9E, #757575);\n}\n\n@keyframes pulse {\n  0% {\n    box-shadow: 0 0 0 0 rgba(33, 150, 243, 0.4);\n  }\n  70% {\n    box-shadow: 0 0 0 10px rgba(33, 150, 243, 0);\n  }\n  100% {\n    box-shadow: 0 0 0 0 rgba(33, 150, 243, 0);\n  }\n}\n\n.rank-badge {\n  font-size: 1.8rem; /* 增大字体大小 */\n  font-weight: bold;\n  padding: 6px 12px;\n  border-radius: 8px;\n  color: white;\n  box-shadow: 0 3px 8px rgba(0,0,0,0.15);\n  margin-left: auto; /* 推向右侧 */\n  background: linear-gradient(135deg, #1976D2, #2196F3); /* 调整颜色使其更突出 */\n  position: relative;\n  overflow: hidden;\n}\n\n.rank-badge::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: linear-gradient(135deg, rgba(255,255,255,0.3), rgba(255,255,255,0));\n  opacity: 0.6;\n}\n\n.rank-top {\n  background: linear-gradient(135deg, #F57C00, #FF9800);\n  box-shadow: 0 3px 10px rgba(255, 152, 0, 0.5);\n}\n\n.rank-excellent {\n  background: linear-gradient(135deg, #1976D2, #2196F3);\n  box-shadow: 0 3px 10px rgba(33, 150, 243, 0.5);\n}\n\n.rank-good {\n  background: linear-gradient(135deg, #388E3C, #4CAF50);\n  box-shadow: 0 3px 10px rgba(76, 175, 80, 0.5);\n}\n\n.rank-normal {\n  background: linear-gradient(135deg, #5E35B1, #7E57C2);\n  box-shadow: 0 3px 10px rgba(126, 87, 194, 0.5);\n}\n\n.user-stats {\n  display: flex;\n  padding: 10px 12px; /* 减小内边距 */\n  background-color: rgba(255,255,255,0.7);\n  justify-content: space-around;\n}\n\n.stat-item {\n  flex: 1;\n  text-align: center;\n  padding: 10px 8px; /* 减小内边距 */\n}\n\n.stat-value {\n  font-size: 1.3rem; /* 减小字体大小 */\n  font-weight: bold;\n  color: #2196F3;\n  margin-bottom: 5px; /* 减小下边距 */\n}\n\n.carbon-value {\n  font-size: 1.6rem; /* 减小字体大小 */\n  background: linear-gradient(135deg, #2196F3, #03A9F4);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  animation: floatAnimation 4s ease-in-out infinite;\n  display: inline-block;\n}\n\n.stat-label {\n  font-size: 0.75rem; /* 减小字体大小 */\n  color: #555;\n  font-weight: 500;\n}\n\n.stat-divider {\n  width: 1px;\n  background-color: rgba(0,0,0,0.1);\n  margin: 8px 4px;\n}\n\n.text-gold {\n  color: #F57C00;\n}\n\n.text-silver {\n  color: #607D8B;\n}\n\n.text-bronze {\n  color: #795548;\n}\n\n.leaderboard-controls {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px; /* 减小下边距 */\n  background-color: rgba(255, 255, 255, 0.85); /* 调整为半透明背景以配合新背景图片 */\n  padding: 12px 18px; /* 减小内边距 */\n  border-radius: 12px;\n  box-shadow: 0 4px 12px rgba(0,0,0,0.05);\n  backdrop-filter: blur(5px);\n}\n\n.error-message {\n  background-color: #ffebee;\n  color: #d32f2f;\n  padding: 12px;\n  border-radius: 8px;\n  margin-bottom: 20px;\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n.error-message i {\n  font-size: 20px;\n}\n\n.update-btn {\n  background: linear-gradient(135deg, #2196F3, #03A9F4);\n  color: white;\n  border: none;\n  border-radius: 25px;\n  padding: 10px 20px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  transition: all 0.3s;\n  font-weight: 500;\n  box-shadow: 0 3px 8px rgba(33,150,243,0.3);\n  font-size: 0.95rem;\n}\n\n.update-btn:hover:not(:disabled) {\n  background: linear-gradient(135deg, #1976D2, #0288D1);\n  transform: translateY(-2px);\n  box-shadow: 0 5px 12px rgba(33,150,243,0.4);\n}\n\n.filter-select {\n  padding: 10px 15px;\n  border-radius: 25px;\n  border: 1px solid #e0e0e0;\n  background-color: white;\n  font-size: 0.95rem;\n  box-shadow: 0 2px 5px rgba(0,0,0,0.05);\n  cursor: pointer;\n  min-width: 130px;\n  color: #424242;\n  transition: all 0.3s;\n}\n\n.filter-select:hover {\n  border-color: #2196F3;\n  box-shadow: 0 2px 8px rgba(33,150,243,0.2);\n}\n\n.leaderboard-container {\n  background-color: rgba(255, 255, 255, 0.85); /* 调整为半透明背景以配合新背景图片 */\n  border-radius: 12px;\n  overflow: hidden;\n  box-shadow: 0 4px 16px rgba(0,0,0,0.1);\n  margin-bottom: 25px;\n  min-height: 300px;\n  position: relative;\n  width: 100%;\n  backdrop-filter: blur(5px);\n}\n\n.leaderboard-table {\n  width: 100%;\n  border-spacing: 0;\n  border-collapse: separate;\n  background-color: #fff;\n  border-radius: 12px;\n  overflow: hidden;\n}\n\n.leaderboard-table table {\n  width: 100%;\n}\n\n.leaderboard-table th {\n  text-align: left;\n  padding: 18px 22px;\n  color: #424242;\n  font-weight: 600;\n  font-size: 0.9rem;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  background-color: rgba(246, 248, 250, 0.85);\n  border-bottom: 1px solid #E6EBF1;\n}\n\n.leaderboard-table td {\n  padding: 16px 22px;\n  border-bottom: 1px solid #E6EBF1;\n  color: #24292F;\n  font-size: 1rem;\n  background-color: rgba(255, 255, 255, 0.75);\n}\n\n.user-info-row {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n.user-avatar-small {\n  width: 36px;\n  height: 36px;\n  border-radius: 50%;\n  background: linear-gradient(135deg, #90CAF9, #64B5F6);\n  color: white;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 1rem;\n  font-weight: bold;\n  text-transform: uppercase;\n  flex-shrink: 0;\n  box-shadow: 0 3px 6px rgba(0,0,0,0.1);\n  transition: transform 0.2s ease;\n}\n\n.user-avatar-small:hover {\n  transform: scale(1.1);\n}\n\n.user-avatar-small.current-user {\n  background: linear-gradient(135deg, #2196F3, #03A9F4);\n  box-shadow: 0 3px 8px rgba(33,150,243,0.4);\n}\n\n.current-user-tag {\n  display: inline-block;\n  font-size: 0.7rem;\n  background: linear-gradient(135deg, #2196F3, #03A9F4);\n  color: white;\n  padding: 3px 8px;\n  border-radius: 12px;\n  margin-left: 8px;\n  vertical-align: middle;\n  font-weight: bold;\n  box-shadow: 0 2px 4px rgba(33,150,243,0.3);\n}\n\n.leaderboard-tips {\n  background-color: rgba(245, 245, 245, 0.8);\n  border-radius: 8px;\n  padding: 20px;\n  margin-top: 20px;\n  box-shadow: 0 2px 4px rgba(0,0,0,0.05);\n  backdrop-filter: blur(5px);\n}\n\n.leaderboard-tips h3 {\n  color: #1976D2;\n  margin-top: 0;\n  margin-bottom: 15px;\n  font-size: 1.2rem;\n}\n\n.leaderboard-tips ul {\n  padding-left: 10px;\n  margin: 0;\n  list-style-type: none;\n}\n\n.leaderboard-tips li {\n  margin-bottom: 10px;\n  color: #555;\n  display: flex;\n  align-items: center;\n}\n\n.leaderboard-tips li i {\n  color: #2196F3;\n  margin-right: 10px;\n  width: 20px;\n  text-align: center;\n}\n\n/* 分页样式 */\n.pagination {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin: 25px 0;\n  gap: 15px;\n}\n\n.pagination-btn {\n  background-color: rgba(255, 255, 255, 0.85);\n  border: none;\n  width: 40px;\n  height: 40px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: all 0.3s;\n  box-shadow: 0 2px 6px rgba(0,0,0,0.1);\n  color: #2196F3;\n  font-size: 1rem;\n  backdrop-filter: blur(3px);\n}\n\n.pagination-btn:hover:not(:disabled) {\n  background-color: #2196F3;\n  color: white;\n  transform: translateY(-2px);\n  box-shadow: 0 4px 10px rgba(33,150,243,0.3);\n}\n\n.page-info, .total-entries {\n  font-size: 0.9rem;\n  color: #444;\n  text-shadow: 0 1px 1px rgba(255, 255, 255, 0.5);\n  background-color: rgba(255, 255, 255, 0.5);\n  padding: 5px 10px;\n  border-radius: 20px;\n  backdrop-filter: blur(2px);\n}\n\n.total-entries {\n  text-align: center;\n  margin-bottom: 20px;\n}\n\n@media (max-width: 768px) {\n  .page-title {\n    font-size: 28px;\n  }\n  .leaderboard-controls {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 10px;\n  }\n  \n  .user-rank-header {\n    padding: 12px 15px;\n    flex-direction: row; /* 在移动端保持水平布局 */\n    text-align: left;\n    align-items: center;\n    justify-content: space-between; /* 两端对齐 */\n  }\n  \n  .user-avatar-and-info {\n    flex-direction: column; /* 在移动端将头像和信息垂直排列 */\n    align-items: flex-start;\n  }\n  \n  .user-avatar {\n    width: 45px; /* 在移动端进一步缩小 */\n    height: 45px;\n    font-size: 1.3rem;\n    margin-right: 0;\n    margin-bottom: 10px;\n  }\n  \n  .rank-badge {\n    margin-top: 0; /* 移除顶部边距 */\n    padding: 5px 10px; /* 减小内边距 */\n    font-size: 1.5rem; /* 减小字体大小 */\n    align-self: flex-start; /* 靠上对齐 */\n  }\n  \n  .user-stats {\n    flex-direction: column;\n    padding: 0;\n  }\n  \n  .stat-divider {\n    height: 1px;\n    width: 80%;\n    margin: 2px auto;\n  }\n  \n  .stat-item {\n    padding: 8px 5px;\n  }\n  \n  .carbon-value {\n    font-size: 1.6rem;\n  }\n  \n  .stat-value {\n    font-size: 1.3rem;\n    margin-bottom: 3px;\n  }\n}\n\n.achievement {\n  position: relative;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.percentage {\n  font-weight: bold;\n  color: #ff9800;\n  text-shadow: 0 1px 2px rgba(0,0,0,0.1);\n}\n\n.achievement:after {\n  content: '';\n  position: absolute;\n  width: 110%;\n  height: 5px;\n  bottom: -4px;\n  left: -5%;\n  background: linear-gradient(90deg, #ff9800, #ffeb3b);\n  border-radius: 3px;\n}\n\n.rank-cell {\n  width: 50px;\n  font-weight: 600;\n}\n\n.top-rank {\n  font-weight: 700;\n  font-size: 1.1rem;\n}\n\n.rank-1, .rank-2, .rank-3 {\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  color: white;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);\n}\n\n.rank-1 {\n  background: linear-gradient(135deg, #FFD700, #FFA500);\n}\n\n.rank-2 {\n  background: linear-gradient(135deg, #E0E0E0, #B0B0B0);\n}\n\n.rank-3 {\n  background: linear-gradient(135deg, #CD7F32, #8B4513);\n}\n\n.user-column {\n  flex: 1;\n  padding: 0 10px;\n  position: relative;\n}\n\n.update-btn i.fa-spin {\n  animation: spin 1s linear infinite;\n}\n\n@keyframes spin {\n  100% {\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes floatAnimation {\n  0% {\n    transform: translateY(0);\n  }\n  50% {\n    transform: translateY(-8px);\n  }\n  100% {\n    transform: translateY(0);\n  }\n}\n\n.leaderboard-table tr {\n  transition: background-color 0.15s ease;\n  animation: fadeIn 0.5s ease-out;\n  animation-fill-mode: both;\n  animation-delay: calc(var(--row-index, 0) * 0.1s);\n}\n\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n    transform: translateY(10px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n.leaderboard-table tr:hover {\n  background-color: #F6F8FA;\n}\n\n.leaderboard-table tr.current-user {\n  background-color: rgba(33, 150, 243, 0.05) !important;\n  animation: highlightRow 2s infinite alternate;\n  position: relative;\n  z-index: 1;\n}\n\n@keyframes highlightRow {\n  from { background-color: rgba(33, 150, 243, 0.05); }\n  to { background-color: rgba(33, 150, 243, 0.15); }\n}\n\n.leaderboard-table tr:last-child td {\n  border-bottom: none;\n}\n\n.no-data {\n  padding: 30px;\n  text-align: center;\n  color: #999;\n  font-size: 1.1rem;\n}\n\n.loading-indicator {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 40px;\n  color: #666;\n}\n\n.spinner {\n  width: 40px;\n  height: 40px;\n  border: 4px solid rgba(0, 0, 0, 0.1);\n  border-radius: 50%;\n  border-top-color: #2196F3;\n  animation: spin 1s ease-in-out infinite;\n  margin-bottom: 15px;\n}\n\n@keyframes spin {\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n.pagination-btn:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n.update-btn:disabled {\n  background: linear-gradient(135deg, #90CAF9, #64B5F6);\n  cursor: not-allowed;\n  box-shadow: none;\n}\n\n.loading-rank {\n  background-color: #9E9E9E;\n  animation: pulse 1.5s infinite;\n}\n\n.text-normal {\n  color: #9E9E9E;\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}