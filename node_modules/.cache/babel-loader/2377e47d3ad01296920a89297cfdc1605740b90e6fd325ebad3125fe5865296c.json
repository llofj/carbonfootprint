{"ast":null,"code":"import _regeneratorRuntime from \"D:/EcoPaw/carbonfootprint/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"D:/EcoPaw/carbonfootprint/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _objectSpread from \"D:/EcoPaw/carbonfootprint/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"core-js/modules/es.array.every.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.array.find-index.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.array.reduce.js\";\nimport \"core-js/modules/es.array.some.js\";\nimport \"core-js/modules/es.array.splice.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.every.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/es.iterator.reduce.js\";\nimport \"core-js/modules/es.iterator.some.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.timers.js\";\nimport { ref, computed } from 'vue';\nimport { useStore } from 'vuex';\nimport { useRouter } from 'vue-router';\nimport { getAPI } from '@/config/api';\nexport default {\n  name: 'CarbonReductionCalculator',\n  emits: ['reductionSaved'],\n  setup: function setup(props, _ref) {\n    var emit = _ref.emit;\n    var store = useStore();\n    var router = useRouter();\n    var showSuccess = ref(false);\n    var showError = ref(false);\n    var errorMessage = ref('');\n    var isSaving = ref(false);\n\n    // 减碳活动分类\n    var categories = [{\n      id: 'transport',\n      name: '交通出行',\n      icon: 'fas fa-car'\n    }, {\n      id: 'energy',\n      name: '能源使用',\n      icon: 'fas fa-bolt'\n    }, {\n      id: 'food',\n      name: '饮食选择',\n      icon: 'fas fa-utensils'\n    }, {\n      id: 'waste',\n      name: '垃圾处理',\n      icon: 'fas fa-trash'\n    }, {\n      id: 'lifestyle',\n      name: '生活方式',\n      icon: 'fas fa-heart'\n    }];\n\n    // 减碳活动列表\n    var activities = [{\n      id: 'bike',\n      category: 'transport',\n      name: '骑自行车出行',\n      description: '使用自行车代替机动车出行',\n      icon: 'fas fa-bicycle',\n      factor: 0.2,\n      unit: '公里'\n    }, {\n      id: 'public_transport',\n      category: 'transport',\n      name: '乘坐公共交通',\n      description: '使用公交、地铁等公共交通工具',\n      icon: 'fas fa-bus',\n      factor: 0.1,\n      unit: '公里'\n    }, {\n      id: 'walk',\n      category: 'transport',\n      name: '步行出行',\n      description: '选择步行代替其他交通方式',\n      icon: 'fas fa-walking',\n      factor: 0.05,\n      unit: '公里'\n    }, {\n      id: 'led_light',\n      category: 'energy',\n      name: '使用LED灯',\n      description: '使用LED节能灯泡',\n      icon: 'fas fa-lightbulb',\n      factor: 0.02,\n      unit: '小时'\n    }, {\n      id: 'solar_panel',\n      category: 'energy',\n      name: '使用太阳能',\n      description: '使用太阳能热水器或发电',\n      icon: 'fas fa-solar-panel',\n      factor: 0.5,\n      unit: '千瓦时'\n    }, {\n      id: 'vegetarian',\n      category: 'food',\n      name: '素食饮食',\n      description: '选择素食代替肉类',\n      icon: 'fas fa-leaf',\n      factor: 0.3,\n      unit: '餐'\n    }, {\n      id: 'local_food',\n      category: 'food',\n      name: '本地食材',\n      description: '选择本地生产的食材',\n      icon: 'fas fa-store',\n      factor: 0.1,\n      unit: '公斤'\n    }, {\n      id: 'recycle',\n      category: 'waste',\n      name: '垃圾分类回收',\n      description: '正确分类和回收垃圾',\n      icon: 'fas fa-recycle',\n      factor: 0.15,\n      unit: '公斤'\n    }, {\n      id: 'compost',\n      category: 'waste',\n      name: '厨余堆肥',\n      description: '将厨余垃圾进行堆肥处理',\n      icon: 'fas fa-seedling',\n      factor: 0.2,\n      unit: '公斤'\n    }, {\n      id: 'reusable_bag',\n      category: 'lifestyle',\n      name: '使用环保袋',\n      description: '使用可重复使用的购物袋',\n      icon: 'fas fa-shopping-bag',\n      factor: 0.01,\n      unit: '次'\n    }, {\n      id: 'reusable_bottle',\n      category: 'lifestyle',\n      name: '使用环保水杯',\n      description: '使用可重复使用的水杯',\n      icon: 'fas fa-glass-whiskey',\n      factor: 0.02,\n      unit: '次'\n    }];\n    var activeCategory = ref('transport');\n    var selectedActivities = ref([]);\n    var totalReduction = ref(0);\n\n    // 根据当前分类筛选活动\n    var filteredActivities = computed(function () {\n      return activities.filter(function (activity) {\n        return activity.category === activeCategory.value;\n      });\n    });\n\n    // 设置当前活动分类\n    var setActiveCategory = function setActiveCategory(categoryId) {\n      activeCategory.value = categoryId;\n    };\n\n    // 检查活动是否已选择\n    var isActivitySelected = function isActivitySelected(activityId) {\n      return selectedActivities.value.some(function (activity) {\n        return activity.id === activityId;\n      });\n    };\n\n    // 切换活动选择状态\n    var toggleActivity = function toggleActivity(activity) {\n      var index = selectedActivities.value.findIndex(function (item) {\n        return item.id === activity.id;\n      });\n      if (index === -1) {\n        selectedActivities.value.push(_objectSpread(_objectSpread({}, activity), {}, {\n          amount: 0\n        }));\n      } else {\n        selectedActivities.value.splice(index, 1);\n      }\n      calculateTotalReduction();\n    };\n\n    // 移除已选活动\n    var removeActivity = function removeActivity(activityId) {\n      selectedActivities.value = selectedActivities.value.filter(function (activity) {\n        return activity.id !== activityId;\n      });\n      calculateTotalReduction();\n    };\n\n    // 计算总减碳量\n    var calculateTotalReduction = function calculateTotalReduction() {\n      totalReduction.value = selectedActivities.value.reduce(function (total, activity) {\n        return total + activity.amount * activity.factor;\n      }, 0);\n    };\n\n    // 检查是否可以保存\n    var canSave = computed(function () {\n      return selectedActivities.value.length > 0 && selectedActivities.value.every(function (activity) {\n        return activity.amount > 0;\n      });\n    });\n\n    // 保存减碳记录\n    var saveReduction = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var response, _error$response;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              if (!(!canSave.value || isSaving.value)) {\n                _context2.next = 2;\n                break;\n              }\n              return _context2.abrupt(\"return\");\n            case 2:\n              isSaving.value = true;\n              showSuccess.value = false;\n              showError.value = false;\n              _context2.prev = 5;\n              _context2.next = 8;\n              return getAPI().post('/carbon/reduction', {\n                activities: selectedActivities.value.map(function (activity) {\n                  return {\n                    id: activity.id,\n                    name: activity.name,\n                    amount: activity.amount,\n                    reduction: activity.amount * activity.factor\n                  };\n                })\n              });\n            case 8:\n              response = _context2.sent;\n              if (response.data.success) {\n                showSuccess.value = true;\n                // 清空已选活动\n                selectedActivities.value = [];\n                totalReduction.value = 0;\n\n                // 通知父组件更新用户减碳总量\n                emit('reductionSaved', response.data.data.totalReduction);\n\n                // 使用setTimeout延迟刷新，确保用户能看到成功提示\n                setTimeout(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n                  return _regeneratorRuntime().wrap(function _callee$(_context) {\n                    while (1) switch (_context.prev = _context.next) {\n                      case 0:\n                        _context.prev = 0;\n                        _context.next = 3;\n                        return store.dispatch('updateUserCarbonReduction');\n                      case 3:\n                        _context.next = 8;\n                        break;\n                      case 5:\n                        _context.prev = 5;\n                        _context.t0 = _context[\"catch\"](0);\n                        console.error('刷新用户数据失败:', _context.t0);\n                      case 8:\n                      case \"end\":\n                        return _context.stop();\n                    }\n                  }, _callee, null, [[0, 5]]);\n                })), 1500);\n              } else {\n                showError.value = true;\n                errorMessage.value = response.data.error || '保存失败';\n              }\n              _context2.next = 17;\n              break;\n            case 12:\n              _context2.prev = 12;\n              _context2.t0 = _context2[\"catch\"](5);\n              console.error('保存减碳记录失败:', _context2.t0);\n              showError.value = true;\n              errorMessage.value = ((_error$response = _context2.t0.response) === null || _error$response === void 0 || (_error$response = _error$response.data) === null || _error$response === void 0 ? void 0 : _error$response.error) || '保存失败，请稍后重试';\n            case 17:\n              _context2.prev = 17;\n              isSaving.value = false;\n              return _context2.finish(17);\n            case 20:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, null, [[5, 12, 17, 20]]);\n      }));\n      return function saveReduction() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    return {\n      categories: categories,\n      activeCategory: activeCategory,\n      filteredActivities: filteredActivities,\n      selectedActivities: selectedActivities,\n      totalReduction: totalReduction,\n      showSuccess: showSuccess,\n      showError: showError,\n      errorMessage: errorMessage,\n      isSaving: isSaving,\n      canSave: canSave,\n      setActiveCategory: setActiveCategory,\n      isActivitySelected: isActivitySelected,\n      toggleActivity: toggleActivity,\n      removeActivity: removeActivity,\n      calculateTotalReduction: calculateTotalReduction,\n      saveReduction: saveReduction\n    };\n  }\n};","map":{"version":3,"names":["ref","computed","useStore","useRouter","getAPI","name","emits","setup","props","_ref","emit","store","router","showSuccess","showError","errorMessage","isSaving","categories","id","icon","activities","category","description","factor","unit","activeCategory","selectedActivities","totalReduction","filteredActivities","filter","activity","value","setActiveCategory","categoryId","isActivitySelected","activityId","some","toggleActivity","index","findIndex","item","push","_objectSpread","amount","splice","calculateTotalReduction","removeActivity","reduce","total","canSave","length","every","saveReduction","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee2","response","_error$response","wrap","_callee2$","_context2","prev","next","abrupt","post","map","reduction","sent","data","success","setTimeout","_callee","_callee$","_context","dispatch","t0","console","error","stop","finish","apply","arguments"],"sources":["D:\\EcoPaw\\carbonfootprint\\src\\components\\CarbonReductionCalculator.vue"],"sourcesContent":["<template>\n  <div class=\"carbon-reduction-calculator\">\n    <div class=\"calculator-container\">\n      <!-- 左侧分类列表 -->\n      <div class=\"category-list\">\n        <div\n          v-for=\"category in categories\"\n          :key=\"category.id\"\n          class=\"category-item\"\n          :class=\"{ active: activeCategory === category.id }\"\n          @click=\"setActiveCategory(category.id)\"\n        >\n          <i :class=\"category.icon\"></i>\n          <span>{{ category.name }}</span>\n        </div>\n      </div>\n\n      <!-- 中间活动列表 -->\n      <div class=\"activity-list\">\n        <div\n          v-for=\"activity in filteredActivities\"\n          :key=\"activity.id\"\n          class=\"activity-item\"\n          :class=\"{ selected: isActivitySelected(activity.id) }\"\n          @click=\"toggleActivity(activity)\"\n        >\n          <div class=\"activity-icon\">\n            <i :class=\"activity.icon\"></i>\n          </div>\n          <div class=\"activity-info\">\n            <h3>{{ activity.name }}</h3>\n            <p>{{ activity.description }}</p>\n            <div class=\"activity-factor\">\n              <span>减碳系数：</span>\n              <span class=\"factor-value\">{{ activity.factor }} kgCO₂e/{{ activity.unit }}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- 右侧计算面板 -->\n      <div class=\"calculation-panel\">\n        <div class=\"selected-activities\">\n          <h3>已选减碳活动</h3>\n          <div v-if=\"selectedActivities.length === 0\" class=\"no-activities\">\n            <i class=\"fas fa-info-circle\"></i>\n            <p>请从左侧选择减碳活动</p>\n          </div>\n          <div v-else class=\"activity-inputs\">\n            <div v-for=\"activity in selectedActivities\" :key=\"activity.id\" class=\"activity-input\">\n              <div class=\"activity-header\">\n                <span>{{ activity.name }}</span>\n                <button class=\"remove-btn\" @click=\"removeActivity(activity.id)\">\n                  <i class=\"fas fa-times\"></i>\n                </button>\n              </div>\n              <div class=\"input-group\">\n                <input\n                  type=\"number\"\n                  v-model=\"activity.amount\"\n                  :placeholder=\"'输入' + activity.unit\"\n                  min=\"0\"\n                  @input=\"calculateTotalReduction\"\n                />\n                <span class=\"unit\">{{ activity.unit }}</span>\n              </div>\n              <div class=\"reduction-amount\">\n                减碳量：{{ (activity.amount * activity.factor).toFixed(2) }} kgCO₂e\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"total-reduction\">\n          <div class=\"total-header\">\n            <h3>总减碳量</h3>\n            <span class=\"total-value\">{{ totalReduction.toFixed(2) }} kgCO₂e</span>\n          </div>\n          <div class=\"tree-equivalent\">\n            <i class=\"fas fa-tree\"></i>\n            <span>相当于种植了 {{ (totalReduction / 18).toFixed(1) }} 棵树</span>\n          </div>\n        </div>\n\n        <button\n          class=\"save-btn\"\n          :disabled=\"!canSave || isSaving\"\n          @click=\"saveReduction\"\n        >\n          <i class=\"fas fa-save\" v-if=\"!isSaving\"></i>\n          <i class=\"fas fa-spinner fa-spin\" v-else></i>\n          {{ isSaving ? '保存中...' : '保存减碳记录' }}\n        </button>\n      </div>\n    </div>\n\n    <!-- 保存成功提示 -->\n    <div v-if=\"showSuccess\" class=\"success-message success\">\n      <i class=\"fas fa-check-circle\"></i>\n      <div class=\"message-content\">\n        <div class=\"message-title\">减碳记录保存成功！</div>\n        <div class=\"message-detail\">已将{{ totalReduction.toFixed(2) }}kgCO₂e加入您的减碳总量</div>\n      </div>\n    </div>\n    \n    <!-- 保存失败提示 -->\n    <div v-if=\"showError\" class=\"success-message error\">\n      <i class=\"fas fa-exclamation-circle\"></i>\n      <div class=\"message-content\">\n        <div class=\"message-title\">保存失败</div>\n        <div class=\"message-detail\">{{ errorMessage }}</div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref, computed } from 'vue'\nimport { useStore } from 'vuex'\nimport { useRouter } from 'vue-router'\nimport { getAPI } from '@/config/api'\n\nexport default {\n  name: 'CarbonReductionCalculator',\n  emits: ['reductionSaved'],\n  setup(props, { emit }) {\n    const store = useStore()\n    const router = useRouter()\n    const showSuccess = ref(false)\n    const showError = ref(false)\n    const errorMessage = ref('')\n    const isSaving = ref(false)\n\n    // 减碳活动分类\n    const categories = [\n      { id: 'transport', name: '交通出行', icon: 'fas fa-car' },\n      { id: 'energy', name: '能源使用', icon: 'fas fa-bolt' },\n      { id: 'food', name: '饮食选择', icon: 'fas fa-utensils' },\n      { id: 'waste', name: '垃圾处理', icon: 'fas fa-trash' },\n      { id: 'lifestyle', name: '生活方式', icon: 'fas fa-heart' }\n    ]\n\n    // 减碳活动列表\n    const activities = [\n      {\n        id: 'bike',\n        category: 'transport',\n        name: '骑自行车出行',\n        description: '使用自行车代替机动车出行',\n        icon: 'fas fa-bicycle',\n        factor: 0.2,\n        unit: '公里'\n      },\n      {\n        id: 'public_transport',\n        category: 'transport',\n        name: '乘坐公共交通',\n        description: '使用公交、地铁等公共交通工具',\n        icon: 'fas fa-bus',\n        factor: 0.1,\n        unit: '公里'\n      },\n      {\n        id: 'walk',\n        category: 'transport',\n        name: '步行出行',\n        description: '选择步行代替其他交通方式',\n        icon: 'fas fa-walking',\n        factor: 0.05,\n        unit: '公里'\n      },\n      {\n        id: 'led_light',\n        category: 'energy',\n        name: '使用LED灯',\n        description: '使用LED节能灯泡',\n        icon: 'fas fa-lightbulb',\n        factor: 0.02,\n        unit: '小时'\n      },\n      {\n        id: 'solar_panel',\n        category: 'energy',\n        name: '使用太阳能',\n        description: '使用太阳能热水器或发电',\n        icon: 'fas fa-solar-panel',\n        factor: 0.5,\n        unit: '千瓦时'\n      },\n      {\n        id: 'vegetarian',\n        category: 'food',\n        name: '素食饮食',\n        description: '选择素食代替肉类',\n        icon: 'fas fa-leaf',\n        factor: 0.3,\n        unit: '餐'\n      },\n      {\n        id: 'local_food',\n        category: 'food',\n        name: '本地食材',\n        description: '选择本地生产的食材',\n        icon: 'fas fa-store',\n        factor: 0.1,\n        unit: '公斤'\n      },\n      {\n        id: 'recycle',\n        category: 'waste',\n        name: '垃圾分类回收',\n        description: '正确分类和回收垃圾',\n        icon: 'fas fa-recycle',\n        factor: 0.15,\n        unit: '公斤'\n      },\n      {\n        id: 'compost',\n        category: 'waste',\n        name: '厨余堆肥',\n        description: '将厨余垃圾进行堆肥处理',\n        icon: 'fas fa-seedling',\n        factor: 0.2,\n        unit: '公斤'\n      },\n      {\n        id: 'reusable_bag',\n        category: 'lifestyle',\n        name: '使用环保袋',\n        description: '使用可重复使用的购物袋',\n        icon: 'fas fa-shopping-bag',\n        factor: 0.01,\n        unit: '次'\n      },\n      {\n        id: 'reusable_bottle',\n        category: 'lifestyle',\n        name: '使用环保水杯',\n        description: '使用可重复使用的水杯',\n        icon: 'fas fa-glass-whiskey',\n        factor: 0.02,\n        unit: '次'\n      }\n    ]\n\n    const activeCategory = ref('transport')\n    const selectedActivities = ref([])\n    const totalReduction = ref(0)\n\n    // 根据当前分类筛选活动\n    const filteredActivities = computed(() => {\n      return activities.filter(activity => activity.category === activeCategory.value)\n    })\n\n    // 设置当前活动分类\n    const setActiveCategory = (categoryId) => {\n      activeCategory.value = categoryId\n    }\n\n    // 检查活动是否已选择\n    const isActivitySelected = (activityId) => {\n      return selectedActivities.value.some(activity => activity.id === activityId)\n    }\n\n    // 切换活动选择状态\n    const toggleActivity = (activity) => {\n      const index = selectedActivities.value.findIndex(item => item.id === activity.id)\n      if (index === -1) {\n        selectedActivities.value.push({\n          ...activity,\n          amount: 0\n        })\n      } else {\n        selectedActivities.value.splice(index, 1)\n      }\n      calculateTotalReduction()\n    }\n\n    // 移除已选活动\n    const removeActivity = (activityId) => {\n      selectedActivities.value = selectedActivities.value.filter(\n        activity => activity.id !== activityId\n      )\n      calculateTotalReduction()\n    }\n\n    // 计算总减碳量\n    const calculateTotalReduction = () => {\n      totalReduction.value = selectedActivities.value.reduce((total, activity) => {\n        return total + (activity.amount * activity.factor)\n      }, 0)\n    }\n\n    // 检查是否可以保存\n    const canSave = computed(() => {\n      return selectedActivities.value.length > 0 &&\n        selectedActivities.value.every(activity => activity.amount > 0)\n    })\n\n    // 保存减碳记录\n    const saveReduction = async () => {\n      if (!canSave.value || isSaving.value) return\n      \n      isSaving.value = true\n      showSuccess.value = false\n      showError.value = false\n\n      try {\n        const response = await getAPI().post('/carbon/reduction', {\n          activities: selectedActivities.value.map(activity => ({\n            id: activity.id,\n            name: activity.name,\n            amount: activity.amount,\n            reduction: activity.amount * activity.factor\n          }))\n        })\n\n        if (response.data.success) {\n          showSuccess.value = true\n          // 清空已选活动\n          selectedActivities.value = []\n          totalReduction.value = 0\n          \n          // 通知父组件更新用户减碳总量\n          emit('reductionSaved', response.data.data.totalReduction);\n          \n          // 使用setTimeout延迟刷新，确保用户能看到成功提示\n          setTimeout(async () => {\n            try {\n              // 刷新用户减碳总量\n              await store.dispatch('updateUserCarbonReduction');\n              \n              // 也可以直接刷新页面以确保所有组件都使用最新数据\n              // window.location.reload();\n            } catch (error) {\n              console.error('刷新用户数据失败:', error);\n            }\n          }, 1500);\n        } else {\n          showError.value = true\n          errorMessage.value = response.data.error || '保存失败'\n        }\n      } catch (error) {\n        console.error('保存减碳记录失败:', error)\n        showError.value = true\n        errorMessage.value = error.response?.data?.error || '保存失败，请稍后重试'\n      } finally {\n        isSaving.value = false\n      }\n    }\n\n    return {\n      categories,\n      activeCategory,\n      filteredActivities,\n      selectedActivities,\n      totalReduction,\n      showSuccess,\n      showError,\n      errorMessage,\n      isSaving,\n      canSave,\n      setActiveCategory,\n      isActivitySelected,\n      toggleActivity,\n      removeActivity,\n      calculateTotalReduction,\n      saveReduction\n    }\n  }\n}\n</script>\n\n<style scoped>\n.carbon-reduction-calculator {\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 0 20px;\n}\n\n.calculator-header {\n  text-align: center;\n  margin-bottom: 30px;\n  display: none; /* 隐藏重复的标题 */\n}\n\n.calculator-container {\n  display: flex;\n  gap: 20px;\n  background: #fff;\n  border-radius: 10px;\n  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);\n  padding: 20px;\n}\n\n.category-list {\n  width: 200px;\n  border-right: 1px solid #eee;\n  padding-right: 20px;\n}\n\n.category-item {\n  display: flex;\n  align-items: center;\n  padding: 12px 15px;\n  margin-bottom: 10px;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n}\n\n.category-item:hover {\n  background: #f5f5f5;\n}\n\n.category-item.active {\n  background: #e3f2fd;\n  color: #1976d2;\n}\n\n.category-item i {\n  margin-right: 10px;\n  font-size: 18px;\n}\n\n.activity-list {\n  flex: 1;\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));\n  gap: 15px;\n  padding: 0 20px;\n  max-height: 600px;\n  overflow-y: auto;\n}\n\n.activity-item {\n  background: #fff;\n  border: 1px solid #eee;\n  border-radius: 8px;\n  padding: 15px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n}\n\n.activity-item:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n}\n\n.activity-item.selected {\n  border-color: #4caf50;\n  background: #f1f8e9;\n}\n\n.activity-icon {\n  width: 40px;\n  height: 40px;\n  background: #f5f5f5;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-bottom: 10px;\n}\n\n.activity-icon i {\n  font-size: 20px;\n  color: #666;\n}\n\n.activity-info h3 {\n  font-size: 16px;\n  margin-bottom: 5px;\n  color: #2c3e50;\n}\n\n.activity-info p {\n  font-size: 14px;\n  color: #666;\n  margin-bottom: 10px;\n}\n\n.activity-factor {\n  font-size: 14px;\n  color: #666;\n}\n\n.factor-value {\n  color: #4caf50;\n  font-weight: bold;\n}\n\n.calculation-panel {\n  width: 300px;\n  border-left: 1px solid #eee;\n  padding-left: 20px;\n}\n\n.selected-activities {\n  margin-bottom: 20px;\n}\n\n.selected-activities h3 {\n  font-size: 18px;\n  margin-bottom: 15px;\n  color: #2c3e50;\n}\n\n.no-activities {\n  text-align: center;\n  padding: 20px;\n  color: #999;\n}\n\n.no-activities i {\n  font-size: 24px;\n  margin-bottom: 10px;\n}\n\n.activity-inputs {\n  max-height: 300px;\n  overflow-y: auto;\n}\n\n.activity-input {\n  background: #f5f5f5;\n  border-radius: 8px;\n  padding: 15px;\n  margin-bottom: 10px;\n}\n\n.activity-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 10px;\n}\n\n.remove-btn {\n  background: none;\n  border: none;\n  color: #999;\n  cursor: pointer;\n  padding: 5px;\n}\n\n.remove-btn:hover {\n  color: #f44336;\n}\n\n.input-group {\n  display: flex;\n  align-items: center;\n  margin-bottom: 10px;\n}\n\n.input-group input {\n  flex: 1;\n  padding: 8px 12px;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  margin-right: 10px;\n}\n\n.unit {\n  color: #666;\n  font-size: 14px;\n}\n\n.reduction-amount {\n  font-size: 14px;\n  color: #4caf50;\n}\n\n.total-reduction {\n  background: #e8f5e9;\n  border-radius: 8px;\n  padding: 20px;\n  margin-bottom: 20px;\n}\n\n.total-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 10px;\n}\n\n.total-value {\n  font-size: 24px;\n  font-weight: bold;\n  color: #4caf50;\n}\n\n.tree-equivalent {\n  display: flex;\n  align-items: center;\n  color: #666;\n}\n\n.tree-equivalent i {\n  margin-right: 10px;\n  color: #4caf50;\n}\n\n.save-btn {\n  width: 100%;\n  padding: 12px;\n  background: #4caf50;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  font-size: 16px;\n  cursor: pointer;\n  transition: background 0.3s ease;\n}\n\n.save-btn:hover {\n  background: #43a047;\n}\n\n.save-btn:disabled {\n  background: #cccccc;\n  cursor: not-allowed;\n}\n\n.save-btn i {\n  margin-right: 8px;\n}\n\n.success-message {\n  position: fixed;\n  top: 20px;\n  right: 20px;\n  color: white;\n  padding: 15px 25px;\n  border-radius: 4px;\n  display: flex;\n  align-items: flex-start;\n  animation: slideIn 0.3s ease;\n  z-index: 1000;\n  min-width: 300px;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n}\n\n.success-message.success {\n  background: #4caf50;\n}\n\n.success-message.error {\n  background: #f44336;\n}\n\n.success-message i {\n  margin-right: 15px;\n  font-size: 24px;\n}\n\n.message-content {\n  flex: 1;\n}\n\n.message-title {\n  font-weight: bold;\n  margin-bottom: 5px;\n}\n\n.message-detail {\n  font-size: 14px;\n  opacity: 0.9;\n}\n\n@keyframes slideIn {\n  from {\n    transform: translateX(100%);\n    opacity: 0;\n  }\n  to {\n    transform: translateX(0);\n    opacity: 1;\n  }\n}\n\n/* 按钮加载中状态 */\n.fa-spinner {\n  animation: spin 1s infinite linear;\n}\n\n@keyframes spin {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}