{"ast":null,"code":"import _createForOfIteratorHelper from \"D:/EcoPaw/carbonfootprint_\\u672C\\u5730\\u7248/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _regeneratorRuntime from \"D:/EcoPaw/carbonfootprint_\\u672C\\u5730\\u7248/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"D:/EcoPaw/carbonfootprint_\\u672C\\u5730\\u7248/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.find-index.js\";\nimport \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/es.array.index-of.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.array.some.js\";\nimport \"core-js/modules/es.array.sort.js\";\nimport \"core-js/modules/es.array.splice.js\";\nimport \"core-js/modules/es.date.to-iso-string.js\";\nimport \"core-js/modules/es.date.to-string.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/es.iterator.some.js\";\nimport \"core-js/modules/es.number.to-fixed.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.parse-float.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/web.timers.js\";\nimport axios from 'axios';\nexport default {\n  data: function data() {\n    return {\n      activeCategory: '',\n      emissionFactors: {},\n      unitMap: {},\n      selectedItems: [],\n      totalEmission: 0,\n      treesToPlant: 0,\n      categoryOrder: ['衣', '食', '住', '行', '用'],\n      // 定义类别排序\n      previousEmission: 0,\n      // 用于跟踪之前的排放量\n      reductionAmount: 0,\n      showAchievement: false,\n      isSaving: false,\n      showSaveSuccess: false\n    };\n  },\n  created: function created() {\n    var _this = this;\n    return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      var token, headers, response;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            // 无论用户是否登录，都尝试获取碳排放系数\n            token = localStorage.getItem('token'); // 移除任何重定向到首页或登录页的逻辑，允许未登录用户使用计算器\n            headers = {\n              'Content-Type': 'application/json'\n            };\n            if (token) {\n              headers.Authorization = \"Bearer \".concat(token);\n            }\n\n            // 获取碳排放系数\n            _context.next = 6;\n            return axios.get('http://localhost:5000/api/carbon/factors', {\n              headers: headers\n            });\n          case 6:\n            response = _context.sent;\n            _this.emissionFactors = response.data.factors;\n            _this.unitMap = response.data.units;\n\n            // 设置默认选中第一个分类\n            if (Object.keys(_this.emissionFactors).length > 0) {\n              _this.activeCategory = _this.sortedCategories[0];\n            }\n\n            // 尝试获取用户之前的排放量记录\n            if (token) {\n              _this.getPreviousEmission();\n            }\n            _context.next = 17;\n            break;\n          case 13:\n            _context.prev = 13;\n            _context.t0 = _context[\"catch\"](0);\n            console.error('Error fetching emission factors:', _context.t0);\n            // 创建一些默认的排放系数，以便即使API调用失败，用户仍然能够使用计算器\n            _this.setupDefaultFactors();\n          case 17:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee, null, [[0, 13]]);\n    }))();\n  },\n  computed: {\n    // 按照衣食住行用的顺序排序分类\n    sortedCategories: function sortedCategories() {\n      var _this2 = this;\n      var categories = Object.keys(this.emissionFactors);\n      return categories.sort(function (a, b) {\n        var indexA = _this2.categoryOrder.indexOf(a);\n        var indexB = _this2.categoryOrder.indexOf(b);\n        return indexA - indexB;\n      });\n    },\n    filteredEmissions: function filteredEmissions() {\n      return this.emissionFactors[this.activeCategory] || {};\n    },\n    // 将选中的项目按类别分组\n    groupedSelectedItems: function groupedSelectedItems() {\n      var _this3 = this;\n      var grouped = {};\n\n      // 首先确保按照衣食住行用的顺序创建空数组\n      this.categoryOrder.forEach(function (category) {\n        if (_this3.selectedItems.some(function (item) {\n          return item.category === category;\n        })) {\n          grouped[category] = [];\n        }\n      });\n\n      // 然后填充数据，保持选择顺序\n      this.selectedItems.forEach(function (item) {\n        if (!grouped[item.category]) {\n          grouped[item.category] = [];\n        }\n        grouped[item.category].push(item);\n      });\n      return grouped;\n    }\n  },\n  methods: {\n    setActiveCategory: function setActiveCategory(category) {\n      this.activeCategory = category;\n    },\n    isSelected: function isSelected(category, subCategory) {\n      return this.selectedItems.some(function (item) {\n        return item.category === category && item.subCategory === subCategory;\n      });\n    },\n    selectSubcategory: function selectSubcategory(category, subCategory) {\n      // 检查是否已经选择了该子类别\n      if (this.isSelected(category, subCategory)) {\n        return;\n      }\n\n      // 添加到选择列表\n      this.selectedItems.push({\n        category: category,\n        subCategory: subCategory,\n        value: 1,\n        factor: this.emissionFactors[category][subCategory]\n      });\n      this.calculateTotal();\n    },\n    removeItem: function removeItem(item) {\n      var index = this.selectedItems.findIndex(function (i) {\n        return i.category === item.category && i.subCategory === item.subCategory;\n      });\n      if (index !== -1) {\n        this.selectedItems.splice(index, 1);\n        this.calculateTotal();\n      }\n    },\n    clearAllItems: function clearAllItems() {\n      // 添加确认动画\n      var panel = document.querySelector('.calculation-panel');\n      if (panel) {\n        panel.classList.add('shake-effect');\n        setTimeout(function () {\n          panel.classList.remove('shake-effect');\n        }, 500);\n      }\n      this.selectedItems = [];\n      this.calculateTotal();\n    },\n    getUnit: function getUnit(subCategory) {\n      return this.unitMap[subCategory] || '单位';\n    },\n    getEmissionValue: function getEmissionValue(item) {\n      var value = (item.factor * item.value).toFixed(1);\n      return value;\n    },\n    calculateTotal: function calculateTotal() {\n      var total = 0;\n      var _iterator = _createForOfIteratorHelper(this.selectedItems),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var item = _step.value;\n          total += item.factor * item.value;\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n      this.totalEmission = total.toFixed(1);\n      this.treesToPlant = (total / 28.8 * 0.3).toFixed(1);\n\n      // 计算用户减少的碳排放量\n      this.calculateEmissionReduction();\n    },\n    // 新增方法 - 获取用户之前的排放量\n    getPreviousEmission: function getPreviousEmission() {\n      var _this4 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var token, response;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              token = localStorage.getItem('token');\n              if (token) {\n                _context2.next = 5;\n                break;\n              }\n              console.log('用户未登录，无法获取之前的排放量');\n              return _context2.abrupt(\"return\");\n            case 5:\n              _context2.next = 7;\n              return axios.get('http://localhost:5000/api/carbon/history', {\n                headers: {\n                  'Authorization': \"Bearer \".concat(token)\n                }\n              });\n            case 7:\n              response = _context2.sent;\n              // 假设API返回的数据中包含用户上次的排放总量\n              if (response.data && response.data.lastEmission) {\n                _this4.previousEmission = parseFloat(response.data.lastEmission);\n                console.log('已获取用户之前的排放量:', _this4.previousEmission);\n              }\n              _context2.next = 14;\n              break;\n            case 11:\n              _context2.prev = 11;\n              _context2.t0 = _context2[\"catch\"](0);\n              console.error('获取历史排放量失败:', _context2.t0);\n            case 14:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, null, [[0, 11]]);\n      }))();\n    },\n    // 新增方法 - 计算减少的碳排放量\n    calculateEmissionReduction: function calculateEmissionReduction() {\n      if (this.previousEmission <= 0) {\n        console.log('没有历史排放数据可比较');\n        this.reductionAmount = 0;\n        return 0;\n      }\n      var currentEmission = parseFloat(this.totalEmission);\n      if (currentEmission >= this.previousEmission) {\n        console.log('当前排放量未减少');\n        this.reductionAmount = 0;\n        return 0;\n      }\n      var reduction = this.previousEmission - currentEmission;\n      console.log(\"\\u51CF\\u5C11\\u7684\\u78B3\\u6392\\u653E\\u91CF: \".concat(reduction.toFixed(1), \" kgCO\\u2082e\"));\n\n      // 更新组件数据\n      this.reductionAmount = reduction;\n\n      // 可以在这里发送减排成就到服务器，或者展示给用户\n      this.showReductionAchievement(reduction);\n      return reduction;\n    },\n    // 新增方法 - 显示减排成就\n    showReductionAchievement: function showReductionAchievement(reduction) {\n      // 这里可以实现一个弹窗或者通知，告诉用户他们减少了多少碳排放\n      if (reduction > 0) {\n        var message = \"\\u606D\\u559C! \\u60A8\\u6BD4\\u4E0A\\u6B21\\u51CF\\u5C11\\u4E86 \".concat(reduction.toFixed(1), \" kgCO\\u2082e \\u7684\\u78B3\\u6392\\u653E\\u91CF!\");\n        console.log(message);\n\n        // 显示成就弹窗\n        this.showAchievement = true;\n      }\n    },\n    // 更新 saveEmissionData 方法\n    saveEmissionData: function saveEmissionData() {\n      var _this5 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        var token, emissionData, response;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              if (!(_this5.selectedItems.length === 0)) {\n                _context3.next = 2;\n                break;\n              }\n              return _context3.abrupt(\"return\");\n            case 2:\n              _this5.isSaving = true;\n              _context3.prev = 3;\n              token = localStorage.getItem('token');\n              if (token) {\n                _context3.next = 9;\n                break;\n              }\n              alert('请先登录再保存排放数据');\n              _this5.isSaving = false;\n              return _context3.abrupt(\"return\", false);\n            case 9:\n              // 准备要保存的数据\n              emissionData = {\n                totalEmission: parseFloat(_this5.totalEmission),\n                items: _this5.selectedItems.map(function (item) {\n                  return {\n                    category: item.category,\n                    subCategory: item.subCategory,\n                    value: item.value,\n                    emission: item.factor * item.value\n                  };\n                }),\n                date: new Date().toISOString(),\n                reduction: _this5.reductionAmount > 0 ? _this5.reductionAmount : 0\n              }; // 发送到服务器\n              _context3.next = 12;\n              return axios.post('http://localhost:5000/api/carbon/save', emissionData, {\n                headers: {\n                  'Content-Type': 'application/json',\n                  'Authorization': \"Bearer \".concat(token)\n                }\n              });\n            case 12:\n              response = _context3.sent;\n              if (!(response.data && response.data.success)) {\n                _context3.next = 19;\n                break;\n              }\n              console.log('排放数据保存成功:', response.data);\n              _this5.showSaveSuccessNotification();\n              return _context3.abrupt(\"return\", true);\n            case 19:\n              console.error('保存失败:', response.data);\n              alert('保存失败: ' + (response.data.message || '未知错误'));\n              return _context3.abrupt(\"return\", false);\n            case 22:\n              _context3.next = 29;\n              break;\n            case 24:\n              _context3.prev = 24;\n              _context3.t0 = _context3[\"catch\"](3);\n              console.error('保存排放数据出错:', _context3.t0);\n              alert('保存失败: ' + (_context3.t0.message || '未知错误'));\n              return _context3.abrupt(\"return\", false);\n            case 29:\n              _context3.prev = 29;\n              _this5.isSaving = false;\n              return _context3.finish(29);\n            case 32:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3, null, [[3, 24, 29, 32]]);\n      }))();\n    },\n    // 显示保存成功提示\n    showSaveSuccessNotification: function showSaveSuccessNotification() {\n      var _this6 = this;\n      this.showSaveSuccess = true;\n      setTimeout(function () {\n        _this6.showSaveSuccess = false;\n      }, 3000);\n    },\n    // 关闭成就弹窗\n    closeAchievement: function closeAchievement() {\n      this.showAchievement = false;\n    },\n    // 保存成就并关闭弹窗\n    saveAndCloseAchievement: function saveAndCloseAchievement() {\n      var _this7 = this;\n      this.saveEmissionData().then(function () {\n        _this7.closeAchievement();\n      });\n    },\n    getCategoryIcon: function getCategoryIcon(category, subCategory) {\n      var mainIconMap = {\n        '衣': 'fas fa-tshirt',\n        '食': 'fas fa-utensils',\n        '住': 'fas fa-home',\n        '行': 'fas fa-car',\n        '用': 'fas fa-shopping-basket'\n      };\n      if (!subCategory) {\n        return mainIconMap[category] || 'fas fa-leaf';\n      }\n      var iconMap = {\n        '衣': {\n          '涤纶织物': 'fas fa-tshirt',\n          '纯棉T恤': 'fas fa-tshirt',\n          '洗衣液': 'fas fa-soap'\n        },\n        '食': {\n          '白酒': 'fas fa-wine-bottle',\n          '啤酒': 'fas fa-beer',\n          '吸烟': 'fas fa-smoking',\n          '羊肉': 'fas fa-drumstick-bite',\n          '牛肉': 'fas fa-hamburger',\n          '猪肉': 'fas fa-bacon',\n          '炸鸡': 'fas fa-drumstick-bite',\n          '鸡蛋': 'fas fa-egg',\n          '土豆': 'fas fa-seedling',\n          '米饭': 'fas fa-seedling',\n          '花生': 'fas fa-seedling',\n          '酸奶': 'fas fa-wine-glass'\n        },\n        '住': {\n          '水': 'fas fa-water',\n          '电': 'fas fa-bolt',\n          '天然气': 'fas fa-fire'\n        },\n        '行': {\n          '轮船': 'fas fa-ship',\n          '公交车': 'fas fa-bus',\n          '私家电车': 'fas fa-car',\n          '私家油车': 'fas fa-car-side',\n          '火车': 'fas fa-train',\n          '飞机': 'fas fa-plane'\n        },\n        '用': {\n          '塑料袋': 'fas fa-shopping-bag',\n          '纸巾': 'fas fa-box-tissue',\n          '电子设备': 'fas fa-laptop'\n        }\n      };\n      return iconMap[category] && iconMap[category][subCategory] || 'fas fa-leaf';\n    },\n    // 新增方法，在API调用失败时提供基本功能\n    setupDefaultFactors: function setupDefaultFactors() {\n      // 提供一些基本的排放系数以确保用户界面仍然可用\n      this.emissionFactors = {\n        '食': {\n          '牛肉': 27.0,\n          '猪肉': 12.1,\n          '米饭': 2.7\n        },\n        '行': {\n          '私家油车': 0.23,\n          '公交车': 0.05\n        },\n        '住': {\n          '电': 0.6,\n          '水': 0.2\n        }\n      };\n      this.unitMap = {\n        '牛肉': '公斤',\n        '猪肉': '公斤',\n        '米饭': '公斤',\n        '私家油车': '公里',\n        '公交车': '公里',\n        '电': '度',\n        '水': '吨'\n      };\n\n      // 设置默认选中第一个分类\n      if (Object.keys(this.emissionFactors).length > 0) {\n        this.activeCategory = this.sortedCategories[0];\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","data","activeCategory","emissionFactors","unitMap","selectedItems","totalEmission","treesToPlant","categoryOrder","previousEmission","reductionAmount","showAchievement","isSaving","showSaveSuccess","created","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","token","headers","response","wrap","_callee$","_context","prev","next","localStorage","getItem","Authorization","concat","get","sent","factors","units","Object","keys","length","sortedCategories","getPreviousEmission","t0","console","error","setupDefaultFactors","stop","computed","_this2","categories","sort","a","b","indexA","indexOf","indexB","filteredEmissions","groupedSelectedItems","_this3","grouped","forEach","category","some","item","push","methods","setActiveCategory","isSelected","subCategory","selectSubcategory","value","factor","calculateTotal","removeItem","index","findIndex","i","splice","clearAllItems","panel","document","querySelector","classList","add","setTimeout","remove","getUnit","getEmissionValue","toFixed","total","_iterator","_createForOfIteratorHelper","_step","s","n","done","err","e","f","calculateEmissionReduction","_this4","_callee2","_callee2$","_context2","log","abrupt","lastEmission","parseFloat","currentEmission","reduction","showReductionAchievement","message","saveEmissionData","_this5","_callee3","emissionData","_callee3$","_context3","alert","items","map","emission","date","Date","toISOString","post","success","showSaveSuccessNotification","finish","_this6","closeAchievement","saveAndCloseAchievement","_this7","then","getCategoryIcon","mainIconMap","iconMap"],"sources":["D:\\EcoPaw\\carbonfootprint_本地版\\src\\components\\CarbonCalculator.vue"],"sourcesContent":["<template>\n  <div class=\"carbon-calculator\">\n    <div class=\"calculator-container\">\n      <!-- 左侧分类列表 -->\n      <div class=\"category-list\">\n        <div\n          v-for=\"category in sortedCategories\"\n          :key=\"category\"\n          class=\"category-item\"\n          :class=\"{ active: activeCategory === category }\"\n          @click=\"setActiveCategory(category)\"\n        >\n          <i :class=\"getCategoryIcon(category)\"></i>\n          <span>{{ category }}</span>\n        </div>\n      </div>\n\n      <!-- 中间排放源列表 -->\n      <div class=\"emission-list\">\n        <div class=\"emission-list-header\">\n          <h3>排放源</h3>\n          <p class=\"emission-hint\">点击添加到计算器</p>\n        </div>\n        \n        <div class=\"emission-items-wrapper\">\n          <div\n            v-for=\"(factor, subCategory) in filteredEmissions\"\n            :key=\"subCategory\"\n            class=\"emission-item-card\"\n            :class=\"{ selected: isSelected(activeCategory, subCategory) }\"\n            @click=\"selectSubcategory(activeCategory, subCategory)\"\n          >\n            <div class=\"emission-icon\">\n              <i :class=\"getCategoryIcon(activeCategory, subCategory)\"></i>\n            </div>\n            <div class=\"emission-info\">\n              <h3>{{ subCategory }}</h3>\n              <div class=\"emission-factor\">\n                <span>排放系数：</span>\n                <span class=\"factor-value\">{{ factor }} kgCO₂e/{{ getUnit(subCategory) }}</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- 右侧计算面板 -->\n      <div class=\"calculation-panel\">\n        <div class=\"selected-emissions\">\n          <div class=\"panel-header\">\n            <h3>已选排放源</h3>\n            <button \n              v-if=\"selectedItems.length > 0\" \n              class=\"clear-all-btn\" \n              @click=\"clearAllItems\"\n              title=\"清空所有选择的排放源\"\n            >\n              <i class=\"fas fa-trash-alt\"></i>\n              <span>清空</span>\n            </button>\n          </div>\n          \n          <div v-if=\"selectedItems.length === 0\" class=\"no-emissions\">\n            <i class=\"fas fa-info-circle\"></i>\n            <p>请从左侧选择排放源</p>\n          </div>\n          \n          <div v-else class=\"emission-inputs\">\n            <div class=\"input-limit-hint\">\n              <i class=\"fas fa-info-circle\"></i>\n              <span>输入数据最多支持三位数(单位:kgCO₂e)</span>\n            </div>\n            \n            <div v-for=\"(groupItems, category) in groupedSelectedItems\" :key=\"category\" class=\"category-group\">\n              <div class=\"category-group-header\">\n                <i :class=\"getCategoryIcon(category)\"></i>\n                <span>{{ category }}</span>\n              </div>\n              \n              <div v-for=\"item in groupItems\" :key=\"`${item.category}-${item.subCategory}`\" class=\"emission-input-item\">\n                <div class=\"emission-header\">\n                  <span>\n                    <i :class=\"getCategoryIcon(item.category, item.subCategory)\"></i>\n                    {{ item.subCategory }}\n                  </span>\n                  <button class=\"remove-btn\" @click=\"removeItem(item)\" title=\"移除项目\">\n                    <i class=\"fas fa-times\"></i>\n                  </button>\n                </div>\n                <div class=\"input-group\">\n                  <input\n                    type=\"number\"\n                    v-model.number=\"item.value\"\n                    min=\"0.1\"\n                    step=\"0.1\"\n                    @input=\"calculateTotal\"\n                    :placeholder=\"'输入' + getUnit(item.subCategory)\"\n                  />\n                  <span class=\"unit\">{{ getUnit(item.subCategory) }}</span>\n                </div>\n                <div class=\"emission-amount\">\n                  排放量：<span class=\"emission-value\">{{ getEmissionValue(item) }}</span> kgCO₂e\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"total-emission\">\n          <div class=\"total-header\">\n            <h3>总排放量</h3>\n            <span class=\"total-value\">{{ totalEmission }} kgCO₂e</span>\n          </div>\n          <div class=\"tree-equivalent\">\n            <i class=\"fas fa-tree tree-icon\"></i>\n            <span>需要种植 <span class=\"tree-count\">{{ treesToPlant }}</span> 棵树抵消这些碳排放</span>\n          </div>\n          \n          <!-- 新增减排成就展示 -->\n          <div v-if=\"reductionAmount > 0\" class=\"reduction-achievement\">\n            <div class=\"achievement-icon\">\n              <i class=\"fas fa-medal\"></i>\n            </div>\n            <div class=\"achievement-text\">\n              <div class=\"achievement-title\">减排成就!</div>\n              <div class=\"achievement-description\">\n                比上次减少了 <span class=\"reduction-value\">{{ reductionAmount.toFixed(1) }}</span> kgCO₂e\n              </div>\n            </div>\n          </div>\n          \n          <!-- 新增保存按钮 -->\n          <button \n            class=\"save-data-btn\" \n            @click=\"saveEmissionData\"\n            :disabled=\"selectedItems.length === 0 || isSaving\"\n          >\n            <i class=\"fas fa-save\"></i>\n            <span>{{ isSaving ? '保存中...' : '保存排放数据' }}</span>\n          </button>\n        </div>\n      </div>\n    </div>\n    \n    <!-- 成就弹窗 -->\n    <div v-if=\"showAchievement\" class=\"achievement-modal\" @click=\"closeAchievement\">\n      <div class=\"achievement-modal-content\" @click.stop>\n        <div class=\"achievement-modal-icon\">\n          <i class=\"fas fa-award\"></i>\n        </div>\n        <h3>恭喜您获得减排成就!</h3>\n        <p>您比上次减少了 <span class=\"highlight\">{{ reductionAmount.toFixed(1) }}</span> kgCO₂e 的碳排放量</p>\n        <p class=\"achievement-modal-hint\">继续保持，为地球环保贡献力量!</p>\n        <div class=\"achievement-actions\">\n          <button class=\"achievement-modal-btn\" @click=\"closeAchievement\">\n            确定\n          </button>\n          <button class=\"save-achievement-btn\" @click=\"saveAndCloseAchievement\">\n            <i class=\"fas fa-save\"></i> 保存成就\n          </button>\n        </div>\n      </div>\n    </div>\n    \n    <!-- 保存成功提示 -->\n    <div v-if=\"showSaveSuccess\" class=\"save-notification\">\n      <i class=\"fas fa-check-circle\"></i>\n      <span>排放数据保存成功!</span>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\n\nexport default {\n  data() {\n    return {\n      activeCategory: '',\n      emissionFactors: {},\n      unitMap: {},\n      selectedItems: [],\n      totalEmission: 0,\n      treesToPlant: 0,\n      categoryOrder: ['衣', '食', '住', '行', '用'], // 定义类别排序\n      previousEmission: 0, // 用于跟踪之前的排放量\n      reductionAmount: 0,\n      showAchievement: false,\n      isSaving: false,\n      showSaveSuccess: false\n    };\n  },\n  async created() {\n    try {\n      // 无论用户是否登录，都尝试获取碳排放系数\n      const token = localStorage.getItem('token');\n      \n      // 移除任何重定向到首页或登录页的逻辑，允许未登录用户使用计算器\n      \n      let headers = { 'Content-Type': 'application/json' };\n      if (token) {\n        headers.Authorization = `Bearer ${token}`;\n      }\n      \n      // 获取碳排放系数\n      const response = await axios.get('http://localhost:5000/api/carbon/factors', {\n        headers: headers\n      });\n      \n      this.emissionFactors = response.data.factors;\n      this.unitMap = response.data.units;\n      \n      // 设置默认选中第一个分类\n      if (Object.keys(this.emissionFactors).length > 0) {\n        this.activeCategory = this.sortedCategories[0];\n      }\n\n      // 尝试获取用户之前的排放量记录\n      if (token) {\n        this.getPreviousEmission();\n      }\n    } catch (error) {\n      console.error('Error fetching emission factors:', error);\n      // 创建一些默认的排放系数，以便即使API调用失败，用户仍然能够使用计算器\n      this.setupDefaultFactors();\n    }\n  },\n  computed: {\n    // 按照衣食住行用的顺序排序分类\n    sortedCategories() {\n      const categories = Object.keys(this.emissionFactors);\n      return categories.sort((a, b) => {\n        const indexA = this.categoryOrder.indexOf(a);\n        const indexB = this.categoryOrder.indexOf(b);\n        return indexA - indexB;\n      });\n    },\n    filteredEmissions() {\n      return this.emissionFactors[this.activeCategory] || {};\n    },\n    // 将选中的项目按类别分组\n    groupedSelectedItems() {\n      const grouped = {};\n      \n      // 首先确保按照衣食住行用的顺序创建空数组\n      this.categoryOrder.forEach(category => {\n        if (this.selectedItems.some(item => item.category === category)) {\n          grouped[category] = [];\n        }\n      });\n      \n      // 然后填充数据，保持选择顺序\n      this.selectedItems.forEach(item => {\n        if (!grouped[item.category]) {\n          grouped[item.category] = [];\n        }\n        grouped[item.category].push(item);\n      });\n      \n      return grouped;\n    }\n  },\n  methods: {\n    setActiveCategory(category) {\n      this.activeCategory = category;\n    },\n    isSelected(category, subCategory) {\n      return this.selectedItems.some(item => \n        item.category === category && item.subCategory === subCategory\n      );\n    },\n    selectSubcategory(category, subCategory) {\n      // 检查是否已经选择了该子类别\n      if (this.isSelected(category, subCategory)) {\n        return;\n      }\n      \n      // 添加到选择列表\n      this.selectedItems.push({\n        category,\n        subCategory,\n        value: 1,\n        factor: this.emissionFactors[category][subCategory]\n      });\n      \n      this.calculateTotal();\n    },\n    removeItem(item) {\n      const index = this.selectedItems.findIndex(\n        i => i.category === item.category && i.subCategory === item.subCategory\n      );\n      if (index !== -1) {\n        this.selectedItems.splice(index, 1);\n        this.calculateTotal();\n      }\n    },\n    clearAllItems() {\n      // 添加确认动画\n      const panel = document.querySelector('.calculation-panel');\n      if (panel) {\n        panel.classList.add('shake-effect');\n        setTimeout(() => {\n          panel.classList.remove('shake-effect');\n        }, 500);\n      }\n      \n      this.selectedItems = [];\n      this.calculateTotal();\n    },\n    getUnit(subCategory) {\n      return this.unitMap[subCategory] || '单位';\n    },\n    getEmissionValue(item) {\n      const value = (item.factor * item.value).toFixed(1);\n      return value;\n    },\n    calculateTotal() {\n      let total = 0;\n      for (const item of this.selectedItems) {\n        total += item.factor * item.value;\n      }\n      this.totalEmission = total.toFixed(1);\n      this.treesToPlant = (total / 28.8 * 0.3).toFixed(1);\n      \n      // 计算用户减少的碳排放量\n      this.calculateEmissionReduction();\n    },\n    // 新增方法 - 获取用户之前的排放量\n    async getPreviousEmission() {\n      try {\n        const token = localStorage.getItem('token');\n        if (!token) {\n          console.log('用户未登录，无法获取之前的排放量');\n          return;\n        }\n        \n        const response = await axios.get('http://localhost:5000/api/carbon/history', {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n        \n        // 假设API返回的数据中包含用户上次的排放总量\n        if (response.data && response.data.lastEmission) {\n          this.previousEmission = parseFloat(response.data.lastEmission);\n          console.log('已获取用户之前的排放量:', this.previousEmission);\n        }\n      } catch (error) {\n        console.error('获取历史排放量失败:', error);\n      }\n    },\n    \n    // 新增方法 - 计算减少的碳排放量\n    calculateEmissionReduction() {\n      if (this.previousEmission <= 0) {\n        console.log('没有历史排放数据可比较');\n        this.reductionAmount = 0;\n        return 0;\n      }\n      \n      const currentEmission = parseFloat(this.totalEmission);\n      if (currentEmission >= this.previousEmission) {\n        console.log('当前排放量未减少');\n        this.reductionAmount = 0;\n        return 0;\n      }\n      \n      const reduction = this.previousEmission - currentEmission;\n      console.log(`减少的碳排放量: ${reduction.toFixed(1)} kgCO₂e`);\n      \n      // 更新组件数据\n      this.reductionAmount = reduction;\n      \n      // 可以在这里发送减排成就到服务器，或者展示给用户\n      this.showReductionAchievement(reduction);\n      \n      return reduction;\n    },\n    \n    // 新增方法 - 显示减排成就\n    showReductionAchievement(reduction) {\n      // 这里可以实现一个弹窗或者通知，告诉用户他们减少了多少碳排放\n      if (reduction > 0) {\n        const message = `恭喜! 您比上次减少了 ${reduction.toFixed(1)} kgCO₂e 的碳排放量!`;\n        console.log(message);\n        \n        // 显示成就弹窗\n        this.showAchievement = true;\n      }\n    },\n    \n    // 更新 saveEmissionData 方法\n    async saveEmissionData() {\n      if (this.selectedItems.length === 0) {\n        return;\n      }\n      \n      this.isSaving = true;\n      \n      try {\n        const token = localStorage.getItem('token');\n        if (!token) {\n          alert('请先登录再保存排放数据');\n          this.isSaving = false;\n          return false;\n        }\n        \n        // 准备要保存的数据\n        const emissionData = {\n          totalEmission: parseFloat(this.totalEmission),\n          items: this.selectedItems.map(item => ({\n            category: item.category,\n            subCategory: item.subCategory,\n            value: item.value,\n            emission: item.factor * item.value\n          })),\n          date: new Date().toISOString(),\n          reduction: this.reductionAmount > 0 ? this.reductionAmount : 0\n        };\n        \n        // 发送到服务器\n        const response = await axios.post('http://localhost:5000/api/carbon/save', emissionData, {\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${token}`\n          }\n        });\n        \n        if (response.data && response.data.success) {\n          console.log('排放数据保存成功:', response.data);\n          this.showSaveSuccessNotification();\n          return true;\n        } else {\n          console.error('保存失败:', response.data);\n          alert('保存失败: ' + (response.data.message || '未知错误'));\n          return false;\n        }\n      } catch (error) {\n        console.error('保存排放数据出错:', error);\n        alert('保存失败: ' + (error.message || '未知错误'));\n        return false;\n      } finally {\n        this.isSaving = false;\n      }\n    },\n    \n    // 显示保存成功提示\n    showSaveSuccessNotification() {\n      this.showSaveSuccess = true;\n      setTimeout(() => {\n        this.showSaveSuccess = false;\n      }, 3000);\n    },\n    \n    // 关闭成就弹窗\n    closeAchievement() {\n      this.showAchievement = false;\n    },\n    \n    // 保存成就并关闭弹窗\n    saveAndCloseAchievement() {\n      this.saveEmissionData().then(() => {\n        this.closeAchievement();\n      });\n    },\n    getCategoryIcon(category, subCategory) {\n      const mainIconMap = {\n        '衣': 'fas fa-tshirt',\n        '食': 'fas fa-utensils',\n        '住': 'fas fa-home',\n        '行': 'fas fa-car',\n        '用': 'fas fa-shopping-basket'\n      };\n      \n      if (!subCategory) {\n        return mainIconMap[category] || 'fas fa-leaf';\n      }\n      \n      const iconMap = {\n        '衣': {\n          '涤纶织物': 'fas fa-tshirt',\n          '纯棉T恤': 'fas fa-tshirt',\n          '洗衣液': 'fas fa-soap'\n        },\n        '食': {\n          '白酒': 'fas fa-wine-bottle',\n          '啤酒': 'fas fa-beer',\n          '吸烟': 'fas fa-smoking',\n          '羊肉': 'fas fa-drumstick-bite',\n          '牛肉': 'fas fa-hamburger',\n          '猪肉': 'fas fa-bacon',\n          '炸鸡': 'fas fa-drumstick-bite',\n          '鸡蛋': 'fas fa-egg',\n          '土豆': 'fas fa-seedling',\n          '米饭': 'fas fa-seedling',\n          '花生': 'fas fa-seedling',\n          '酸奶': 'fas fa-wine-glass'\n        },\n        '住': {\n          '水': 'fas fa-water',\n          '电': 'fas fa-bolt',\n          '天然气': 'fas fa-fire'\n        },\n        '行': {\n          '轮船': 'fas fa-ship',\n          '公交车': 'fas fa-bus',\n          '私家电车': 'fas fa-car',\n          '私家油车': 'fas fa-car-side',\n          '火车': 'fas fa-train',\n          '飞机': 'fas fa-plane'\n        },\n        '用': {\n          '塑料袋': 'fas fa-shopping-bag',\n          '纸巾': 'fas fa-box-tissue',\n          '电子设备': 'fas fa-laptop'\n        }\n      };\n      \n      return (iconMap[category] && iconMap[category][subCategory]) || 'fas fa-leaf';\n    },\n    // 新增方法，在API调用失败时提供基本功能\n    setupDefaultFactors() {\n      // 提供一些基本的排放系数以确保用户界面仍然可用\n      this.emissionFactors = {\n        '食': {\n          '牛肉': 27.0,\n          '猪肉': 12.1,\n          '米饭': 2.7\n        },\n        '行': {\n          '私家油车': 0.23,\n          '公交车': 0.05\n        },\n        '住': {\n          '电': 0.6,\n          '水': 0.2\n        }\n      };\n      \n      this.unitMap = {\n        '牛肉': '公斤',\n        '猪肉': '公斤',\n        '米饭': '公斤',\n        '私家油车': '公里',\n        '公交车': '公里',\n        '电': '度',\n        '水': '吨'\n      };\n      \n      // 设置默认选中第一个分类\n      if (Object.keys(this.emissionFactors).length > 0) {\n        this.activeCategory = this.sortedCategories[0];\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\n.carbon-calculator {\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 0 20px;\n}\n\n.calculator-container {\n  display: grid;\n  grid-template-columns: 180px minmax(300px, 1fr) minmax(350px, 1fr);\n  gap: 20px;\n  background: #fff;\n  border-radius: 10px;\n  box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);\n  padding: 20px;\n  height: calc(90vh - 180px);\n  min-height: 600px;\n  overflow: hidden;\n}\n\n.category-list {\n  border-right: 1px solid #eee;\n  padding-right: 15px;\n  overflow-y: auto;\n  max-height: 100%;\n}\n\n.category-item {\n  display: flex;\n  align-items: center;\n  padding: 12px 15px;\n  margin-bottom: 10px;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  position: relative;\n  overflow: hidden;\n}\n\n.category-item:before {\n  content: '';\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  height: 2px;\n  width: 0;\n  background: linear-gradient(90deg, #e74c3c, #c0392b);\n  transition: width 0.3s ease;\n}\n\n.category-item:hover {\n  background: #f5f5f5;\n  transform: translateY(-2px);\n}\n\n.category-item:hover:before {\n  width: 100%;\n}\n\n.category-item.active {\n  background: #e3f2fd;\n  color: #1976d2;\n  box-shadow: 0 2px 8px rgba(25, 118, 210, 0.1);\n}\n\n.category-item.active:before {\n  width: 100%;\n  background: linear-gradient(90deg, #1976d2, #64b5f6);\n}\n\n.category-item i {\n  margin-right: 10px;\n  font-size: 18px;\n}\n\n.emission-list {\n  display: flex;\n  flex-direction: column;\n  padding: 0 15px;\n  overflow-y: auto;\n  max-height: 100%;\n  border-right: 1px solid #eee;\n}\n\n.emission-list-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 15px;\n  padding-bottom: 8px;\n  border-bottom: 1px solid #eee;\n  position: sticky;\n  top: 0;\n  background-color: #fff;\n  z-index: 5;\n}\n\n.emission-list-header h3 {\n  color: #2c3e50;\n  margin: 0;\n  font-size: 18px;\n}\n\n.emission-hint {\n  font-size: 12px;\n  color: #777;\n  font-style: italic;\n}\n\n.emission-items-wrapper {\n  overflow-y: auto;\n  padding-right: 5px;\n  flex: 1;\n}\n\n.emission-item-card {\n  background: #fff;\n  border: 1px solid #eee;\n  border-radius: 8px;\n  padding: 12px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  position: relative;\n  overflow: hidden;\n  display: flex;\n  align-items: center;\n  margin-bottom: 10px;\n}\n\n.emission-item-card::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: linear-gradient(135deg, rgba(231, 76, 60, 0.05), rgba(192, 57, 43, 0.02));\n  opacity: 0;\n  transition: opacity 0.3s ease;\n  z-index: 0;\n}\n\n.emission-item-card:hover {\n  transform: translateY(-3px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n}\n\n.emission-item-card:hover::before {\n  opacity: 1;\n}\n\n.emission-item-card.selected {\n  background: #fff;\n  border-color: rgba(231, 76, 60, 0.5);\n  box-shadow: 0 4px 12px rgba(231, 76, 60, 0.15);\n}\n\n.emission-item-card.selected::after {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 5px;\n  background: linear-gradient(90deg, #e74c3c, #c0392b);\n}\n\n.emission-icon {\n  width: 36px;\n  height: 36px;\n  background: linear-gradient(135deg, #e74c3c, #c0392b);\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-right: 12px;\n  color: white;\n  position: relative;\n  z-index: 1;\n  transition: all 0.3s ease;\n  flex-shrink: 0;\n}\n\n.emission-item-card:hover .emission-icon {\n  transform: scale(1.05);\n}\n\n.emission-item-card.selected .emission-icon {\n  background: linear-gradient(135deg, #e74c3c, #d35400);\n  animation: pulse 2s infinite;\n}\n\n.emission-info {\n  flex: 1;\n}\n\n.emission-info h3 {\n  font-size: 16px;\n  margin-bottom: 5px;\n  margin-top: 0;\n  color: #2c3e50;\n  position: relative;\n  z-index: 1;\n}\n\n.emission-factor {\n  font-size: 14px;\n  color: #666;\n  position: relative;\n  z-index: 1;\n}\n\n.factor-value {\n  color: #e74c3c;\n  font-weight: bold;\n}\n\n.calculation-panel {\n  display: flex;\n  flex-direction: column;\n  position: relative;\n  transition: all 0.3s ease;\n  overflow: hidden;\n}\n\n.calculation-panel.shake-effect {\n  animation: shake 0.5s ease-in-out;\n}\n\n.panel-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 15px;\n  padding-bottom: 10px;\n  border-bottom: 1px solid #eee;\n  position: sticky;\n  top: 0;\n  background-color: #fff;\n  z-index: 5;\n}\n\n.panel-header h3 {\n  font-size: 18px;\n  color: #2c3e50;\n  margin: 0;\n}\n\n.clear-all-btn {\n  background: linear-gradient(135deg, #e74c3c, #c0392b);\n  color: white;\n  border: none;\n  border-radius: 6px;\n  padding: 6px 12px;\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  font-size: 14px;\n  box-shadow: 0 2px 5px rgba(231, 76, 60, 0.2);\n}\n\n.clear-all-btn:hover {\n  background: linear-gradient(135deg, #c0392b, #a93226);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 8px rgba(231, 76, 60, 0.3);\n}\n\n.clear-all-btn i {\n  margin-right: 5px;\n  font-size: 14px;\n}\n\n.selected-emissions {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n}\n\n.input-limit-hint {\n  display: flex;\n  align-items: center;\n  padding: 8px 12px;\n  background-color: #f8f9fa;\n  border-radius: 6px;\n  margin-bottom: 15px;\n  border-left: 3px solid #ffc107;\n}\n\n.input-limit-hint i {\n  color: #ffc107;\n  margin-right: 8px;\n}\n\n.input-limit-hint span {\n  font-size: 12px;\n  color: #666;\n}\n\n.no-emissions {\n  text-align: center;\n  padding: 40px 20px;\n  color: #999;\n  background-color: #f8f9fa;\n  border-radius: 8px;\n  border: 1px dashed #ddd;\n  margin-bottom: auto;\n}\n\n.no-emissions i {\n  font-size: 32px;\n  margin-bottom: 15px;\n  color: #e74c3c;\n  animation: pulse 2s infinite;\n}\n\n.emission-inputs {\n  flex: 1;\n  overflow-y: auto;\n  padding-right: 5px;\n}\n\n.emission-inputs::-webkit-scrollbar {\n  width: 5px;\n}\n\n.emission-inputs::-webkit-scrollbar-track {\n  background: #f1f1f1;\n  border-radius: 10px;\n}\n\n.emission-inputs::-webkit-scrollbar-thumb {\n  background: #c0c0c0;\n  border-radius: 10px;\n}\n\n.emission-inputs::-webkit-scrollbar-thumb:hover {\n  background: #a0a0a0;\n}\n\n.category-group {\n  margin-bottom: 15px;\n}\n\n.category-group-header {\n  display: flex;\n  align-items: center;\n  padding: 8px 12px;\n  background: linear-gradient(90deg, rgba(231, 76, 60, 0.1), rgba(231, 76, 60, 0.05));\n  border-radius: 8px;\n  margin-bottom: 10px;\n  font-weight: 500;\n  color: #2c3e50;\n  position: sticky;\n  top: 0;\n  z-index: 4;\n}\n\n.category-group-header i {\n  margin-right: 8px;\n  color: #e74c3c;\n}\n\n.emission-input-item {\n  background: #f5f5f5;\n  border-radius: 8px;\n  padding: 15px;\n  margin-bottom: 10px;\n  animation: fadeIn 0.5s ease-out;\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);\n  transition: all 0.3s ease;\n}\n\n.emission-input-item:hover {\n  box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);\n}\n\n.emission-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 10px;\n  font-weight: 500;\n  color: #2c3e50;\n}\n\n.emission-header i {\n  margin-right: 8px;\n  color: #e74c3c;\n}\n\n.remove-btn {\n  background: none;\n  border: none;\n  color: #999;\n  cursor: pointer;\n  padding: 5px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n  width: 28px;\n  height: 28px;\n}\n\n.remove-btn:hover {\n  color: #e74c3c;\n  background-color: rgba(231, 76, 60, 0.1);\n  transform: scale(1.1);\n}\n\n.input-group {\n  display: flex;\n  align-items: center;\n  margin-bottom: 10px;\n}\n\n.input-group input {\n  flex: 1;\n  padding: 8px 12px;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  margin-right: 10px;\n  transition: all 0.3s ease;\n  font-size: 14px;\n}\n\n.input-group input:focus {\n  border-color: #e74c3c;\n  box-shadow: 0 0 0 3px rgba(231, 76, 60, 0.2);\n  outline: none;\n}\n\n.unit {\n  color: #666;\n  font-size: 14px;\n  background-color: #f0f0f0;\n  padding: 4px 8px;\n  border-radius: 4px;\n  min-width: 40px;\n  text-align: center;\n}\n\n.emission-amount {\n  font-size: 14px;\n  color: #666;\n}\n\n.emission-value {\n  color: #e74c3c;\n  font-weight: bold;\n}\n\n.total-emission {\n  background: linear-gradient(135deg, #e74c3c, #c0392b);\n  border-radius: 8px;\n  padding: 20px;\n  margin-top: auto;\n  margin-bottom: 0;\n  position: relative;\n  overflow: hidden;\n  box-shadow: 0 5px 15px rgba(231, 76, 60, 0.2);\n}\n\n.total-emission::before {\n  content: '';\n  position: absolute;\n  top: -50%;\n  left: -50%;\n  width: 200%;\n  height: 200%;\n  background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 60%);\n  opacity: 0.5;\n  animation: rotate 30s linear infinite;\n  pointer-events: none;\n}\n\n.total-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 10px;\n  position: relative;\n  z-index: 1;\n}\n\n.total-header h3 {\n  color: white;\n  margin: 0;\n  font-size: 18px;\n  font-weight: 600;\n}\n\n.total-value {\n  font-size: 24px;\n  font-weight: bold;\n  color: white;\n  text-shadow: 0 1px 2px rgba(0,0,0,0.1);\n}\n\n.tree-equivalent {\n  display: flex;\n  align-items: center;\n  color: rgba(255, 255, 255, 0.9);\n  background-color: rgba(255, 255, 255, 0.1);\n  padding: 12px;\n  border-radius: 8px;\n  margin-top: 10px;\n  position: relative;\n  z-index: 1;\n  transition: all 0.3s ease;\n  border: 1px solid rgba(255, 255, 255, 0.2);\n}\n\n.tree-equivalent:hover {\n  background-color: rgba(255, 255, 255, 0.15);\n  transform: translateY(-2px);\n}\n\n.tree-icon {\n  color: #2ecc71;\n  margin-right: 8px;\n  animation: bounce 2s infinite;\n  font-size: 18px;\n}\n\n.tree-count {\n  font-weight: bold;\n  font-size: 18px;\n  color: #ffffff;\n  text-shadow: 0 1px 2px rgba(0,0,0,0.1);\n  margin: 0 5px;\n}\n\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n    transform: translateY(10px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n@keyframes pulse {\n  0% {\n    transform: scale(1);\n    opacity: 0.8;\n  }\n  50% {\n    transform: scale(1.1);\n    opacity: 1;\n  }\n  100% {\n    transform: scale(1);\n    opacity: 0.8;\n  }\n}\n\n@keyframes rotate {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes bounce {\n  0%, 100% {\n    transform: translateY(0);\n  }\n  50% {\n    transform: translateY(-5px);\n  }\n}\n\n@keyframes shake {\n  0% { transform: translateX(0); }\n  20% { transform: translateX(-8px); }\n  40% { transform: translateX(8px); }\n  60% { transform: translateX(-5px); }\n  80% { transform: translateX(5px); }\n  100% { transform: translateX(0); }\n}\n\n@media (max-width: 1200px) {\n  .calculator-container {\n    grid-template-columns: 180px 1fr 350px;\n  }\n}\n\n@media (max-width: 992px) {\n  .calculator-container {\n    grid-template-columns: 150px 1fr 280px;\n  }\n}\n\n@media (max-width: 768px) {\n  .calculator-container {\n    grid-template-columns: 1fr;\n    height: auto;\n    min-height: auto;\n  }\n  \n  .category-list {\n    border-right: none;\n    border-bottom: 1px solid #eee;\n    padding-right: 0;\n    padding-bottom: 15px;\n    margin-bottom: 15px;\n    display: flex;\n    flex-wrap: wrap;\n    gap: 10px;\n    overflow-x: auto;\n    max-height: 100px;\n  }\n  \n  .category-item {\n    margin-bottom: 0;\n    flex-shrink: 0;\n  }\n  \n  .emission-list {\n    border-right: none;\n    border-bottom: 1px solid #eee;\n    padding-bottom: 15px;\n    margin-bottom: 15px;\n    max-height: 300px;\n  }\n\n  .calculation-panel {\n    max-height: 500px;\n    overflow-y: auto;\n  }\n}\n\n.reduction-achievement {\n  display: flex;\n  align-items: center;\n  padding: 12px;\n  background-color: rgba(46, 204, 113, 0.1);\n  border-radius: 8px;\n  margin-top: 10px;\n  border: 1px solid rgba(46, 204, 113, 0.2);\n  animation: fadeIn 0.5s ease-out;\n}\n\n.achievement-icon {\n  background: linear-gradient(135deg, #2ecc71, #27ae60);\n  border-radius: 50%;\n  width: 36px;\n  height: 36px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-right: 12px;\n  box-shadow: 0 2px 5px rgba(46, 204, 113, 0.3);\n}\n\n.achievement-icon i {\n  color: white;\n  font-size: 18px;\n}\n\n.achievement-text {\n  flex: 1;\n}\n\n.achievement-title {\n  font-size: 16px;\n  font-weight: bold;\n  color: #27ae60;\n  margin-bottom: 5px;\n}\n\n.achievement-description {\n  font-size: 14px;\n  color: #555;\n}\n\n.reduction-value {\n  color: #e74c3c;\n  font-weight: bold;\n}\n\n.save-data-btn {\n  background: linear-gradient(135deg, #3498db, #2980b9);\n  color: white;\n  border: none;\n  border-radius: 8px;\n  padding: 12px;\n  margin-top: 15px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  font-size: 16px;\n  width: 100%;\n  font-weight: 500;\n  box-shadow: 0 3px 8px rgba(52, 152, 219, 0.3);\n}\n\n.save-data-btn:hover {\n  background: linear-gradient(135deg, #2980b9, #2471a3);\n  transform: translateY(-2px);\n  box-shadow: 0 5px 12px rgba(52, 152, 219, 0.4);\n}\n\n.save-data-btn i {\n  margin-right: 10px;\n  font-size: 18px;\n}\n\n.save-data-btn:disabled {\n  background: #95a5a6;\n  cursor: not-allowed;\n  transform: none;\n  box-shadow: none;\n  opacity: 0.7;\n}\n\n.achievement-modal {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.5);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.achievement-modal-content {\n  background-color: white;\n  padding: 30px;\n  border-radius: 12px;\n  max-width: 450px;\n  width: 100%;\n  text-align: center;\n  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);\n  animation: fadeIn 0.3s ease;\n}\n\n.achievement-modal-icon {\n  background: linear-gradient(135deg, #2ecc71, #27ae60);\n  border-radius: 50%;\n  width: 70px;\n  height: 70px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin: 0 auto 20px;\n  box-shadow: 0 5px 15px rgba(46, 204, 113, 0.3);\n}\n\n.achievement-modal-icon i {\n  color: white;\n  font-size: 35px;\n}\n\n.achievement-modal h3 {\n  color: #2c3e50;\n  margin-bottom: 15px;\n  font-size: 24px;\n}\n\n.highlight {\n  color: #e74c3c;\n  font-weight: bold;\n  font-size: 1.2em;\n}\n\n.achievement-actions {\n  display: flex;\n  margin-top: 25px;\n  justify-content: center;\n  gap: 15px;\n}\n\n.achievement-modal-btn {\n  background-color: #ecf0f1;\n  color: #2c3e50;\n  border: none;\n  border-radius: 6px;\n  padding: 12px 20px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  font-weight: 500;\n}\n\n.achievement-modal-btn:hover {\n  background-color: #dde4e6;\n}\n\n.save-achievement-btn {\n  background: linear-gradient(135deg, #3498db, #2980b9);\n  color: white;\n  border: none;\n  border-radius: 6px;\n  padding: 12px 20px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  font-weight: 500;\n}\n\n.save-achievement-btn:hover {\n  background: linear-gradient(135deg, #2980b9, #2471a3);\n  transform: translateY(-2px);\n}\n\n.save-notification {\n  position: fixed;\n  bottom: 30px;\n  right: 30px;\n  background: #2ecc71;\n  color: white;\n  padding: 15px 25px;\n  border-radius: 8px;\n  display: flex;\n  align-items: center;\n  box-shadow: 0 5px 15px rgba(46, 204, 113, 0.3);\n  animation: slideIn 0.3s ease-out;\n  z-index: 1000;\n}\n\n.save-notification i {\n  margin-right: 10px;\n  font-size: 20px;\n}\n\n@keyframes slideIn {\n  from {\n    transform: translateX(100px);\n    opacity: 0;\n  }\n  to {\n    transform: translateX(0);\n    opacity: 1;\n  }\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}