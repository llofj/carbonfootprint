{"version":3,"file":"js/947.67ed2593.js","mappings":"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","sources":["webpack://ecopaw/./node_modules/core-js/modules/es.number.to-fixed.js","webpack://ecopaw/./src/views/CarbonReductionPage.vue","webpack://ecopaw/./src/components/CarbonReductionCalculator.vue","webpack://ecopaw/./src/components/CarbonReductionCalculator.vue?aa80","webpack://ecopaw/./src/views/CarbonReductionPage.vue?7c76"],"sourcesContent":["'use strict';\r\nvar $ = require('../internals/export');\r\nvar uncurryThis = require('../internals/function-uncurry-this');\r\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\r\nvar thisNumberValue = require('../internals/this-number-value');\r\nvar $repeat = require('../internals/string-repeat');\r\nvar fails = require('../internals/fails');\r\n\r\nvar $RangeError = RangeError;\r\nvar $String = String;\r\nvar floor = Math.floor;\r\nvar repeat = uncurryThis($repeat);\r\nvar stringSlice = uncurryThis(''.slice);\r\nvar nativeToFixed = uncurryThis(1.0.toFixed);\r\n\r\nvar pow = function (x, n, acc) {\r\n  return n === 0 ? acc : n % 2 === 1 ? pow(x, n - 1, acc * x) : pow(x * x, n / 2, acc);\r\n};\r\n\r\nvar log = function (x) {\r\n  var n = 0;\r\n  var x2 = x;\r\n  while (x2 >= 4096) {\r\n    n += 12;\r\n    x2 /= 4096;\r\n  }\r\n  while (x2 >= 2) {\r\n    n += 1;\r\n    x2 /= 2;\r\n  } return n;\r\n};\r\n\r\nvar multiply = function (data, n, c) {\r\n  var index = -1;\r\n  var c2 = c;\r\n  while (++index < 6) {\r\n    c2 += n * data[index];\r\n    data[index] = c2 % 1e7;\r\n    c2 = floor(c2 / 1e7);\r\n  }\r\n};\r\n\r\nvar divide = function (data, n) {\r\n  var index = 6;\r\n  var c = 0;\r\n  while (--index >= 0) {\r\n    c += data[index];\r\n    data[index] = floor(c / n);\r\n    c = (c % n) * 1e7;\r\n  }\r\n};\r\n\r\nvar dataToString = function (data) {\r\n  var index = 6;\r\n  var s = '';\r\n  while (--index >= 0) {\r\n    if (s !== '' || index === 0 || data[index] !== 0) {\r\n      var t = $String(data[index]);\r\n      s = s === '' ? t : s + repeat('0', 7 - t.length) + t;\r\n    }\r\n  } return s;\r\n};\r\n\r\nvar FORCED = fails(function () {\r\n  return nativeToFixed(0.00008, 3) !== '0.000' ||\r\n    nativeToFixed(0.9, 0) !== '1' ||\r\n    nativeToFixed(1.255, 2) !== '1.25' ||\r\n    nativeToFixed(1000000000000000128.0, 0) !== '1000000000000000128';\r\n}) || !fails(function () {\r\n  // V8 ~ Android 4.3-\r\n  nativeToFixed({});\r\n});\r\n\r\n// `Number.prototype.toFixed` method\r\n// https://tc39.es/ecma262/#sec-number.prototype.tofixed\r\n$({ target: 'Number', proto: true, forced: FORCED }, {\r\n  toFixed: function toFixed(fractionDigits) {\r\n    var number = thisNumberValue(this);\r\n    var fractDigits = toIntegerOrInfinity(fractionDigits);\r\n    var data = [0, 0, 0, 0, 0, 0];\r\n    var sign = '';\r\n    var result = '0';\r\n    var e, z, j, k;\r\n\r\n    // TODO: ES2018 increased the maximum number of fraction digits to 100, need to improve the implementation\r\n    if (fractDigits < 0 || fractDigits > 20) throw new $RangeError('Incorrect fraction digits');\r\n    // eslint-disable-next-line no-self-compare -- NaN check\r\n    if (number !== number) return 'NaN';\r\n    if (number <= -1e21 || number >= 1e21) return $String(number);\r\n    if (number < 0) {\r\n      sign = '-';\r\n      number = -number;\r\n    }\r\n    if (number > 1e-21) {\r\n      e = log(number * pow(2, 69, 1)) - 69;\r\n      z = e < 0 ? number * pow(2, -e, 1) : number / pow(2, e, 1);\r\n      z *= 0x10000000000000;\r\n      e = 52 - e;\r\n      if (e > 0) {\r\n        multiply(data, 0, z);\r\n        j = fractDigits;\r\n        while (j >= 7) {\r\n          multiply(data, 1e7, 0);\r\n          j -= 7;\r\n        }\r\n        multiply(data, pow(10, j, 1), 0);\r\n        j = e - 1;\r\n        while (j >= 23) {\r\n          divide(data, 1 << 23);\r\n          j -= 23;\r\n        }\r\n        divide(data, 1 << j);\r\n        multiply(data, 1, 1);\r\n        divide(data, 2);\r\n        result = dataToString(data);\r\n      } else {\r\n        multiply(data, 0, z);\r\n        multiply(data, 1 << -e, 0);\r\n        result = dataToString(data) + repeat('0', fractDigits);\r\n      }\r\n    }\r\n    if (fractDigits > 0) {\r\n      k = result.length;\r\n      result = sign + (k <= fractDigits\r\n        ? '0.' + repeat('0', fractDigits - k) + result\r\n        : stringSlice(result, 0, k - fractDigits) + '.' + stringSlice(result, k - fractDigits));\r\n    } else {\r\n      result = sign + result;\r\n    } return result;\r\n  }\r\n});\r\n","<template>\n  <div class=\"carbon-reduction-page\">\n    <div class=\"calculator-container\">\n      <div class=\"nav-controls\">\n      <div class=\"back-to-home\">\n        <button @click=\"goHome\" class=\"back-btn\">\n            <i class=\"fas fa-home\"></i>\n            <span>返回主页</span>\n        </button>\n      </div>\n        <div class=\"switch-calculator\">\n          <button class=\"switch-btn\" @click=\"switchToEmissionCalculator\">\n            <i class=\"fas fa-exchange-alt\"></i>\n            切换到碳排放计算器\n          </button>\n        </div>\n      </div>\n      <div class=\"page-content\">\n        <h1 class=\"page-title\">减碳计算器</h1>\n        <p class=\"description\">记录您的减碳行为，为环保贡献力量</p>\n        \n        <!-- 用户信息横向长条卡片 -->\n        <div class=\"user-info-banner\" v-if=\"isLoggedIn\" ref=\"userInfoCard\">\n          <div class=\"banner-glow\"></div>\n          <div class=\"banner-content\">\n            <div class=\"user-section\">\n              <div class=\"user-avatar\">\n                <i class=\"fas fa-user-circle pulse\"></i>\n                <div class=\"avatar-ring\"></div>\n              </div>\n              <div class=\"user-name\">{{ username }}</div>\n            </div>\n            \n            <div class=\"metrics-section\">\n              <div class=\"metric-item\">\n                <div class=\"metric-icon\">\n                  <i class=\"fas fa-leaf\" :class=\"{'leaf-animation': !isRefreshing, 'refresh-spin': isRefreshing}\"></i>\n                </div>\n                <div class=\"metric-data\">\n                  <div class=\"metric-value count-up\">{{ userCarbonReduction.toFixed(1) }}</div>\n                  <div class=\"metric-label\">kgCO₂e 减碳量</div>\n                </div>\n              </div>\n              \n              <div class=\"metric-divider\"></div>\n              \n              <div class=\"metric-item\">\n                <div class=\"metric-icon\">\n                  <i class=\"fas fa-tree\" :class=\"{'tree-animation': !isRefreshing, 'refresh-spin': isRefreshing}\"></i>\n                </div>\n                <div class=\"metric-data\">\n                  <div class=\"metric-value count-up\">{{ treeEquivalent }}</div>\n                  <div class=\"metric-label\">棵树等效</div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        \n        <CarbonReductionCalculator @reduction-saved=\"onReductionSaved\" />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport CarbonReductionCalculator from '@/components/CarbonReductionCalculator.vue'\nimport { useRouter } from 'vue-router'\n\nexport default {\n  name: 'CarbonReductionPage',\n  components: {\n    CarbonReductionCalculator\n  },\n  data() {\n    return {\n      isLoggedIn: false,\n      username: '',\n      userCarbonReduction: 0,\n      isRefreshing: false\n    }\n  },\n  computed: {\n    treeEquivalent() {\n      // 每棵树平均每年吸收约21kg CO2\n      return Math.max(1, Math.round(this.userCarbonReduction / 21));\n    }\n  },\n  created() {\n    // 检查用户是否登录\n    const token = localStorage.getItem('token');\n    if (token) {\n      this.isLoggedIn = true;\n      this.username = localStorage.getItem('username') || '环保达人';\n      this.loadUserCarbonReduction();\n    }\n  },\n  mounted() {\n    // 添加动画触发器\n    setTimeout(() => {\n      this.animationTriggered = true;\n      this.animateCountUp();\n    }, 500);\n  },\n  methods: {\n    // 接收子组件保存成功的事件\n    onReductionSaved(newTotalReduction) {\n      console.log('收到子组件保存成功事件，新的总减碳量:', newTotalReduction);\n      \n      // 显示刷新动画\n      this.isRefreshing = true;\n      \n      // 直接更新当前显示的减碳总量\n      if (typeof newTotalReduction === 'number' && !isNaN(newTotalReduction)) {\n        const oldValue = this.userCarbonReduction;\n        this.userCarbonReduction = newTotalReduction;\n        \n        // 增加卡片高亮动画\n        if (this.$refs.userInfoCard) {\n          try {\n            this.$refs.userInfoCard.classList.add('highlight-update');\n            setTimeout(() => {\n              // 再次检查元素是否存在\n              if (this.$refs.userInfoCard) {\n                this.$refs.userInfoCard.classList.remove('highlight-update');\n              }\n            }, 2000);\n          } catch (error) {\n            console.error('无法添加/移除高亮动画类:', error);\n          }\n        }\n      }\n      \n      // 延迟刷新数据，确保后端数据已更新\n      setTimeout(() => {\n        this.loadUserCarbonReduction(true);\n      }, 1000);\n    },\n    // 数字增长动画\n    animateCountUp() {\n      const countElements = document.querySelectorAll('.count-up');\n      countElements.forEach(el => {\n        const target = parseFloat(el.textContent);\n        let current = 0;\n        const increment = target / 30; // 分30步完成\n        const timer = setInterval(() => {\n          current += increment;\n          if (current >= target) {\n            clearInterval(timer);\n            current = target;\n          }\n          el.textContent = current.toFixed(1);\n        }, 30);\n      });\n    },\n    async loadUserCarbonReduction(isRefresh = false) {\n      try {\n        const token = localStorage.getItem('token');\n        if (!token) return;\n        \n        // 添加时间戳参数避免缓存\n        const timestamp = new Date().getTime();\n        \n        // 首先尝试从carbon-reduction接口获取最新数据\n        const response = await fetch(`http://localhost:5000/api/achievement/carbon-reduction?_t=${timestamp}`, {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          },\n          cache: 'no-store' // 强制不使用缓存\n        });\n        \n        if (response.ok) {\n          const data = await response.json();\n          if (data && typeof data.carbon_reduction !== 'undefined') {\n            // 确保转换为数字类型\n            const newValue = parseFloat(data.carbon_reduction) || 0;\n            console.log('获取到的减碳总量:', newValue);\n            \n            // 如果是刷新数据且值有变化，使用动画过渡\n            if (isRefresh && this.userCarbonReduction !== newValue) {\n              const oldValue = this.userCarbonReduction;\n              this.userCarbonReduction = newValue;\n              \n              // 增加卡片高亮动画\n              if (this.$refs.userInfoCard) {\n                try {\n                  this.$refs.userInfoCard.classList.add('highlight-update');\n                  setTimeout(() => {\n                    // 再次检查元素是否存在\n                    if (this.$refs.userInfoCard) {\n                      this.$refs.userInfoCard.classList.remove('highlight-update');\n                    }\n                  }, 2000);\n                } catch (error) {\n                  console.error('无法添加/移除高亮动画类:', error);\n                }\n              }\n              \n              // 重新触发数字动画\n              this.animateCountUp();\n            } else if (!isRefresh) {\n              // 首次加载直接设置\n              this.userCarbonReduction = newValue;\n            }\n          }\n        } else {\n          console.error('获取减碳数据失败:', response.status, response.statusText);\n          // 只在首次加载时提示错误，刷新时不提示\n          if (!isRefresh) {\n            // 这里可以添加错误提示UI\n          }\n        }\n      } catch (error) {\n        console.error('获取用户减碳数据失败:', error);\n        if (!isRefresh) {\n          this.userCarbonReduction = 0; // 只在首次加载错误时重置为0\n        }\n      } finally {\n        // 无论结果如何，都结束刷新状态\n        this.isRefreshing = false;\n      }\n    },\n    switchToEmissionCalculator() {\n      this.$router.push('/calculator')\n    },\n    goHome() {\n      this.$router.push('/')\n    }\n  }\n}\n</script>\n\n<style scoped>\n.carbon-reduction-page {\n  min-height: 100vh;\n  background-image: url('../assets/carbon_4.jpg');\n  background-size: cover;\n  background-position: center;\n  background-attachment: fixed;\n  padding-top: 20px;\n  position: relative;\n}\n\n.carbon-reduction-page::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(255, 255, 255, 0.75);\n  z-index: 1;\n}\n\n.calculator-container {\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 1rem;\n  position: relative;\n  z-index: 2;\n}\n\n.page-content {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-top: 30px;\n}\n\n.page-title {\n  color: #1e3d59;\n  text-align: center;\n  margin-bottom: 0.5rem;\n  font-size: 32px;\n  font-weight: 600;\n  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);\n}\n\n.description {\n  text-align: center;\n  color: #444;\n  margin-bottom: 1.5rem;\n  font-size: 16px;\n  max-width: 600px;\n}\n\n/* 用户信息横向长条卡片 */\n.user-info-banner {\n  width: 95%;\n  max-width: 800px;\n  height: 100px;\n  border-radius: 16px;\n  margin: 20px 0;\n  position: relative;\n  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);\n  background: linear-gradient(120deg, #111822, #253746);\n  overflow: hidden;\n  display: flex;\n  align-items: center;\n  transition: all 0.3s ease;\n}\n\n.user-info-banner:hover {\n  transform: translateY(-3px);\n  box-shadow: 0 12px 30px rgba(0, 0, 0, 0.2);\n}\n\n.banner-glow {\n  position: absolute;\n  width: 150%;\n  height: 150%;\n  top: -25%;\n  left: -25%;\n  background: radial-gradient(\n    ellipse at center,\n    rgba(74, 215, 240, 0.3) 0%,\n    rgba(46, 187, 161, 0.1) 40%,\n    rgba(0, 0, 0, 0) 70%\n  );\n  pointer-events: none;\n  z-index: 1;\n  animation: glow-pulse 5s infinite alternate;\n}\n\n@keyframes glow-pulse {\n  0% { opacity: 0.4; transform: scale(1); }\n  100% { opacity: 0.8; transform: scale(1.2); }\n}\n\n.banner-content {\n  display: flex;\n  align-items: center;\n  width: 100%;\n  height: 100%;\n  padding: 0 25px;\n  position: relative;\n  z-index: 2;\n}\n\n.user-section {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-right: 25px;\n  min-width: 80px;\n}\n\n.user-avatar {\n  position: relative;\n  width: 50px;\n  height: 50px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.user-avatar i {\n  font-size: 42px;\n  color: #4fd1c5;\n}\n\n.avatar-ring {\n  position: absolute;\n  width: 58px;\n  height: 58px;\n  border-radius: 50%;\n  border: 2px solid rgba(79, 209, 197, 0.5);\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  animation: ring-pulse 2s infinite ease-out;\n}\n\n@keyframes ring-pulse {\n  0% { transform: translate(-50%, -50%) scale(0.8); opacity: 0.8; }\n  50% { transform: translate(-50%, -50%) scale(1.1); opacity: 0.2; }\n  100% { transform: translate(-50%, -50%) scale(0.8); opacity: 0.8; }\n}\n\n.user-name {\n  margin-top: 6px;\n  color: white;\n  font-size: 14px;\n  font-weight: 500;\n  max-width: 80px;\n  text-align: center;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.metrics-section {\n  display: flex;\n  align-items: center;\n  flex: 1;\n  height: 100%;\n  padding: 0 15px;\n}\n\n.metric-item {\n  display: flex;\n  align-items: center;\n  flex: 1;\n}\n\n.metric-icon {\n  width: 42px;\n  height: 42px;\n  border-radius: 10px;\n  background: rgba(255, 255, 255, 0.1);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-right: 15px;\n  backdrop-filter: blur(5px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1), inset 0 2px 4px rgba(255, 255, 255, 0.1);\n}\n\n.metric-icon i {\n  font-size: 20px;\n}\n\n.leaf-animation {\n  color: #4fd1c5;\n  animation: leaf-wave 3s infinite ease-in-out;\n}\n\n@keyframes leaf-wave {\n  0%, 100% { transform: rotate(0deg); }\n  25% { transform: rotate(15deg); }\n  75% { transform: rotate(-15deg); }\n}\n\n.tree-animation {\n  color: #68d391;\n  animation: tree-grow 4s infinite ease-in-out;\n}\n\n@keyframes tree-grow {\n  0%, 100% { transform: scale(1); }\n  50% { transform: scale(1.2); }\n}\n\n.metric-data {\n  display: flex;\n  flex-direction: column;\n}\n\n.metric-value {\n  font-size: 20px;\n  font-weight: bold;\n  color: white;\n  line-height: 1.1;\n}\n\n.metric-label {\n  font-size: 12px;\n  color: rgba(255, 255, 255, 0.7);\n}\n\n.metric-divider {\n  width: 1px;\n  height: 50px;\n  background: linear-gradient(to bottom, rgba(255, 255, 255, 0), rgba(255, 255, 255, 0.3), rgba(255, 255, 255, 0));\n  margin: 0 20px;\n}\n\n.pulse {\n  animation: pulse 2s infinite;\n}\n\n@keyframes pulse {\n  0% { transform: scale(1); }\n  50% { transform: scale(1.05); }\n  100% { transform: scale(1); }\n}\n\n.nav-controls {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  width: 100%;\n  margin-bottom: 20px;\n}\n\n.back-to-home {\n  position: static;\n}\n\n.switch-calculator {\n  margin: 0;\n}\n\n.back-btn {\n  background-color: #4CAF50;\n  color: white;\n  border: none;\n  border-radius: 20px;\n  padding: 8px 16px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-size: 14px;\n  transition: background-color 0.3s;\n  box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n}\n\n.back-btn:hover {\n  background-color: #388E3C;\n}\n\n.switch-btn {\n  display: flex;\n  align-items: center;\n  padding: 10px 20px;\n  background: linear-gradient(135deg, #1e3d59, #4CAF50);\n  border: none;\n  border-radius: 25px;\n  color: white;\n  font-size: 14px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  box-shadow: 0 3px 8px rgba(30, 61, 89, 0.3);\n}\n\n.switch-btn:hover {\n  background: linear-gradient(135deg, #19324a, #3d9140);\n  transform: translateY(-2px);\n  box-shadow: 0 5px 12px rgba(30, 61, 89, 0.4);\n}\n\n.switch-btn i {\n  margin-right: 8px;\n  animation: spin 7s infinite linear;\n  opacity: 0.9;\n}\n\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  25% { transform: rotate(90deg); }\n  50% { transform: rotate(180deg); }\n  75% { transform: rotate(270deg); }\n  100% { transform: rotate(360deg); }\n}\n\n/* 响应式调整 */\n@media (max-width: 768px) {\n  .user-info-banner {\n    height: auto;\n    flex-direction: column;\n    padding: 15px 0;\n  }\n  \n  .banner-content {\n    flex-direction: column;\n    padding: 10px;\n  }\n  \n  .user-section {\n    margin-right: 0;\n    margin-bottom: 15px;\n  }\n  \n  .metrics-section {\n    flex-direction: column;\n    width: 100%;\n    gap: 15px;\n  }\n  \n  .metric-divider {\n    width: 80%;\n    height: 1px;\n    margin: 0;\n  }\n}\n\n/* 数据刷新时的动画 */\n@keyframes refresh-spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n\n.refresh-spin {\n  animation: refresh-spin 1s infinite linear;\n  color: #48bb78;\n}\n\n/* 数据更新时的高亮效果 */\n@keyframes highlight-pulse {\n  0% { box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15); }\n  50% { box-shadow: 0 8px 30px rgba(66, 153, 225, 0.6); background: linear-gradient(120deg, #1a2936, #304b60); }\n  100% { box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15); }\n}\n\n.highlight-update {\n  animation: highlight-pulse 2s ease;\n}\n</style> ","<template>\n  <div class=\"carbon-reduction-calculator\">\n    <div class=\"calculator-container\">\n      <!-- 左侧分类列表 -->\n      <div class=\"category-list\">\n        <div\n          v-for=\"category in categories\"\n          :key=\"category.id\"\n          class=\"category-item\"\n          :class=\"{ active: activeCategory === category.id }\"\n          @click=\"setActiveCategory(category.id)\"\n        >\n          <i :class=\"category.icon\"></i>\n          <span>{{ category.name }}</span>\n        </div>\n      </div>\n\n      <!-- 中间活动列表 -->\n      <div class=\"activity-list\">\n        <div\n          v-for=\"activity in filteredActivities\"\n          :key=\"activity.id\"\n          class=\"activity-item\"\n          :class=\"{ selected: isActivitySelected(activity.id) }\"\n          @click=\"toggleActivity(activity)\"\n        >\n          <div class=\"activity-icon\">\n            <i :class=\"activity.icon\"></i>\n          </div>\n          <div class=\"activity-info\">\n            <h3>{{ activity.name }}</h3>\n            <p>{{ activity.description }}</p>\n            <div class=\"activity-factor\">\n              <span>减碳系数：</span>\n              <span class=\"factor-value\">{{ activity.factor }} kgCO₂e/{{ activity.unit }}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- 右侧计算面板 -->\n      <div class=\"calculation-panel\">\n        <div class=\"selected-activities\">\n          <h3>已选减碳活动</h3>\n          <div v-if=\"selectedActivities.length === 0\" class=\"no-activities\">\n            <i class=\"fas fa-info-circle\"></i>\n            <p>请从左侧选择减碳活动</p>\n          </div>\n          <div v-else class=\"activity-inputs\">\n            <div v-for=\"activity in selectedActivities\" :key=\"activity.id\" class=\"activity-input\">\n              <div class=\"activity-header\">\n                <span>{{ activity.name }}</span>\n                <button class=\"remove-btn\" @click=\"removeActivity(activity.id)\">\n                  <i class=\"fas fa-times\"></i>\n                </button>\n              </div>\n              <div class=\"input-group\">\n                <input\n                  type=\"number\"\n                  v-model=\"activity.amount\"\n                  :placeholder=\"'输入' + activity.unit\"\n                  min=\"0\"\n                  @input=\"calculateTotalReduction\"\n                />\n                <span class=\"unit\">{{ activity.unit }}</span>\n              </div>\n              <div class=\"reduction-amount\">\n                减碳量：{{ (activity.amount * activity.factor).toFixed(2) }} kgCO₂e\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"total-reduction\">\n          <div class=\"total-header\">\n            <h3>总减碳量</h3>\n            <span class=\"total-value\">{{ totalReduction.toFixed(2) }} kgCO₂e</span>\n          </div>\n          <div class=\"tree-equivalent\">\n            <i class=\"fas fa-tree\"></i>\n            <span>相当于种植了 {{ (totalReduction / 18).toFixed(1) }} 棵树</span>\n          </div>\n        </div>\n\n        <button\n          class=\"save-btn\"\n          :disabled=\"!canSave || isSaving\"\n          @click=\"saveReduction\"\n        >\n          <i class=\"fas fa-save\" v-if=\"!isSaving\"></i>\n          <i class=\"fas fa-spinner fa-spin\" v-else></i>\n          {{ isSaving ? '保存中...' : '保存减碳记录' }}\n        </button>\n      </div>\n    </div>\n\n    <!-- 保存成功提示 -->\n    <div v-if=\"showSuccess\" class=\"success-message success\">\n      <i class=\"fas fa-check-circle\"></i>\n      <div class=\"message-content\">\n        <div class=\"message-title\">减碳记录保存成功！</div>\n      </div>\n      <button class=\"close-message-btn\" @click=\"showSuccess = false\">\n        <i class=\"fas fa-times\"></i>\n      </button>\n    </div>\n    \n    <!-- 保存失败提示 -->\n    <div v-if=\"showError\" class=\"success-message error\">\n      <i class=\"fas fa-exclamation-circle\"></i>\n      <div class=\"message-content\">\n        <div class=\"message-title\">保存失败</div>\n        <div class=\"message-detail\">{{ errorMessage }}</div>\n      </div>\n      <button class=\"close-message-btn\" @click=\"showError = false\">\n        <i class=\"fas fa-times\"></i>\n      </button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref, computed } from 'vue'\nimport { useStore } from 'vuex'\nimport { useRouter } from 'vue-router'\nimport { getAPI } from '@/config/api'\n\nexport default {\n  name: 'CarbonReductionCalculator',\n  emits: ['reductionSaved'],\n  setup(props, { emit }) {\n    const store = useStore()\n    const router = useRouter()\n    const showSuccess = ref(false)\n    const showError = ref(false)\n    const errorMessage = ref('')\n    const isSaving = ref(false)\n\n    // 减碳活动分类\n    const categories = [\n      { id: 'transport', name: '交通出行', icon: 'fas fa-car' },\n      { id: 'energy', name: '能源使用', icon: 'fas fa-bolt' },\n      { id: 'food', name: '饮食选择', icon: 'fas fa-utensils' },\n      { id: 'waste', name: '垃圾处理', icon: 'fas fa-trash' },\n      { id: 'lifestyle', name: '生活方式', icon: 'fas fa-heart' }\n    ]\n\n    // 减碳活动列表\n    const activities = [\n      {\n        id: 'bike',\n        category: 'transport',\n        name: '骑自行车出行',\n        description: '使用自行车代替机动车出行',\n        icon: 'fas fa-bicycle',\n        factor: 0.2,\n        unit: '公里'\n      },\n      {\n        id: 'public_transport',\n        category: 'transport',\n        name: '乘坐公共交通',\n        description: '使用公交、地铁等公共交通工具',\n        icon: 'fas fa-bus',\n        factor: 0.1,\n        unit: '公里'\n      },\n      {\n        id: 'walk',\n        category: 'transport',\n        name: '步行出行',\n        description: '选择步行代替其他交通方式',\n        icon: 'fas fa-walking',\n        factor: 0.05,\n        unit: '公里'\n      },\n      {\n        id: 'led_light',\n        category: 'energy',\n        name: '使用LED灯',\n        description: '使用LED节能灯泡',\n        icon: 'fas fa-lightbulb',\n        factor: 0.02,\n        unit: '小时'\n      },\n      {\n        id: 'solar_panel',\n        category: 'energy',\n        name: '使用太阳能',\n        description: '使用太阳能热水器或发电',\n        icon: 'fas fa-solar-panel',\n        factor: 0.5,\n        unit: '千瓦时'\n      },\n      {\n        id: 'vegetarian',\n        category: 'food',\n        name: '素食饮食',\n        description: '选择素食代替肉类',\n        icon: 'fas fa-leaf',\n        factor: 0.3,\n        unit: '餐'\n      },\n      {\n        id: 'local_food',\n        category: 'food',\n        name: '本地食材',\n        description: '选择本地生产的食材',\n        icon: 'fas fa-store',\n        factor: 0.1,\n        unit: '公斤'\n      },\n      {\n        id: 'recycle',\n        category: 'waste',\n        name: '垃圾分类回收',\n        description: '正确分类和回收垃圾',\n        icon: 'fas fa-recycle',\n        factor: 0.15,\n        unit: '公斤'\n      },\n      {\n        id: 'compost',\n        category: 'waste',\n        name: '厨余堆肥',\n        description: '将厨余垃圾进行堆肥处理',\n        icon: 'fas fa-seedling',\n        factor: 0.2,\n        unit: '公斤'\n      },\n      {\n        id: 'reusable_bag',\n        category: 'lifestyle',\n        name: '使用环保袋',\n        description: '使用可重复使用的购物袋',\n        icon: 'fas fa-shopping-bag',\n        factor: 0.01,\n        unit: '次'\n      },\n      {\n        id: 'reusable_bottle',\n        category: 'lifestyle',\n        name: '使用环保水杯',\n        description: '使用可重复使用的水杯',\n        icon: 'fas fa-glass-whiskey',\n        factor: 0.02,\n        unit: '次'\n      }\n    ]\n\n    const activeCategory = ref('transport')\n    const selectedActivities = ref([])\n    const totalReduction = ref(0)\n\n    // 根据当前分类筛选活动\n    const filteredActivities = computed(() => {\n      return activities.filter(activity => activity.category === activeCategory.value)\n    })\n\n    // 设置当前活动分类\n    const setActiveCategory = (categoryId) => {\n      activeCategory.value = categoryId\n    }\n\n    // 检查活动是否已选择\n    const isActivitySelected = (activityId) => {\n      return selectedActivities.value.some(activity => activity.id === activityId)\n    }\n\n    // 切换活动选择状态\n    const toggleActivity = (activity) => {\n      const index = selectedActivities.value.findIndex(item => item.id === activity.id)\n      if (index === -1) {\n        selectedActivities.value.push({\n          ...activity,\n          amount: 0\n        })\n      } else {\n        selectedActivities.value.splice(index, 1)\n      }\n      calculateTotalReduction()\n    }\n\n    // 移除已选活动\n    const removeActivity = (activityId) => {\n      selectedActivities.value = selectedActivities.value.filter(\n        activity => activity.id !== activityId\n      )\n      calculateTotalReduction()\n    }\n\n    // 计算总减碳量\n    const calculateTotalReduction = () => {\n      totalReduction.value = selectedActivities.value.reduce((total, activity) => {\n        return total + (activity.amount * activity.factor)\n      }, 0)\n    }\n\n    // 检查是否可以保存\n    const canSave = computed(() => {\n      return selectedActivities.value.length > 0 &&\n        selectedActivities.value.every(activity => activity.amount > 0)\n    })\n\n    // 保存减碳记录\n    const saveReduction = async () => {\n      if (!canSave.value || isSaving.value) return\n      \n      isSaving.value = true\n      showSuccess.value = false\n      showError.value = false\n      \n      // 检查输入值的有效性\n      const invalidActivity = selectedActivities.value.find(activity => \n        !activity.amount || isNaN(activity.amount) || activity.amount <= 0\n      )\n      \n      if (invalidActivity) {\n        showError.value = true\n        errorMessage.value = `请为「${invalidActivity.name}」输入有效的数量`\n        isSaving.value = false\n        return\n      }\n\n      try {\n        // 准备提交的数据，确保reduction是数字类型\n        const activitiesData = selectedActivities.value.map(activity => ({\n          id: activity.id,\n          name: activity.name,\n          amount: parseFloat(activity.amount),\n          reduction: parseFloat((activity.amount * activity.factor).toFixed(2))\n        }))\n        \n        console.log('发送减碳数据:', activitiesData)\n        \n        // 检查用户token是否存在\n        const token = localStorage.getItem('token')\n        if (!token) {\n          showError.value = true\n          errorMessage.value = '未登录或会话已过期，请重新登录'\n          isSaving.value = false\n          return\n        }\n        \n        console.log('请求开始，准备发送POST请求到:', '/carbon/reduction')\n        \n        try {\n          // 获取配置好的axios实例\n          const api = getAPI()\n          \n          // 打印请求配置\n          console.log('API配置:', {\n            baseURL: api.defaults.baseURL,\n            timeout: api.defaults.timeout,\n            headers: api.defaults.headers\n          })\n          \n          // 发送请求\n          const response = await api.post('/carbon/reduction', {\n            activities: activitiesData\n          })\n          \n          console.log('请求成功，服务器响应:', response.data)\n          \n          if (response.data && response.data.success) {\n            // 清空已选活动\n            selectedActivities.value = []\n            // 重置总减碳量\n            totalReduction.value = 0\n            \n            // 显示成功消息\n            showSuccess.value = true\n            \n            // 通知父组件更新用户减碳总量\n            const newTotal = response.data.data.newTotalReduction || 0\n            console.log('新的减碳总量:', newTotal)\n            emit('reductionSaved', newTotal)\n            \n            // 延迟刷新\n            setTimeout(async () => {\n              try {\n                // 直接刷新当前页面的数据\n                await store.dispatch('updateUserCarbonReduction')\n                \n                // 同步更新排名系统\n                await store.dispatch('syncLeaderboardWithCarbonReduction')\n                console.log('已同步排名系统数据')\n              } catch (refreshError) {\n                console.error('刷新数据失败:', refreshError)\n              }\n            }, 1500)\n          } else {\n            showError.value = true\n            errorMessage.value = response.data?.error || '保存失败，请重试'\n            console.error('保存失败，响应中没有success标志:', response.data)\n          }\n        } catch (apiError) {\n          console.error('API调用失败:', apiError)\n          throw apiError\n        }\n      } catch (error) {\n        console.error('保存减碳记录失败:', error)\n        showError.value = true\n        \n        // 提取详细的错误信息\n        const serverError = error.response?.data?.error || error.response?.data?.message\n        const serverDetails = error.response?.data?.details\n        \n        if (serverError) {\n          errorMessage.value = serverDetails \n            ? `${serverError}: ${serverDetails}`\n            : serverError\n          console.error('服务器返回错误:', serverError, serverDetails)\n        } else if (error.request) {\n          // 请求发出但没有收到响应\n          errorMessage.value = '服务器无响应，请检查网络连接'\n          console.error('请求无响应:', error.request)\n        } else {\n          // 请求设置或发送前出错\n          errorMessage.value = '请求发送失败，请稍后重试'\n          console.error('请求发送错误:', error.message)\n        }\n      } finally {\n        isSaving.value = false\n      }\n    }\n\n    return {\n      categories,\n      activeCategory,\n      filteredActivities,\n      selectedActivities,\n      totalReduction,\n      showSuccess,\n      showError,\n      errorMessage,\n      isSaving,\n      canSave,\n      setActiveCategory,\n      isActivitySelected,\n      toggleActivity,\n      removeActivity,\n      calculateTotalReduction,\n      saveReduction\n    }\n  }\n}\n</script>\n\n<style scoped>\n.carbon-reduction-calculator {\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 0 20px;\n}\n\n.calculator-header {\n  text-align: center;\n  margin-bottom: 30px;\n  display: none; /* 隐藏重复的标题 */\n}\n\n.calculator-container {\n  display: flex;\n  gap: 20px;\n  background: #fff;\n  border-radius: 10px;\n  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);\n  padding: 20px;\n}\n\n.category-list {\n  width: 200px;\n  border-right: 1px solid #eee;\n  padding-right: 20px;\n}\n\n.category-item {\n  display: flex;\n  align-items: center;\n  padding: 12px 15px;\n  margin-bottom: 10px;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n}\n\n.category-item:hover {\n  background: #f5f5f5;\n}\n\n.category-item.active {\n  background: #e3f2fd;\n  color: #1976d2;\n}\n\n.category-item i {\n  margin-right: 10px;\n  font-size: 18px;\n}\n\n.activity-list {\n  flex: 1;\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));\n  gap: 15px;\n  padding: 0 20px;\n  max-height: 600px;\n  overflow-y: auto;\n}\n\n.activity-item {\n  background: #fff;\n  border: 1px solid #eee;\n  border-radius: 8px;\n  padding: 15px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n}\n\n.activity-item:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n}\n\n.activity-item.selected {\n  border-color: #4caf50;\n  background: #f1f8e9;\n}\n\n.activity-icon {\n  width: 40px;\n  height: 40px;\n  background: #f5f5f5;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-bottom: 10px;\n}\n\n.activity-icon i {\n  font-size: 20px;\n  color: #666;\n}\n\n.activity-info h3 {\n  font-size: 16px;\n  margin-bottom: 5px;\n  color: #2c3e50;\n}\n\n.activity-info p {\n  font-size: 14px;\n  color: #666;\n  margin-bottom: 10px;\n}\n\n.activity-factor {\n  font-size: 14px;\n  color: #666;\n}\n\n.factor-value {\n  color: #4caf50;\n  font-weight: bold;\n}\n\n.calculation-panel {\n  width: 300px;\n  border-left: 1px solid #eee;\n  padding-left: 20px;\n}\n\n.selected-activities {\n  margin-bottom: 20px;\n}\n\n.selected-activities h3 {\n  font-size: 18px;\n  margin-bottom: 15px;\n  color: #2c3e50;\n}\n\n.no-activities {\n  text-align: center;\n  padding: 20px;\n  color: #999;\n}\n\n.no-activities i {\n  font-size: 24px;\n  margin-bottom: 10px;\n}\n\n.activity-inputs {\n  max-height: 300px;\n  overflow-y: auto;\n}\n\n.activity-input {\n  background: #f5f5f5;\n  border-radius: 8px;\n  padding: 15px;\n  margin-bottom: 10px;\n}\n\n.activity-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 10px;\n}\n\n.remove-btn {\n  background: none;\n  border: none;\n  color: #999;\n  cursor: pointer;\n  padding: 5px;\n}\n\n.remove-btn:hover {\n  color: #f44336;\n}\n\n.input-group {\n  display: flex;\n  align-items: center;\n  margin-bottom: 10px;\n}\n\n.input-group input {\n  flex: 1;\n  padding: 8px 12px;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  margin-right: 10px;\n}\n\n.unit {\n  color: #666;\n  font-size: 14px;\n}\n\n.reduction-amount {\n  font-size: 14px;\n  color: #4caf50;\n}\n\n.total-reduction {\n  background: #e8f5e9;\n  border-radius: 8px;\n  padding: 20px;\n  margin-bottom: 20px;\n}\n\n.total-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 10px;\n}\n\n.total-value {\n  font-size: 24px;\n  font-weight: bold;\n  color: #4caf50;\n}\n\n.tree-equivalent {\n  display: flex;\n  align-items: center;\n  color: #666;\n}\n\n.tree-equivalent i {\n  margin-right: 10px;\n  color: #4caf50;\n}\n\n.save-btn {\n  width: 100%;\n  padding: 12px;\n  background: #4caf50;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  font-size: 16px;\n  cursor: pointer;\n  transition: background 0.3s ease;\n}\n\n.save-btn:hover {\n  background: #43a047;\n}\n\n.save-btn:disabled {\n  background: #cccccc;\n  cursor: not-allowed;\n}\n\n.save-btn i {\n  margin-right: 8px;\n}\n\n.success-message {\n  position: fixed;\n  top: 20px;\n  right: 20px;\n  color: white;\n  padding: 15px 25px;\n  border-radius: 4px;\n  display: flex;\n  align-items: flex-start;\n  animation: slideIn 0.3s ease;\n  z-index: 1000;\n  min-width: 300px;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n}\n\n.success-message.success {\n  background: #4caf50;\n}\n\n.success-message.error {\n  background: #f44336;\n}\n\n.success-message i {\n  margin-right: 15px;\n  font-size: 24px;\n}\n\n.message-content {\n  flex: 1;\n}\n\n.message-title {\n  font-weight: bold;\n  margin-bottom: 5px;\n}\n\n.message-detail {\n  font-size: 14px;\n  opacity: 0.9;\n}\n\n.close-message-btn {\n  background: none;\n  border: none;\n  color: white;\n  opacity: 0.7;\n  cursor: pointer;\n  font-size: 16px;\n  padding: 0;\n  margin-left: 10px;\n  transition: opacity 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 24px;\n  height: 24px;\n}\n\n.close-message-btn:hover {\n  opacity: 1;\n}\n\n@keyframes slideIn {\n  from {\n    transform: translateX(100%);\n    opacity: 0;\n  }\n  to {\n    transform: translateX(0);\n    opacity: 1;\n  }\n}\n\n/* 按钮加载中状态 */\n.fa-spinner {\n  animation: spin 1s infinite linear;\n}\n\n@keyframes spin {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n</style> ","import { render } from \"./CarbonReductionCalculator.vue?vue&type=template&id=2fce110b&scoped=true\"\nimport script from \"./CarbonReductionCalculator.vue?vue&type=script&lang=js\"\nexport * from \"./CarbonReductionCalculator.vue?vue&type=script&lang=js\"\n\nimport \"./CarbonReductionCalculator.vue?vue&type=style&index=0&id=2fce110b&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2fce110b\"]])\n\nexport default __exports__","import { render } from \"./CarbonReductionPage.vue?vue&type=template&id=3ced20b2&scoped=true\"\nimport script from \"./CarbonReductionPage.vue?vue&type=script&lang=js\"\nexport * from \"./CarbonReductionPage.vue?vue&type=script&lang=js\"\n\nimport \"./CarbonReductionPage.vue?vue&type=style&index=0&id=3ced20b2&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3ced20b2\"]])\n\nexport default __exports__"],"names":["$","uncurryThis","toIntegerOrInfinity","thisNumberValue","$repeat","fails","$RangeError","RangeError","$String","String","floor","Math","repeat","stringSlice","slice","nativeToFixed","toFixed","pow","x","n","acc","log","x2","multiply","data","c","index","c2","divide","dataToString","s","t","length","FORCED","target","proto","forced","fractionDigits","e","z","j","k","number","this","fractDigits","sign","result","class","key","ref","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","onClick","_cache","$options","goHome","apply","arguments","_hoisted_5","switchToEmissionCalculator","_createTextVNode","_hoisted_6","$data","isLoggedIn","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_toDisplayString","username","_hoisted_11","_hoisted_12","_hoisted_13","_normalizeClass","isRefreshing","_hoisted_14","_hoisted_15","userCarbonReduction","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","treeEquivalent","_createCommentVNode","_createVNode","_component_CarbonReductionCalculator","onReductionSaved","_Fragment","_renderList","$setup","categories","category","id","active","activeCategory","$event","setActiveCategory","icon","name","filteredActivities","activity","selected","isActivitySelected","toggleActivity","description","factor","unit","selectedActivities","removeActivity","type","amount","placeholder","min","onInput","calculateTotalReduction","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","totalReduction","_hoisted_24","disabled","canSave","isSaving","saveReduction","_hoisted_27","_hoisted_26","_hoisted_25","showSuccess","_hoisted_28","showError","_hoisted_29","_hoisted_30","_hoisted_31","errorMessage","emits","setup","props","_ref","emit","store","useStore","useRouter","activities","computed","filter","value","categoryId","activityId","some","findIndex","item","push","_objectSpread","splice","reduce","total","every","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee2","invalidActivity","activitiesData","token","api","response","newTotal","_response$data","_error$response","_error$response2","_error$response3","serverError","serverDetails","wrap","_context2","prev","next","abrupt","find","isNaN","concat","map","parseFloat","reduction","console","localStorage","getItem","getAPI","baseURL","defaults","timeout","headers","post","sent","success","newTotalReduction","setTimeout","_callee","_context","dispatch","t0","error","stop","t1","message","details","request","finish","__exports__","components","CarbonReductionCalculator","max","round","created","loadUserCarbonReduction","mounted","_this","animationTriggered","animateCountUp","methods","_this2","$refs","userInfoCard","classList","add","remove","countElements","document","querySelectorAll","forEach","el","textContent","current","increment","timer","setInterval","clearInterval","_arguments","_this3","isRefresh","timestamp","newValue","undefined","Date","getTime","fetch","cache","ok","json","carbon_reduction","status","statusText","$router","render"],"sourceRoot":""}