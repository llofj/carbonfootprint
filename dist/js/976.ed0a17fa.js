"use strict";(self["webpackChunkecopaw"]=self["webpackChunkecopaw"]||[]).push([[976],{9868:(e,a,r)=>{var t=r(46518),n=r(79504),s=r(91291),o=r(31240),i=r(72333),l=r(79039),u=RangeError,c=String,d=Math.floor,h=n(i),k=n("".slice),v=n(1..toFixed),g=function(e,a,r){return 0===a?r:a%2===1?g(e,a-1,r*e):g(e*e,a/2,r)},f=function(e){var a=0,r=e;while(r>=4096)a+=12,r/=4096;while(r>=2)a+=1,r/=2;return a},p=function(e,a,r){var t=-1,n=r;while(++t<6)n+=a*e[t],e[t]=n%1e7,n=d(n/1e7)},b=function(e,a){var r=6,t=0;while(--r>=0)t+=e[r],e[r]=d(t/a),t=t%a*1e7},L=function(e){var a=6,r="";while(--a>=0)if(""!==r||0===a||0!==e[a]){var t=c(e[a]);r=""===r?t:r+h("0",7-t.length)+t}return r},m=l((function(){return"0.000"!==v(8e-5,3)||"1"!==v(.9,0)||"1.25"!==v(1.255,2)||"1000000000000000128"!==v(0xde0b6b3a7640080,0)}))||!l((function(){v({})}));t({target:"Number",proto:!0,forced:m},{toFixed:function(e){var a,r,t,n,i=o(this),l=s(e),d=[0,0,0,0,0,0],v="",m="0";if(l<0||l>20)throw new u("Incorrect fraction digits");if(i!==i)return"NaN";if(i<=-1e21||i>=1e21)return c(i);if(i<0&&(v="-",i=-i),i>1e-21)if(a=f(i*g(2,69,1))-69,r=a<0?i*g(2,-a,1):i/g(2,a,1),r*=4503599627370496,a=52-a,a>0){p(d,0,r),t=l;while(t>=7)p(d,1e7,0),t-=7;p(d,g(10,t,1),0),t=a-1;while(t>=23)b(d,1<<23),t-=23;b(d,1<<t),p(d,1,1),b(d,2),m=L(d)}else p(d,0,r),p(d,1<<-a,0),m=L(d)+h("0",l);return l>0?(n=m.length,m=v+(n<=l?"0."+h("0",l-n)+m:k(m,0,n-l)+"."+k(m,n-l))):m=v+m,m}})},14603:(e,a,r)=>{var t=r(36840),n=r(79504),s=r(655),o=r(22812),i=URLSearchParams,l=i.prototype,u=n(l.append),c=n(l["delete"]),d=n(l.forEach),h=n([].push),k=new i("a=1&a=2&b=3");k["delete"]("a",1),k["delete"]("b",void 0),k+""!=="a=2"&&t(l,"delete",(function(e){var a=arguments.length,r=a<2?void 0:arguments[1];if(a&&void 0===r)return c(this,e);var t=[];d(this,(function(e,a){h(t,{key:a,value:e})})),o(a,1);var n,i=s(e),l=s(r),k=0,v=0,g=!1,f=t.length;while(k<f)n=t[k++],g||n.key===i?(g=!0,c(this,n.key)):v++;while(v<f)n=t[v++],n.key===i&&n.value===l||u(this,n.key,n.value)}),{enumerable:!0,unsafe:!0})},20976:(e,a,r)=>{r.r(a),r.d(a,{default:()=>de});var t=r(56768),n={class:"content leaderboard-page"},s={class:"back-to-home"};function o(e,a,r,o,i,l){var u=(0,t.g2)("Navbar"),c=(0,t.g2)("Leaderboard");return(0,t.uX)(),(0,t.CE)("div",null,[(0,t.bF)(u),(0,t.Lk)("div",n,[(0,t.Lk)("div",s,[(0,t.Lk)("button",{onClick:a[0]||(a[0]=function(){return l.goHome&&l.goHome.apply(l,arguments)}),class:"back-btn"},a[1]||(a[1]=[(0,t.Lk)("i",{class:"fas fa-home"},null,-1),(0,t.Lk)("span",null,"返回主页",-1)]))]),(0,t.bF)(c)])])}r(44114);var i=r(4809),l=(r(2892),r(9868),r(24232)),u=r(45130),c={class:"leaderboard-page"},d={key:0,class:"error-message"},h={class:"user-rank-card"},k={class:"user-rank-header"},v={class:"user-avatar-and-info"},g={class:"user-avatar"},f={key:0},p={key:1},b={class:"user-info"},L={key:0,class:"user-badges"},m={key:0,class:"badge top-badge",title:"排名前三"},w={key:1,class:"badge century-badge",title:"减排量超过100kg"},y={key:2,class:"badge progress-badge",title:"减排量超过50kg"},C={key:3,class:"badge newcomer-badge",title:"新用户"},R={key:1,class:"rank-badge loading-rank"},U={class:"user-stats"},x={class:"stat-item"},P={class:"stat-value carbon-value"},S={class:"stat-item"},E={class:"stat-value"},_={key:1,class:"fas fa-trophy text-normal"},A={class:"stat-label"},X={class:"stat-item"},z={class:"stat-value achievement"},I={class:"percentage"},N={class:"leaderboard-controls"},M={class:"update-section"},Q=["disabled"],F={class:"filter-section"},B={class:"leaderboard-container"},D={class:"leaderboard-table"},j={class:"rank-cell"},O={key:0},T={class:"user-info-row"},q={key:0,class:"current-user-tag"},$={key:0,class:"no-data"},H={key:1,class:"pagination"},W=["disabled"],G={class:"page-info"},K=["disabled"],J={key:2,class:"total-entries"};function V(e,a,r,n,s,o){return(0,t.uX)(),(0,t.CE)("div",c,[a[19]||(a[19]=(0,t.Lk)("h2",{class:"page-title"},"碳减排排行榜",-1)),s.errorMessage?((0,t.uX)(),(0,t.CE)("div",d,[a[5]||(a[5]=(0,t.Lk)("i",{class:"fas fa-exclamation-circle"},null,-1)),(0,t.eW)(" "+(0,l.v_)(s.errorMessage),1)])):(0,t.Q3)("",!0),(0,t.Lk)("div",h,[(0,t.Lk)("div",k,[(0,t.Lk)("div",v,[(0,t.Lk)("div",g,[s.username?((0,t.uX)(),(0,t.CE)("span",f,(0,l.v_)(o.getInitials(s.username)),1)):((0,t.uX)(),(0,t.CE)("span",p,a[6]||(a[6]=[(0,t.Lk)("i",{class:"fas fa-user"},null,-1)])))]),(0,t.Lk)("div",b,[(0,t.Lk)("h3",null,(0,l.v_)(s.username||"未能获取用户名"),1),a[11]||(a[11]=(0,t.Lk)("div",{class:"user-status"},"您当前的碳减排状态",-1)),s.userRank?((0,t.uX)(),(0,t.CE)("div",L,[s.userRank.rank<=3?((0,t.uX)(),(0,t.CE)("span",m,a[7]||(a[7]=[(0,t.Lk)("i",{class:"fas fa-crown"},null,-1)]))):(0,t.Q3)("",!0),s.userRank.carbon_reduction>=100?((0,t.uX)(),(0,t.CE)("span",w,a[8]||(a[8]=[(0,t.Lk)("i",{class:"fas fa-medal"},null,-1)]))):(0,t.Q3)("",!0),s.userRank.carbon_reduction>=50?((0,t.uX)(),(0,t.CE)("span",y,a[9]||(a[9]=[(0,t.Lk)("i",{class:"fas fa-award"},null,-1)]))):(0,t.Q3)("",!0),s.isNewUser?((0,t.uX)(),(0,t.CE)("span",C,a[10]||(a[10]=[(0,t.Lk)("i",{class:"fas fa-seedling"},null,-1)]))):(0,t.Q3)("",!0)])):(0,t.Q3)("",!0)])]),s.userRank?((0,t.uX)(),(0,t.CE)("div",{key:0,class:(0,l.C4)(["rank-badge",o.getRankColorClass(s.userRank.rank)])}," #"+(0,l.v_)(s.userRank.rank),3)):((0,t.uX)(),(0,t.CE)("div",R,[(0,t.Lk)("span",null,"#"+(0,l.v_)(s.currentUserRank||"?"),1)]))]),(0,t.Lk)("div",U,[(0,t.Lk)("div",x,[(0,t.Lk)("div",P,(0,l.v_)(s.userRank?Number(s.userRank.carbon_reduction).toFixed(1):s.currentUserCarbonReduction||"加载中..."),1),a[12]||(a[12]=(0,t.Lk)("div",{class:"stat-label"},"减排量 (kg CO₂)",-1))]),(0,t.Lk)("div",S,[(0,t.Lk)("div",E,[s.userRank?((0,t.uX)(),(0,t.CE)("i",{key:0,class:(0,l.C4)(["fas fa-trophy",o.getRankIconClass(s.userRank.rank)])},null,2)):((0,t.uX)(),(0,t.CE)("i",_))]),(0,t.Lk)("div",A,(0,l.v_)(s.userRank?o.getRankDescription(s.userRank.rank):"活跃减排者"),1)]),a[14]||(a[14]=(0,t.Lk)("div",{class:"stat-divider"},null,-1)),(0,t.Lk)("div",X,[(0,t.Lk)("div",z,[(0,t.Lk)("span",I,(0,l.v_)(s.userRank?o.getPercentile(s.userRank.rank):"81")+"%",1)]),a[13]||(a[13]=(0,t.Lk)("div",{class:"stat-label"},"击败了其他用户",-1))])])]),(0,t.Lk)("div",N,[(0,t.Lk)("div",M,[(0,t.Lk)("button",{onClick:a[0]||(a[0]=function(){return o.updateLeaderboard&&o.updateLeaderboard.apply(o,arguments)}),class:"update-btn",disabled:s.loading},[(0,t.Lk)("i",{class:(0,l.C4)(["fas fa-sync-alt",{"fa-spin":s.loading}])},null,2),(0,t.eW)(" "+(0,l.v_)(s.loading?"更新中...":"更新排名"),1)],8,Q)]),(0,t.Lk)("div",F,[(0,t.bo)((0,t.Lk)("select",{"onUpdate:modelValue":a[1]||(a[1]=function(e){return s.limit=e}),onChange:a[2]||(a[2]=function(){return o.loadLeaderboard&&o.loadLeaderboard.apply(o,arguments)}),class:"filter-select"},a[15]||(a[15]=[(0,t.Lk)("option",{value:10},"显示10名",-1),(0,t.Lk)("option",{value:20},"显示20名",-1),(0,t.Lk)("option",{value:50},"显示50名",-1),(0,t.Lk)("option",{value:100},"显示100名",-1)]),544),[[u.u1,s.limit]])])]),(0,t.Lk)("div",B,[(0,t.Lk)("div",D,[(0,t.Lk)("table",null,[a[16]||(a[16]=(0,t.Lk)("thead",null,[(0,t.Lk)("tr",null,[(0,t.Lk)("th",{class:"rank-cell"},"排名"),(0,t.Lk)("th",null,"用户"),(0,t.Lk)("th",null,"减排量 (kg CO₂)")])],-1)),(0,t.Lk)("tbody",null,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.displayedLeaderboard,(function(e,a){return(0,t.uX)(),(0,t.CE)("tr",{key:a,class:(0,l.C4)({"current-user":o.isCurrentUser(e.user_id)}),style:(0,l.Tr)({"--row-index":a})},[(0,t.Lk)("td",j,[(0,t.Lk)("div",{class:(0,l.C4)(["rank-number",o.getRankClass(e.rank)])},[e.rank<=3?((0,t.uX)(),(0,t.CE)("span",O,(0,l.v_)(e.rank),1)):((0,t.uX)(),(0,t.CE)(t.FK,{key:1},[(0,t.eW)((0,l.v_)(e.rank),1)],64))],2)]),(0,t.Lk)("td",null,[(0,t.Lk)("div",T,[(0,t.Lk)("div",{class:(0,l.C4)(["user-avatar-small",{"current-user":o.isCurrentUser(e.user_id)}])},(0,l.v_)(o.getInitials(e.username)),3),(0,t.Lk)("span",null,(0,l.v_)(e.username),1),o.isCurrentUser(e.user_id)?((0,t.uX)(),(0,t.CE)("span",q,"当前用户")):(0,t.Q3)("",!0)])]),(0,t.Lk)("td",null,(0,l.v_)(Number(e.carbon_reduction).toFixed(1)),1)],6)})),128))])])]),0===s.leaderboard.length?((0,t.uX)(),(0,t.CE)("div",$," 暂无排行数据 ")):(0,t.Q3)("",!0)]),s.leaderboard.length>0?((0,t.uX)(),(0,t.CE)("div",H,[(0,t.Lk)("button",{onClick:a[3]||(a[3]=function(e){return o.changePage(s.currentPage-1)}),disabled:1===s.currentPage,class:"pagination-btn"},a[17]||(a[17]=[(0,t.Lk)("i",{class:"fas fa-chevron-left"},null,-1)]),8,W),(0,t.Lk)("div",G," 第 "+(0,l.v_)(s.currentPage)+" 页 / 共 "+(0,l.v_)(o.totalPages)+" 页 ",1),(0,t.Lk)("button",{onClick:a[4]||(a[4]=function(e){return o.changePage(s.currentPage+1)}),disabled:s.currentPage===o.totalPages,class:"pagination-btn"},a[18]||(a[18]=[(0,t.Lk)("i",{class:"fas fa-chevron-right"},null,-1)]),8,K)])):(0,t.Q3)("",!0),s.leaderboard.length>0?((0,t.uX)(),(0,t.CE)("div",J," 展示第 "+(0,l.v_)((s.currentPage-1)*s.pageSize+1)+" - "+(0,l.v_)(Math.min(s.currentPage*s.pageSize,s.leaderboard.length))+" 条， 共 "+(0,l.v_)(s.leaderboard.length)+" 条记录 ",1)):(0,t.Q3)("",!0),a[20]||(a[20]=(0,t.Fv)('<div class="leaderboard-tips" data-v-68708ce0><h3 data-v-68708ce0>如何提高排名?</h3><ul data-v-68708ce0><li data-v-68708ce0><i class="fas fa-walking" data-v-68708ce0></i> 多步行减少碳排放</li><li data-v-68708ce0><i class="fas fa-calculator" data-v-68708ce0></i> 通过碳排放计算器记录您的低碳行为</li><li data-v-68708ce0><i class="fas fa-paw" data-v-68708ce0></i> 喂养并升级您的虚拟宠物</li><li data-v-68708ce0><i class="fas fa-award" data-v-68708ce0></i> 完成成就任务获得额外奖励</li></ul></div>',1))])}var Z=r(14048),Y=r(30388),ee=(r(28706),r(34782),r(26910),r(23288),r(26099),r(27495),r(47764),r(5746),r(62953),r(48408),r(14603),r(47566),r(98721),r(50788)),ae=r.n(ee),re=r(32674),te=ae().create(re.by);te.interceptors.request.use(re.ZU,(function(e){return Promise.reject(e)})),te.interceptors.response.use(re.Lv.success,re.Lv.error);var ne=function(){var e=window.location.hostname,a="5000",r=window.location.protocol;return"localhost"===e||"127.0.0.1"===e?"http://localhost:".concat(a,"/api"):"".concat(r,"//").concat(e,":").concat(a,"/api")};const se={data:function(){return{leaderboard:[],userRank:null,username:"",limit:100,currentPage:1,pageSize:10,loading:!1,errorMessage:"",apiBaseUrl:ne(),totalUserCount:200,isNewUser:!1,registrationDate:null,currentUserRank:null,currentUserCarbonReduction:null}},computed:{totalPages:function(){return Math.ceil(this.leaderboard.length/this.pageSize)},displayedLeaderboard:function(){var e=(this.currentPage-1)*this.pageSize,a=e+this.pageSize;return this.leaderboard.slice(e,a)}},created:function(){var e=this;return(0,Y.A)((0,Z.A)().mark((function a(){var r,t,n,s,o,i;return(0,Z.A)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(a.prev=0,console.log("API基础URL:",e.apiBaseUrl),r=localStorage.getItem("token"),r){a.next=6;break}return e.$router.push("/login"),a.abrupt("return");case 6:return a.next=8,ae().get("".concat(e.apiBaseUrl,"/auth/user"),{headers:{Authorization:"Bearer ".concat(r)}});case 8:return t=a.sent,t.data&&t.data.username?(e.username=t.data.username,console.log("成功获取用户信息:",e.username)):(console.error("未能获取到用户名:",t.data),e.username=localStorage.getItem("username")||""),t.data.created_at&&(e.registrationDate=new Date(t.data.created_at),n=new Date,n.setDate(n.getDate()-30),e.isNewUser=e.registrationDate>n),s=new URLSearchParams(window.location.search),o=s.get("rank"),i=s.get("reduction"),o&&(e.currentUserRank=o),i&&(e.currentUserCarbonReduction=i),a.next=18,e.loadLeaderboard();case 18:!e.username&&e.userRank&&(e.username=e.userRank.username),a.next=26;break;case 21:a.prev=21,a.t0=a["catch"](0),console.error("Error loading user data:",a.t0),e.username=localStorage.getItem("username")||"",e.handleError(a.t0,"加载用户数据失败");case 26:case"end":return a.stop()}}),a,null,[[0,21]])})))()},methods:{getInitials:function(e){return e?e.charCodeAt(0)>127?e.charAt(0):e.charAt(0).toUpperCase():"?"},getRankDescription:function(e){return e<=10?"优秀减排者":e<=50?"活跃减排者":e<=100?"进步减排者":"环保新手"},getPercentile:function(e){var a=Math.floor((this.totalUserCount-e)/this.totalUserCount*100);return Math.max(0,Math.min(99,a))},getRankIconClass:function(e){return e<=3?"text-gold":e<=10?"text-silver":e<=50?"text-bronze":"text-normal"},getRankColorClass:function(e){return e<=3?"rank-top":e<=10?"rank-excellent":e<=50?"rank-good":"rank-normal"},handleError:function(e,a){var r=a;e.response&&e.response.data&&e.response.data.message?r=e.response.data.message:e.message&&(r="".concat(a,": ").concat(e.message)),this.errorMessage=r,console.error(r,e)},loadLeaderboard:function(){var e=this;return(0,Y.A)((0,Z.A)().mark((function a(){var r,t,n;return(0,Z.A)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(a.prev=0,e.loading=!0,e.errorMessage="",r=localStorage.getItem("token"),r){a.next=7;break}return e.$router.push("/login"),a.abrupt("return");case 7:return t=(new Date).getTime(),console.log("正在加载排行榜数据，限制:",e.limit,"时间戳:",t),a.next=11,ae().get("".concat(e.apiBaseUrl,"/leaderboard?limit=").concat(e.limit,"&_t=").concat(t),{headers:{Authorization:"Bearer ".concat(r),"Content-Type":"application/json"}});case 11:if(n=a.sent,console.log("排行榜数据:",n.data),!n.data||!n.data.leaderboard){a.next=25;break}if(e.leaderboard=n.data.leaderboard,e.userRank=n.data.userRank,e.userRank&&0!==e.userRank.carbon_reduction){a.next=20;break}return console.log("用户排名数据为空或减排量为0，尝试获取最新排名..."),a.next=20,e.getUserRankOnly();case 20:e.leaderboard.sort((function(e,a){return e.rank-a.rank})),n.data.totalUserCount&&(e.totalUserCount=n.data.totalUserCount,console.log("获取到总用户数:",e.totalUserCount)),e.currentPage=1,a.next=28;break;case 25:console.error("返回的数据格式不正确:",n.data),e.errorMessage="返回数据格式不正确，请稍后再试",e.leaderboard=[];case 28:a.next=34;break;case 30:a.prev=30,a.t0=a["catch"](0),e.handleError(a.t0,"加载排行榜失败"),e.leaderboard=[];case 34:return a.prev=34,e.loading=!1,a.finish(34);case 37:case"end":return a.stop()}}),a,null,[[0,30,34,37]])})))()},getUserRankOnly:function(){var e=this;return(0,Y.A)((0,Z.A)().mark((function a(){var r,t;return(0,Z.A)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(a.prev=0,r=localStorage.getItem("token"),r){a.next=4;break}return a.abrupt("return");case 4:return console.log("仅获取用户排名数据..."),a.next=7,ae().get("".concat(e.apiBaseUrl,"/leaderboard/user"),{headers:{Authorization:"Bearer ".concat(r),"Content-Type":"application/json"}});case 7:t=a.sent,t.data&&(console.log("获取到的用户排名:",t.data),e.userRank=t.data),a.next=14;break;case 11:a.prev=11,a.t0=a["catch"](0),console.error("获取用户排名失败:",a.t0);case 14:case"end":return a.stop()}}),a,null,[[0,11]])})))()},changePage:function(e){e>=1&&e<=this.totalPages&&(this.currentPage=e)},updateLeaderboard:function(){var e=this;return(0,Y.A)((0,Z.A)().mark((function a(){var r,t;return(0,Z.A)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(a.prev=0,e.loading=!0,e.errorMessage="",r=localStorage.getItem("token"),r){a.next=7;break}return e.$router.push("/login"),a.abrupt("return");case 7:return console.log("开始更新排行榜，将刷新用户排名信息..."),a.next=10,ae().post("".concat(e.apiBaseUrl,"/leaderboard/update"),{},{headers:{Authorization:"Bearer ".concat(r),"Content-Type":"application/json"}});case 10:if(t=a.sent,console.log("排名更新响应:",t.data),!t.data||!t.data.rank){a.next=19;break}return console.log("用户排名已更新为第 ".concat(t.data.rank," 名")),e.userRank&&(e.userRank.rank=t.data.rank),a.next=17,e.loadLeaderboard();case 17:a.next=21;break;case 19:return a.next=21,e.loadLeaderboard();case 21:e.errorMessage="",e.showSuccessNotification("排行榜更新成功"),a.next=28;break;case 25:a.prev=25,a.t0=a["catch"](0),e.handleError(a.t0,"更新排行榜失败");case 28:return a.prev=28,e.loading=!1,a.finish(28);case 31:case"end":return a.stop()}}),a,null,[[0,25,28,31]])})))()},showSuccessNotification:function(e){console.log("成功:",e)},isCurrentUser:function(e){return this.userRank&&this.userRank.user_id===e},getRankClass:function(e){return 1===e?"rank-1":2===e?"rank-2":3===e?"rank-3":""}}};var oe=r(71241);const ie=(0,oe.A)(se,[["render",V],["__scopeId","data-v-68708ce0"]]),le=ie,ue={components:{Navbar:i.A,Leaderboard:le},methods:{goHome:function(){this.$router.push("/")}}},ce=(0,oe.A)(ue,[["render",o],["__scopeId","data-v-46fe3aef"]]),de=ce},27337:(e,a,r)=>{var t=r(46518),n=r(79504),s=r(35610),o=RangeError,i=String.fromCharCode,l=String.fromCodePoint,u=n([].join),c=!!l&&1!==l.length;t({target:"String",stat:!0,arity:1,forced:c},{fromCodePoint:function(e){var a,r=[],t=arguments.length,n=0;while(t>n){if(a=+arguments[n++],s(a,1114111)!==a)throw new o(a+" is not a valid code point");r[n]=a<65536?i(a):i(55296+((a-=65536)>>10),a%1024+56320)}return u(r,"")}})},47566:(e,a,r)=>{var t=r(36840),n=r(79504),s=r(655),o=r(22812),i=URLSearchParams,l=i.prototype,u=n(l.getAll),c=n(l.has),d=new i("a=1");!d.has("a",2)&&d.has("a",void 0)||t(l,"has",(function(e){var a=arguments.length,r=a<2?void 0:arguments[1];if(a&&void 0===r)return c(this,e);var t=u(this,e);o(a,1);var n=s(r),i=0;while(i<t.length)if(t[i++]===n)return!0;return!1}),{enumerable:!0,unsafe:!0})},48408:(e,a,r)=>{r(98406)},67416:(e,a,r)=>{var t=r(79039),n=r(78227),s=r(43724),o=r(96395),i=n("iterator");e.exports=!t((function(){var e=new URL("b?a=1&b=2&c=3","https://a"),a=e.searchParams,r=new URLSearchParams("a=1&a=2&b=3"),t="";return e.pathname="c%20d",a.forEach((function(e,r){a["delete"]("b"),t+=r+e})),r["delete"]("a",2),r["delete"]("b",void 0),o&&(!e.toJSON||!r.has("a",1)||r.has("a",2)||!r.has("a",void 0)||r.has("b"))||!a.size&&(o||!s)||!a.sort||"https://a/c%20d?a=1&c=3"!==e.href||"3"!==a.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!a[i]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("https://тест").host||"#%D0%B1"!==new URL("https://a#б").hash||"a1c3"!==t||"x"!==new URL("https://x",void 0).host}))},98406:(e,a,r)=>{r(23792),r(27337);var t=r(46518),n=r(22195),s=r(93389),o=r(97751),i=r(69565),l=r(79504),u=r(43724),c=r(67416),d=r(36840),h=r(62106),k=r(56279),v=r(10687),g=r(33994),f=r(91181),p=r(90679),b=r(94901),L=r(39297),m=r(76080),w=r(36955),y=r(28551),C=r(20034),R=r(655),U=r(2360),x=r(6980),P=r(70081),S=r(50851),E=r(62529),_=r(22812),A=r(78227),X=r(74488),z=A("iterator"),I="URLSearchParams",N=I+"Iterator",M=f.set,Q=f.getterFor(I),F=f.getterFor(N),B=s("fetch"),D=s("Request"),j=s("Headers"),O=D&&D.prototype,T=j&&j.prototype,q=n.TypeError,$=n.encodeURIComponent,H=String.fromCharCode,W=o("String","fromCodePoint"),G=parseInt,K=l("".charAt),J=l([].join),V=l([].push),Z=l("".replace),Y=l([].shift),ee=l([].splice),ae=l("".split),re=l("".slice),te=l(/./.exec),ne=/\+/g,se="�",oe=/^[0-9a-f]+$/i,ie=function(e,a){var r=re(e,a,a+2);return te(oe,r)?G(r,16):NaN},le=function(e){for(var a=0,r=128;r>0&&0!==(e&r);r>>=1)a++;return a},ue=function(e){var a=null;switch(e.length){case 1:a=e[0];break;case 2:a=(31&e[0])<<6|63&e[1];break;case 3:a=(15&e[0])<<12|(63&e[1])<<6|63&e[2];break;case 4:a=(7&e[0])<<18|(63&e[1])<<12|(63&e[2])<<6|63&e[3];break}return a>1114111?null:a},ce=function(e){e=Z(e,ne," ");var a=e.length,r="",t=0;while(t<a){var n=K(e,t);if("%"===n){if("%"===K(e,t+1)||t+3>a){r+="%",t++;continue}var s=ie(e,t+1);if(s!==s){r+=n,t++;continue}t+=2;var o=le(s);if(0===o)n=H(s);else{if(1===o||o>4){r+=se,t++;continue}var i=[s],l=1;while(l<o){if(t++,t+3>a||"%"!==K(e,t))break;var u=ie(e,t+1);if(u!==u){t+=3;break}if(u>191||u<128)break;V(i,u),t+=2,l++}if(i.length!==o){r+=se;continue}var c=ue(i);null===c?r+=se:n=W(c)}}r+=n,t++}return r},de=/[!'()~]|%20/g,he={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},ke=function(e){return he[e]},ve=function(e){return Z($(e),de,ke)},ge=g((function(e,a){M(this,{type:N,target:Q(e).entries,index:0,kind:a})}),I,(function(){var e=F(this),a=e.target,r=e.index++;if(!a||r>=a.length)return e.target=null,E(void 0,!0);var t=a[r];switch(e.kind){case"keys":return E(t.key,!1);case"values":return E(t.value,!1)}return E([t.key,t.value],!1)}),!0),fe=function(e){this.entries=[],this.url=null,void 0!==e&&(C(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===K(e,0)?re(e,1):e:R(e)))};fe.prototype={type:I,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var a,r,t,n,s,o,l,u=this.entries,c=S(e);if(c){a=P(e,c),r=a.next;while(!(t=i(r,a)).done){if(n=P(y(t.value)),s=n.next,(o=i(s,n)).done||(l=i(s,n)).done||!i(s,n).done)throw new q("Expected sequence with length 2");V(u,{key:R(o.value),value:R(l.value)})}}else for(var d in e)L(e,d)&&V(u,{key:d,value:R(e[d])})},parseQuery:function(e){if(e){var a,r,t=this.entries,n=ae(e,"&"),s=0;while(s<n.length)a=n[s++],a.length&&(r=ae(a,"="),V(t,{key:ce(Y(r)),value:ce(J(r,"="))}))}},serialize:function(){var e,a=this.entries,r=[],t=0;while(t<a.length)e=a[t++],V(r,ve(e.key)+"="+ve(e.value));return J(r,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var pe=function(){p(this,be);var e=arguments.length>0?arguments[0]:void 0,a=M(this,new fe(e));u||(this.size=a.entries.length)},be=pe.prototype;if(k(be,{append:function(e,a){var r=Q(this);_(arguments.length,2),V(r.entries,{key:R(e),value:R(a)}),u||this.length++,r.updateURL()},delete:function(e){var a=Q(this),r=_(arguments.length,1),t=a.entries,n=R(e),s=r<2?void 0:arguments[1],o=void 0===s?s:R(s),i=0;while(i<t.length){var l=t[i];if(l.key!==n||void 0!==o&&l.value!==o)i++;else if(ee(t,i,1),void 0!==o)break}u||(this.size=t.length),a.updateURL()},get:function(e){var a=Q(this).entries;_(arguments.length,1);for(var r=R(e),t=0;t<a.length;t++)if(a[t].key===r)return a[t].value;return null},getAll:function(e){var a=Q(this).entries;_(arguments.length,1);for(var r=R(e),t=[],n=0;n<a.length;n++)a[n].key===r&&V(t,a[n].value);return t},has:function(e){var a=Q(this).entries,r=_(arguments.length,1),t=R(e),n=r<2?void 0:arguments[1],s=void 0===n?n:R(n),o=0;while(o<a.length){var i=a[o++];if(i.key===t&&(void 0===s||i.value===s))return!0}return!1},set:function(e,a){var r=Q(this);_(arguments.length,1);for(var t,n=r.entries,s=!1,o=R(e),i=R(a),l=0;l<n.length;l++)t=n[l],t.key===o&&(s?ee(n,l--,1):(s=!0,t.value=i));s||V(n,{key:o,value:i}),u||(this.size=n.length),r.updateURL()},sort:function(){var e=Q(this);X(e.entries,(function(e,a){return e.key>a.key?1:-1})),e.updateURL()},forEach:function(e){var a,r=Q(this).entries,t=m(e,arguments.length>1?arguments[1]:void 0),n=0;while(n<r.length)a=r[n++],t(a.value,a.key,this)},keys:function(){return new ge(this,"keys")},values:function(){return new ge(this,"values")},entries:function(){return new ge(this,"entries")}},{enumerable:!0}),d(be,z,be.entries,{name:"entries"}),d(be,"toString",(function(){return Q(this).serialize()}),{enumerable:!0}),u&&h(be,"size",{get:function(){return Q(this).entries.length},configurable:!0,enumerable:!0}),v(pe,I),t({global:!0,constructor:!0,forced:!c},{URLSearchParams:pe}),!c&&b(j)){var Le=l(T.has),me=l(T.set),we=function(e){if(C(e)){var a,r=e.body;if(w(r)===I)return a=e.headers?new j(e.headers):new j,Le(a,"content-type")||me(a,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),U(e,{body:x(0,R(r)),headers:x(0,a)})}return e};if(b(B)&&t({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return B(e,arguments.length>1?we(arguments[1]):{})}}),b(D)){var ye=function(e){return p(this,O),new D(e,arguments.length>1?we(arguments[1]):{})};O.constructor=ye,ye.prototype=O,t({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:ye})}}e.exports={URLSearchParams:pe,getState:Q}},98721:(e,a,r)=>{var t=r(43724),n=r(79504),s=r(62106),o=URLSearchParams.prototype,i=n(o.forEach);t&&!("size"in o)&&s(o,"size",{get:function(){var e=0;return i(this,(function(){e++})),e},configurable:!0,enumerable:!0})}}]);
//# sourceMappingURL=976.ed0a17fa.js.map