(()=>{"use strict";var e={354:(e,t,n)=>{n.d(t,{A:()=>k});n(4114);var r=n(6768),a=n(5130),o=n(4232),s={class:"navbar"},i={class:"navbar-brand"},u={class:"navbar-menu"},c={class:"navbar-end"},l={key:1,class:"username"};function d(e,t,n,d,h,g){var f=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("nav",s,[(0,r.Lk)("div",i,[(0,r.bF)(f,{to:"/",class:"logo"},{default:(0,r.k6)((function(){return t[5]||(t[5]=[(0,r.eW)("EcoPaw")])})),_:1})]),(0,r.Lk)("div",u,[(0,r.bF)(f,{to:"/calculator",class:"nav-item"},{default:(0,r.k6)((function(){return t[6]||(t[6]=[(0,r.eW)("碳计算器")])})),_:1}),(0,r.Lk)("a",{onClick:t[0]||(t[0]=(0,a.D$)((function(e){return g.handleAuthRequired("/pet")}),["prevent"])),class:(0,o.C4)(["nav-item",{disabled:!h.isLoggedIn}])},"虚拟宠物",2),(0,r.Lk)("a",{onClick:t[1]||(t[1]=(0,a.D$)((function(e){return g.handleAuthRequired("/achievements")}),["prevent"])),class:(0,o.C4)(["nav-item",{disabled:!h.isLoggedIn}])},"成就系统",2),(0,r.Lk)("a",{onClick:t[2]||(t[2]=(0,a.D$)((function(e){return g.handleAuthRequired("/ranking")}),["prevent"])),class:(0,o.C4)(["nav-item",{disabled:!h.isLoggedIn}])},"排名系统",2)]),(0,r.Lk)("div",c,[h.isLoggedIn?((0,r.uX)(),(0,r.CE)("div",l,[(0,r.eW)((0,o.v_)(h.username)+" ",1),(0,r.Lk)("button",{onClick:t[4]||(t[4]=function(){return g.handleLogout&&g.handleLogout.apply(g,arguments)}),class:"logout-btn"},"退出")])):((0,r.uX)(),(0,r.CE)("div",{key:0,onClick:t[3]||(t[3]=function(t){return e.$router.push("/login")}),class:"user-icon"},t[7]||(t[7]=[(0,r.Lk)("i",{class:"fas fa-user"},null,-1)])))])])}var h=n(8407),g=n.n(h),f=n(2674);g().create(f.by);const p={name:"Navbar",data:function(){return{isLoggedIn:!1,username:""}},methods:{handleAuthRequired:function(e){this.isLoggedIn?this.$router.push(e):this.$router.push({path:"/login",query:{redirect:e}})},checkLoginStatus:function(){var e=localStorage.getItem("token");this.isLoggedIn=!!e,this.isLoggedIn&&(this.username=localStorage.getItem("username")||"用户")},handleLogout:function(){localStorage.removeItem("token"),localStorage.removeItem("username"),this.isLoggedIn=!1,this.username="",this.$router.push("/")},handleStorageChange:function(e){"token"!==e.key&&"username"!==e.key||this.checkLoginStatus()}},created:function(){this.checkLoginStatus(),window.addEventListener("storage",this.handleStorageChange)},beforeUnmount:function(){window.removeEventListener("storage",this.handleStorageChange)}};var v=n(1241);const m=(0,v.A)(p,[["render",d],["__scopeId","data-v-c786c64c"]]),k=m},2674:(e,t,n)=>{n.d(t,{Lv:()=>c,ZU:()=>u,by:()=>i,yl:()=>s});var r=n(8653),a=(n(6099),!1),o=a?"http://localhost:5000/api":"https://api.ecopaw.com",s={login:"/auth/login",logout:"/auth/logout",register:"/auth/register",captcha:"/auth/captcha",profile:"/user/profile",calculator:"/carbon/calculate",pet:"/pet",achievements:"/achievement",ranking:"/leaderboard"},i={baseURL:o,timeout:15e3,withCredentials:!0,headers:{"Content-Type":"application/json",Accept:"application/json, image/svg+xml"}},u=function(e){if(console.log("请求拦截器处理请求:",e.url),e.url===s.captcha)return e.headers["Accept"]="image/svg+xml",e.responseType="text",e;var t=localStorage.getItem("token");if(t&&(e.headers.Authorization="Bearer ".concat(t)),e.data)try{var n=(0,r.A)({},e.data);n.password&&(n.password="******"),console.log("请求数据:",n)}catch(a){console.error("请求日志记录失败:",a)}return e},c={success:function(e){return console.log("响应拦截器接收到响应:",{url:e.config.url,status:e.status,statusText:e.statusText}),e},error:function(e){return console.error("API Error:",e),e.response?(console.log("错误响应信息:",{status:e.response.status,statusText:e.response.statusText,data:e.response.data}),401===e.response.status&&(localStorage.removeItem("token"),localStorage.removeItem("username"),"/login"!==window.location.pathname&&(window.location.href="/login"))):e.request?console.log("没有收到响应:",e.request):console.log("请求设置错误:",e.message),Promise.reject(e)}}},6347:(e,t,n)=>{n(3792),n(3362),n(9085),n(9391);var r=n(5130),a=n(6768),o={id:"app"};function s(e,t,n,r,s,i){var u=(0,a.g2)("router-view");return(0,a.uX)(),(0,a.CE)("div",o,[(0,a.bF)(u)])}const i={name:"App"};var u=n(1241);const c=(0,u.A)(i,[["render",s]]),l=c;n(5086),n(8111),n(3579),n(6099),n(7764),n(2953);var d=n(1387),h=n(4232),g={class:"home"},f={class:"hero-section"},p={class:"hero-content"},v={class:"features-section"},m={class:"container"},k={class:"features-grid"},L={class:"feature-card"},b={key:0,class:"login-required"},y={key:0,class:"login-required"},C={key:0,class:"login-required"};function w(e,t,n,o,s,i){var u=(0,a.g2)("Navbar"),c=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)("div",g,[(0,a.bF)(u),(0,a.Lk)("div",f,[(0,a.Lk)("div",p,[t[4]||(t[4]=(0,a.Lk)("h1",{class:"hero-title"},"计算您的碳足迹",-1)),t[5]||(t[5]=(0,a.Lk)("p",{class:"hero-subtitle"},"减碳，让时光更轻盈",-1)),(0,a.bF)(c,{to:"/calculator",class:"cta-button"},{default:(0,a.k6)((function(){return t[3]||(t[3]=[(0,a.eW)(" 开始计算 ")])})),_:1})])]),t[17]||(t[17]=(0,a.Lk)("div",{class:"intro-section"},[(0,a.Lk)("h2",{class:"intro-title"},"为什么选择 EcoPaw?"),(0,a.Lk)("p",{class:"intro-text"}," EcoPaw 是一个创新的碳足迹管理平台，通过游戏化的方式帮助您追踪和减少碳排放。 我们相信，每个人都可以为环保做出贡献，而且这个过程可以变得有趣而有意义。 ")],-1)),(0,a.Lk)("div",v,[(0,a.Lk)("div",m,[t[16]||(t[16]=(0,a.Lk)("h2",{class:"section-title"},"功能介绍",-1)),(0,a.Lk)("div",k,[(0,a.Lk)("div",L,[(0,a.bF)(c,{to:"/calculator"},{default:(0,a.k6)((function(){return t[6]||(t[6]=[(0,a.Lk)("i",{class:"fas fa-calculator feature-icon"},null,-1),(0,a.Lk)("h3",null,"碳计算器",-1),(0,a.Lk)("p",null,"计算您的日常碳足迹",-1)])})),_:1})]),(0,a.Lk)("div",{class:(0,h.C4)(["feature-card",{disabled:!s.isLoggedIn}])},[(0,a.Lk)("a",{onClick:t[0]||(t[0]=(0,r.D$)((function(e){return i.handleAuthRequired("/pet")}),["prevent"]))},[t[7]||(t[7]=(0,a.Lk)("i",{class:"fas fa-paw feature-icon"},null,-1)),t[8]||(t[8]=(0,a.Lk)("h3",null,"虚拟宠物",-1)),t[9]||(t[9]=(0,a.Lk)("p",null,"培养您的环保小伙伴",-1)),s.isLoggedIn?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("span",b,"需要登录"))])],2),(0,a.Lk)("div",{class:(0,h.C4)(["feature-card",{disabled:!s.isLoggedIn}])},[(0,a.Lk)("a",{onClick:t[1]||(t[1]=(0,r.D$)((function(e){return i.handleAuthRequired("/achievements")}),["prevent"]))},[t[10]||(t[10]=(0,a.Lk)("i",{class:"fas fa-trophy feature-icon"},null,-1)),t[11]||(t[11]=(0,a.Lk)("h3",null,"成就系统",-1)),t[12]||(t[12]=(0,a.Lk)("p",null,"解锁环保成就",-1)),s.isLoggedIn?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("span",y,"需要登录"))])],2),(0,a.Lk)("div",{class:(0,h.C4)(["feature-card",{disabled:!s.isLoggedIn}])},[(0,a.Lk)("a",{onClick:t[2]||(t[2]=(0,r.D$)((function(e){return i.handleAuthRequired("/ranking")}),["prevent"]))},[t[13]||(t[13]=(0,a.Lk)("i",{class:"fas fa-chart-line feature-icon"},null,-1)),t[14]||(t[14]=(0,a.Lk)("h3",null,"排名系统",-1)),t[15]||(t[15]=(0,a.Lk)("p",null,"查看环保排行榜",-1)),s.isLoggedIn?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("span",C,"需要登录"))])],2)])])])])}n(4114);var A=n(354);const E={name:"Home",components:{Navbar:A.A},data:function(){return{isLoggedIn:!1}},created:function(){this.checkLoginStatus(),window.addEventListener("storage",this.checkLoginStatus)},beforeUnmount:function(){window.removeEventListener("storage",this.checkLoginStatus)},methods:{handleAuthRequired:function(e){this.isLoggedIn?this.$router.push(e):this.$router.push({path:"/login",query:{redirect:e}})},checkLoginStatus:function(){this.isLoggedIn=!!localStorage.getItem("token")}}},I=(0,u.A)(E,[["render",w],["__scopeId","data-v-783f0106"]]),S=I;var q=[{path:"/",name:"Home",component:S},{path:"/calculator",name:"Calculator",component:function(){return n.e(90).then(n.bind(n,7090))}},{path:"/pet",name:"VirtualPet",component:function(){return n.e(720).then(n.bind(n,4921))},meta:{requiresAuth:!0}},{path:"/achievements",name:"Achievements",component:function(){return n.e(825).then(n.bind(n,5825))},meta:{requiresAuth:!0}},{path:"/ranking",name:"Ranking",component:function(){return n.e(565).then(n.bind(n,3565))},meta:{requiresAuth:!0}},{path:"/login",name:"Login",component:function(){return n.e(737).then(n.bind(n,2737))}}],_=(0,d.aE)({history:(0,d.LA)("/"),routes:q});_.beforeEach((function(e,t,n){var r=!!localStorage.getItem("token");e.matched.some((function(e){return e.meta.requiresAuth}))?r?n():n({path:"/login",query:{redirect:e.fullPath}}):n()}));const j=_;var x=n(782);const O=(0,x.y$)({state:{user:null,pet:{name:"小绿",level:1,health:"健康"},achievements:[],leaderboard:[]},mutations:{setUser:function(e,t){e.user=t},updatePet:function(e,t){e.pet=t},setAchievements:function(e,t){e.achievements=t},setLeaderboard:function(e,t){e.leaderboard=t}},actions:{login:function(e,t){var n=e.commit;n("setUser",t)},fetchAchievements:function(e){var t=e.commit,n=["绿色饮食达人","低碳通勤者"];t("setAchievements",n)},fetchLeaderboard:function(e){var t=e.commit,n=[{name:"用户A",reduction:5.2},{name:"用户B",reduction:4.8}];t("setLeaderboard",n)}}});var P=n(8407),T=n.n(P),$=n(2674);T().interceptors.request.use($.ZU),T().interceptors.response.use($.Lv.success,$.Lv.error);var N=(0,r.Ef)(l);N.use(j),N.use(O),N.mount("#app")}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.m=e,(()=>{var e=[];n.O=(t,r,a,o)=>{if(!r){var s=1/0;for(l=0;l<e.length;l++){for(var[r,a,o]=e[l],i=!0,u=0;u<r.length;u++)(!1&o||s>=o)&&Object.keys(n.O).every((e=>n.O[e](r[u])))?r.splice(u--,1):(i=!1,o<s&&(s=o));if(i){e.splice(l--,1);var c=a();void 0!==c&&(t=c)}}return t}o=o||0;for(var l=e.length;l>0&&e[l-1][2]>o;l--)e[l]=e[l-1];e[l]=[r,a,o]}})(),(()=>{n.n=e=>{var t=e&&e.__esModule?()=>e["default"]:()=>e;return n.d(t,{a:t}),t}})(),(()=>{n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}})(),(()=>{n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[]))})(),(()=>{n.u=e=>"js/"+e+"."+{90:"a091d87e",565:"024e7594",720:"f9c57e58",737:"abf63903",825:"b9d54e51"}[e]+".js"})(),(()=>{n.miniCssF=e=>"css/"+e+"."+{90:"baf154d3",565:"7e3d5eaa",720:"74efebdf",737:"1676986c",825:"966bab26"}[e]+".css"})(),(()=>{n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{var e={},t="ecopaw:";n.l=(r,a,o,s)=>{if(e[r])e[r].push(a);else{var i,u;if(void 0!==o)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var d=c[l];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+o){i=d;break}}i||(u=!0,i=document.createElement("script"),i.charset="utf-8",i.timeout=120,n.nc&&i.setAttribute("nonce",n.nc),i.setAttribute("data-webpack",t+o),i.src=r),e[r]=[a];var h=(t,n)=>{i.onerror=i.onload=null,clearTimeout(g);var a=e[r];if(delete e[r],i.parentNode&&i.parentNode.removeChild(i),a&&a.forEach((e=>e(n))),t)return t(n)},g=setTimeout(h.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=h.bind(null,i.onerror),i.onload=h.bind(null,i.onload),u&&document.head.appendChild(i)}}})(),(()=>{n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{n.p="/"})(),(()=>{if("undefined"!==typeof document){var e=(e,t,r,a,o)=>{var s=document.createElement("link");s.rel="stylesheet",s.type="text/css",n.nc&&(s.nonce=n.nc);var i=n=>{if(s.onerror=s.onload=null,"load"===n.type)a();else{var r=n&&n.type,i=n&&n.target&&n.target.href||t,u=new Error("Loading CSS chunk "+e+" failed.\n("+r+": "+i+")");u.name="ChunkLoadError",u.code="CSS_CHUNK_LOAD_FAILED",u.type=r,u.request=i,s.parentNode&&s.parentNode.removeChild(s),o(u)}};return s.onerror=s.onload=i,s.href=t,r?r.parentNode.insertBefore(s,r.nextSibling):document.head.appendChild(s),s},t=(e,t)=>{for(var n=document.getElementsByTagName("link"),r=0;r<n.length;r++){var a=n[r],o=a.getAttribute("data-href")||a.getAttribute("href");if("stylesheet"===a.rel&&(o===e||o===t))return a}var s=document.getElementsByTagName("style");for(r=0;r<s.length;r++){a=s[r],o=a.getAttribute("data-href");if(o===e||o===t)return a}},r=r=>new Promise(((a,o)=>{var s=n.miniCssF(r),i=n.p+s;if(t(s,i))return a();e(r,i,null,a,o)})),a={524:0};n.f.miniCss=(e,t)=>{var n={90:1,565:1,720:1,737:1,825:1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=r(e).then((()=>{a[e]=0}),(t=>{throw delete a[e],t})))}}})(),(()=>{var e={524:0};n.f.j=(t,r)=>{var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)r.push(a[2]);else{var o=new Promise(((n,r)=>a=e[t]=[n,r]));r.push(a[2]=o);var s=n.p+n.u(t),i=new Error,u=r=>{if(n.o(e,t)&&(a=e[t],0!==a&&(e[t]=void 0),a)){var o=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.src;i.message="Loading chunk "+t+" failed.\n("+o+": "+s+")",i.name="ChunkLoadError",i.type=o,i.request=s,a[1](i)}};n.l(s,u,"chunk-"+t,t)}},n.O.j=t=>0===e[t];var t=(t,r)=>{var a,o,[s,i,u]=r,c=0;if(s.some((t=>0!==e[t]))){for(a in i)n.o(i,a)&&(n.m[a]=i[a]);if(u)var l=u(n)}for(t&&t(r);c<s.length;c++)o=s[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(l)},r=self["webpackChunkecopaw"]=self["webpackChunkecopaw"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=n.O(void 0,[504],(()=>n(6347)));r=n.O(r)})();
//# sourceMappingURL=app.e313bdbe.js.map